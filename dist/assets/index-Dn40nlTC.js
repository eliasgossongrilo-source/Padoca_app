(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function k1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _1={exports:{}},tu={},N1={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),dE=Symbol.for("react.portal"),hE=Symbol.for("react.fragment"),fE=Symbol.for("react.strict_mode"),pE=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),xE=Symbol.for("react.forward_ref"),yE=Symbol.for("react.suspense"),vE=Symbol.for("react.memo"),wE=Symbol.for("react.lazy"),gg=Symbol.iterator;function bE(t){return t===null||typeof t!="object"?null:(t=gg&&t[gg]||t["@@iterator"],typeof t=="function"?t:null)}var E1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T1=Object.assign,C1={};function Hs(t,e,n){this.props=t,this.context=e,this.refs=C1,this.updater=n||E1}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S1(){}S1.prototype=Hs.prototype;function np(t,e,n){this.props=t,this.context=e,this.refs=C1,this.updater=n||E1}var rp=np.prototype=new S1;rp.constructor=np;T1(rp,Hs.prototype);rp.isPureReactComponent=!0;var xg=Array.isArray,j1=Object.prototype.hasOwnProperty,ip={current:null},I1={key:!0,ref:!0,__self:!0,__source:!0};function z1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)j1.call(e,r)&&!I1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Va,type:t,key:s,ref:o,props:i,_owner:ip.current}}function kE(t,e){return{$$typeof:Va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Va}function _E(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yg=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_E(""+t.key):e.toString(36)}function Ml(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Va:case dE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+id(o,0):r,xg(i)?(n="",t!=null&&(n=t.replace(yg,"$&/")+"/"),Ml(i,e,n,"",function(d){return d})):i!=null&&(sp(i)&&(i=kE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xg(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+id(s,l);o+=Ml(s,e,n,c,i)}else if(c=bE(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+id(s,l++),o+=Ml(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cl(t,e,n){if(t==null)return t;var r=[],i=0;return Ml(t,r,"","",function(s){return e.call(n,s,i++)}),r}function NE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},Ll={transition:null},EE={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:Ll,ReactCurrentOwner:ip};function A1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:cl,forEach:function(t,e,n){cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cl(t,function(){e++}),e},toArray:function(t){return cl(t,function(e){return e})||[]},only:function(t){if(!sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Hs;ve.Fragment=hE;ve.Profiler=pE;ve.PureComponent=np;ve.StrictMode=fE;ve.Suspense=yE;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EE;ve.act=A1;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=T1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ip.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)j1.call(e,c)&&!I1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Va,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:gE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mE,_context:t},t.Consumer=t};ve.createElement=z1;ve.createFactory=function(t){var e=z1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:xE,render:t}};ve.isValidElement=sp;ve.lazy=function(t){return{$$typeof:wE,_payload:{_status:-1,_result:t},_init:NE}};ve.memo=function(t,e){return{$$typeof:vE,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Ll.transition;Ll.transition={};try{t()}finally{Ll.transition=e}};ve.unstable_act=A1;ve.useCallback=function(t,e){return Bt.current.useCallback(t,e)};ve.useContext=function(t){return Bt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Bt.current.useEffect(t,e)};ve.useId=function(){return Bt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Bt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};ve.useRef=function(t){return Bt.current.useRef(t)};ve.useState=function(t){return Bt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Bt.current.useTransition()};ve.version="18.3.1";N1.exports=ve;var j=N1.exports;const gn=k1(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE=j,CE=Symbol.for("react.element"),SE=Symbol.for("react.fragment"),jE=Object.prototype.hasOwnProperty,IE=TE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zE={key:!0,ref:!0,__self:!0,__source:!0};function P1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jE.call(e,r)&&!zE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:CE,type:t,key:s,ref:o,props:i,_owner:IE.current}}tu.Fragment=SE;tu.jsx=P1;tu.jsxs=P1;_1.exports=tu;var a=_1.exports,lh={},R1={exports:{}},sn={},D1={exports:{}},V1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,ie){var te=Y.length;Y.push(ie);e:for(;0<te;){var ue=te-1>>>1,he=Y[ue];if(0<i(he,ie))Y[ue]=ie,Y[te]=he,te=ue;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ie=Y[0],te=Y.pop();if(te!==ie){Y[0]=te;e:for(var ue=0,he=Y.length,Ee=he>>>1;ue<Ee;){var P=2*(ue+1)-1,B=Y[P],U=P+1,W=Y[U];if(0>i(B,te))U<he&&0>i(W,B)?(Y[ue]=W,Y[U]=te,ue=U):(Y[ue]=B,Y[P]=te,ue=P);else if(U<he&&0>i(W,te))Y[ue]=W,Y[U]=te,ue=U;else break e}}return ie}function i(Y,ie){var te=Y.sortIndex-ie.sortIndex;return te!==0?te:Y.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,p=null,m=3,y=!1,N=!1,C=!1,z=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Y){for(var ie=n(d);ie!==null;){if(ie.callback===null)r(d);else if(ie.startTime<=Y)r(d),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=n(d)}}function R(Y){if(C=!1,w(Y),!N)if(n(c)!==null)N=!0,re(V);else{var ie=n(d);ie!==null&&le(R,ie.startTime-Y)}}function V(Y,ie){N=!1,C&&(C=!1,b(v),v=-1),y=!0;var te=m;try{for(w(ie),p=n(c);p!==null&&(!(p.expirationTime>ie)||Y&&!A());){var ue=p.callback;if(typeof ue=="function"){p.callback=null,m=p.priorityLevel;var he=ue(p.expirationTime<=ie);ie=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(c)&&r(c),w(ie)}else r(c);p=n(c)}if(p!==null)var Ee=!0;else{var P=n(d);P!==null&&le(R,P.startTime-ie),Ee=!1}return Ee}finally{p=null,m=te,y=!1}}var M=!1,k=null,v=-1,_=5,T=-1;function A(){return!(t.unstable_now()-T<_)}function D(){if(k!==null){var Y=t.unstable_now();T=Y;var ie=!0;try{ie=k(!0,Y)}finally{ie?I():(M=!1,k=null)}}else M=!1}var I;if(typeof x=="function")I=function(){x(D)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ce=xe.port2;xe.port1.onmessage=D,I=function(){ce.postMessage(null)}}else I=function(){z(D,0)};function re(Y){k=Y,M||(M=!0,I())}function le(Y,ie){v=z(function(){Y(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){N||y||(N=!0,re(V))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var te=m;m=ie;try{return Y()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=m;m=Y;try{return ie()}finally{m=te}},t.unstable_scheduleCallback=function(Y,ie,te){var ue=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ue+te:ue):te=ue,Y){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=te+he,Y={id:h++,callback:ie,priorityLevel:Y,startTime:te,expirationTime:he,sortIndex:-1},te>ue?(Y.sortIndex=te,e(d,Y),n(c)===null&&Y===n(d)&&(C?(b(v),v=-1):C=!0,le(R,te-ue))):(Y.sortIndex=he,e(c,Y),N||y||(N=!0,re(V))),Y},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(Y){var ie=m;return function(){var te=m;m=ie;try{return Y.apply(this,arguments)}finally{m=te}}}})(V1);D1.exports=V1;var AE=D1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE=j,rn=AE;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M1=new Set,sa={};function Bi(t,e){zs(t,e),zs(t+"Capture",e)}function zs(t,e){for(sa[t]=e,t=0;t<e.length;t++)M1.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ch=Object.prototype.hasOwnProperty,RE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vg={},wg={};function DE(t){return ch.call(wg,t)?!0:ch.call(vg,t)?!1:RE.test(t)?wg[t]=!0:(vg[t]=!0,!1)}function VE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ME(t,e,n,r){if(e===null||typeof e>"u"||VE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var op=/[\-:]([a-z])/g;function ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(op,ap);Tt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(op,ap);Tt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(op,ap);Tt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function lp(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ME(e,n,i,r)&&(n=null),r||i===null?DE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gr=PE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),rs=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),cp=Symbol.for("react.strict_mode"),uh=Symbol.for("react.profiler"),L1=Symbol.for("react.provider"),O1=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),dh=Symbol.for("react.suspense"),hh=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),F1=Symbol.for("react.offscreen"),bg=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,sd;function zo(t){if(sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sd=e&&e[1]||""}return`
`+sd+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function LE(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function fh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case is:return"Fragment";case rs:return"Portal";case uh:return"Profiler";case cp:return"StrictMode";case dh:return"Suspense";case hh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O1:return(t.displayName||"Context")+".Consumer";case L1:return(t._context.displayName||"Context")+".Provider";case up:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dp:return e=t.displayName||null,e!==null?e:fh(t.type)||"Memo";case Tr:e=t._payload,t=t._init;try{return fh(t(e))}catch{}}return null}function OE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fh(e);case 8:return e===cp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FE(t){var e=B1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dl(t){t._valueTracker||(t._valueTracker=FE(t))}function U1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ph(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $1(t,e){e=e.checked,e!=null&&lp(t,"checked",e,!1)}function mh(t,e){$1(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gh(t,e.type,n):e.hasOwnProperty("defaultValue")&&gh(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _g(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gh(t,e,n){(e!=="number"||cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ao=Array.isArray;function ws(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ng(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Ao(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function W1(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Eg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,H1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BE=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(t){BE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fo[e]=Fo[t]})});function G1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fo.hasOwnProperty(t)&&Fo[t]?(""+e).trim():e+"px"}function K1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=G1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var UE=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vh(t,e){if(e){if(UE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function wh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=null;function hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kh=null,bs=null,ks=null;function Tg(t){if(t=Oa(t)){if(typeof kh!="function")throw Error(X(280));var e=t.stateNode;e&&(e=ou(e),kh(t.stateNode,t.type,e))}}function Q1(t){bs?ks?ks.push(t):ks=[t]:bs=t}function Y1(){if(bs){var t=bs,e=ks;if(ks=bs=null,Tg(t),e)for(t=0;t<e.length;t++)Tg(e[t])}}function X1(t,e){return t(e)}function J1(){}var ld=!1;function Z1(t,e,n){if(ld)return t(e,n);ld=!0;try{return X1(t,e,n)}finally{ld=!1,(bs!==null||ks!==null)&&(J1(),Y1())}}function aa(t,e){var n=t.stateNode;if(n===null)return null;var r=ou(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var _h=!1;if(ir)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){_h=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{_h=!1}function $E(t,e,n,r,i,s,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Bo=!1,uc=null,dc=!1,Nh=null,WE={onError:function(t){Bo=!0,uc=t}};function qE(t,e,n,r,i,s,o,l,c){Bo=!1,uc=null,$E.apply(WE,arguments)}function HE(t,e,n,r,i,s,o,l,c){if(qE.apply(this,arguments),Bo){if(Bo){var d=uc;Bo=!1,uc=null}else throw Error(X(198));dc||(dc=!0,Nh=d)}}function Ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ew(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cg(t){if(Ui(t)!==t)throw Error(X(188))}function GE(t){var e=t.alternate;if(!e){if(e=Ui(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cg(i),t;if(s===r)return Cg(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function tw(t){return t=GE(t),t!==null?nw(t):null}function nw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nw(t);if(e!==null)return e;t=t.sibling}return null}var rw=rn.unstable_scheduleCallback,Sg=rn.unstable_cancelCallback,KE=rn.unstable_shouldYield,QE=rn.unstable_requestPaint,tt=rn.unstable_now,YE=rn.unstable_getCurrentPriorityLevel,fp=rn.unstable_ImmediatePriority,iw=rn.unstable_UserBlockingPriority,hc=rn.unstable_NormalPriority,XE=rn.unstable_LowPriority,sw=rn.unstable_IdlePriority,nu=null,Mn=null;function JE(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(nu,t,void 0,(t.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:tT,ZE=Math.log,eT=Math.LN2;function tT(t){return t>>>=0,t===0?32:31-(ZE(t)/eT|0)|0}var fl=64,pl=4194304;function Po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Po(l):(s&=o,s!==0&&(r=Po(s)))}else o=n&~i,o!==0?r=Po(o):s!==0&&(r=Po(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tn(e),i=1<<n,r|=t[n],e&=~i;return r}function nT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Tn(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=nT(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Eh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ow(){var t=fl;return fl<<=1,!(fl&4194240)&&(fl=64),t}function cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tn(e),t[e]=n}function iT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Tn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function aw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lw,mp,cw,uw,dw,Th=!1,ml=[],Pr=null,Rr=null,Dr=null,la=new Map,ca=new Map,Sr=[],sT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jg(t,e){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(e.pointerId)}}function ko(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Oa(e),e!==null&&mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oT(t,e,n,r,i){switch(e){case"focusin":return Pr=ko(Pr,t,e,n,r,i),!0;case"dragenter":return Rr=ko(Rr,t,e,n,r,i),!0;case"mouseover":return Dr=ko(Dr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return la.set(s,ko(la.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ca.set(s,ko(ca.get(s)||null,t,e,n,r,i)),!0}return!1}function hw(t){var e=vi(t.target);if(e!==null){var n=Ui(e);if(n!==null){if(e=n.tag,e===13){if(e=ew(n),e!==null){t.blockedOn=e,dw(t.priority,function(){cw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ch(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bh=r,n.target.dispatchEvent(r),bh=null}else return e=Oa(n),e!==null&&mp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ig(t,e,n){Ol(t)&&n.delete(e)}function aT(){Th=!1,Pr!==null&&Ol(Pr)&&(Pr=null),Rr!==null&&Ol(Rr)&&(Rr=null),Dr!==null&&Ol(Dr)&&(Dr=null),la.forEach(Ig),ca.forEach(Ig)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Th||(Th=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,aT)))}function ua(t){function e(i){return _o(i,t)}if(0<ml.length){_o(ml[0],t);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pr!==null&&_o(Pr,t),Rr!==null&&_o(Rr,t),Dr!==null&&_o(Dr,t),la.forEach(e),ca.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)hw(n),n.blockedOn===null&&Sr.shift()}var _s=gr.ReactCurrentBatchConfig,pc=!0;function lT(t,e,n,r){var i=Se,s=_s.transition;_s.transition=null;try{Se=1,gp(t,e,n,r)}finally{Se=i,_s.transition=s}}function cT(t,e,n,r){var i=Se,s=_s.transition;_s.transition=null;try{Se=4,gp(t,e,n,r)}finally{Se=i,_s.transition=s}}function gp(t,e,n,r){if(pc){var i=Ch(t,e,n,r);if(i===null)vd(t,e,r,mc,n),jg(t,r);else if(oT(i,t,e,n,r))r.stopPropagation();else if(jg(t,r),e&4&&-1<sT.indexOf(t)){for(;i!==null;){var s=Oa(i);if(s!==null&&lw(s),s=Ch(t,e,n,r),s===null&&vd(t,e,r,mc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vd(t,e,r,null,n)}}var mc=null;function Ch(t,e,n,r){if(mc=null,t=hp(r),t=vi(t),t!==null)if(e=Ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ew(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mc=t,null}function fw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YE()){case fp:return 1;case iw:return 4;case hc:case XE:return 16;case sw:return 536870912;default:return 16}default:return 16}}var Ir=null,xp=null,Fl=null;function pw(){if(Fl)return Fl;var t,e=xp,n=e.length,r,i="value"in Ir?Ir.value:Ir.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fl=i.slice(t,1<r?1-r:void 0)}function Bl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gl(){return!0}function zg(){return!1}function on(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gl:zg,this.isPropagationStopped=zg,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),e}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yp=on(Gs),La=Ke({},Gs,{view:0,detail:0}),uT=on(La),ud,dd,No,ru=Ke({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(ud=t.screenX-No.screenX,dd=t.screenY-No.screenY):dd=ud=0,No=t),ud)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),Ag=on(ru),dT=Ke({},ru,{dataTransfer:0}),hT=on(dT),fT=Ke({},La,{relatedTarget:0}),hd=on(fT),pT=Ke({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),mT=on(pT),gT=Ke({},Gs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xT=on(gT),yT=Ke({},Gs,{data:0}),Pg=on(yT),vT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bT[t])?!!e[t]:!1}function vp(){return kT}var _T=Ke({},La,{key:function(t){if(t.key){var e=vT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vp,charCode:function(t){return t.type==="keypress"?Bl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NT=on(_T),ET=Ke({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rg=on(ET),TT=Ke({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vp}),CT=on(TT),ST=Ke({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),jT=on(ST),IT=Ke({},ru,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zT=on(IT),AT=[9,13,27,32],wp=ir&&"CompositionEvent"in window,Uo=null;ir&&"documentMode"in document&&(Uo=document.documentMode);var PT=ir&&"TextEvent"in window&&!Uo,mw=ir&&(!wp||Uo&&8<Uo&&11>=Uo),Dg=" ",Vg=!1;function gw(t,e){switch(t){case"keyup":return AT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ss=!1;function RT(t,e){switch(t){case"compositionend":return xw(e);case"keypress":return e.which!==32?null:(Vg=!0,Dg);case"textInput":return t=e.data,t===Dg&&Vg?null:t;default:return null}}function DT(t,e){if(ss)return t==="compositionend"||!wp&&gw(t,e)?(t=pw(),Fl=xp=Ir=null,ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mw&&e.locale!=="ko"?null:e.data;default:return null}}var VT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VT[t.type]:e==="textarea"}function yw(t,e,n,r){Q1(r),e=gc(e,"onChange"),0<e.length&&(n=new yp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $o=null,da=null;function MT(t){jw(t,0)}function iu(t){var e=ls(t);if(U1(e))return t}function LT(t,e){if(t==="change")return e}var vw=!1;if(ir){var fd;if(ir){var pd="oninput"in document;if(!pd){var Lg=document.createElement("div");Lg.setAttribute("oninput","return;"),pd=typeof Lg.oninput=="function"}fd=pd}else fd=!1;vw=fd&&(!document.documentMode||9<document.documentMode)}function Og(){$o&&($o.detachEvent("onpropertychange",ww),da=$o=null)}function ww(t){if(t.propertyName==="value"&&iu(da)){var e=[];yw(e,da,t,hp(t)),Z1(MT,e)}}function OT(t,e,n){t==="focusin"?(Og(),$o=e,da=n,$o.attachEvent("onpropertychange",ww)):t==="focusout"&&Og()}function FT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(da)}function BT(t,e){if(t==="click")return iu(e)}function UT(t,e){if(t==="input"||t==="change")return iu(e)}function $T(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:$T;function ha(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ch.call(e,i)||!Sn(t[i],e[i]))return!1}return!0}function Fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bg(t,e){var n=Fg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fg(n)}}function bw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kw(){for(var t=window,e=cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cc(t.document)}return e}function bp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WT(t){var e=kw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bw(n.ownerDocument.documentElement,n)){if(r!==null&&bp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Bg(n,s);var o=Bg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qT=ir&&"documentMode"in document&&11>=document.documentMode,os=null,Sh=null,Wo=null,jh=!1;function Ug(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jh||os==null||os!==cc(r)||(r=os,"selectionStart"in r&&bp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&ha(Wo,r)||(Wo=r,r=gc(Sh,"onSelect"),0<r.length&&(e=new yp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=os)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var as={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},md={},_w={};ir&&(_w=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function su(t){if(md[t])return md[t];if(!as[t])return t;var e=as[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _w)return md[t]=e[n];return t}var Nw=su("animationend"),Ew=su("animationiteration"),Tw=su("animationstart"),Cw=su("transitionend"),Sw=new Map,$g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){Sw.set(t,e),Bi(e,[t])}for(var gd=0;gd<$g.length;gd++){var xd=$g[gd],HT=xd.toLowerCase(),GT=xd[0].toUpperCase()+xd.slice(1);ni(HT,"on"+GT)}ni(Nw,"onAnimationEnd");ni(Ew,"onAnimationIteration");ni(Tw,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(Cw,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function Wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HE(r,e,void 0,t),t.currentTarget=null}function jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Wg(i,l,d),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Wg(i,l,d),s=c}}}if(dc)throw t=Nh,dc=!1,Nh=null,t}function Me(t,e){var n=e[Rh];n===void 0&&(n=e[Rh]=new Set);var r=t+"__bubble";n.has(r)||(Iw(e,t,2,!1),n.add(r))}function yd(t,e,n){var r=0;e&&(r|=4),Iw(n,t,r,e)}var yl="_reactListening"+Math.random().toString(36).slice(2);function fa(t){if(!t[yl]){t[yl]=!0,M1.forEach(function(n){n!=="selectionchange"&&(KT.has(n)||yd(n,!1,t),yd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yl]||(e[yl]=!0,yd("selectionchange",!1,e))}}function Iw(t,e,n,r){switch(fw(e)){case 1:var i=lT;break;case 4:i=cT;break;default:i=gp}n=i.bind(null,e,n,t),i=void 0,!_h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=vi(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Z1(function(){var d=s,h=hp(n),p=[];e:{var m=Sw.get(t);if(m!==void 0){var y=yp,N=t;switch(t){case"keypress":if(Bl(n)===0)break e;case"keydown":case"keyup":y=NT;break;case"focusin":N="focus",y=hd;break;case"focusout":N="blur",y=hd;break;case"beforeblur":case"afterblur":y=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=hT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=CT;break;case Nw:case Ew:case Tw:y=mT;break;case Cw:y=jT;break;case"scroll":y=uT;break;case"wheel":y=zT;break;case"copy":case"cut":case"paste":y=xT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Rg}var C=(e&4)!==0,z=!C&&t==="scroll",b=C?m!==null?m+"Capture":null:m;C=[];for(var x=d,w;x!==null;){w=x;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,b!==null&&(R=aa(x,b),R!=null&&C.push(pa(x,R,w)))),z)break;x=x.return}0<C.length&&(m=new y(m,N,null,n,h),p.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==bh&&(N=n.relatedTarget||n.fromElement)&&(vi(N)||N[sr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(N=n.relatedTarget||n.toElement,y=d,N=N?vi(N):null,N!==null&&(z=Ui(N),N!==z||N.tag!==5&&N.tag!==6)&&(N=null)):(y=null,N=d),y!==N)){if(C=Ag,R="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(C=Rg,R="onPointerLeave",b="onPointerEnter",x="pointer"),z=y==null?m:ls(y),w=N==null?m:ls(N),m=new C(R,x+"leave",y,n,h),m.target=z,m.relatedTarget=w,R=null,vi(h)===d&&(C=new C(b,x+"enter",N,n,h),C.target=w,C.relatedTarget=z,R=C),z=R,y&&N)t:{for(C=y,b=N,x=0,w=C;w;w=Xi(w))x++;for(w=0,R=b;R;R=Xi(R))w++;for(;0<x-w;)C=Xi(C),x--;for(;0<w-x;)b=Xi(b),w--;for(;x--;){if(C===b||b!==null&&C===b.alternate)break t;C=Xi(C),b=Xi(b)}C=null}else C=null;y!==null&&qg(p,m,y,C,!1),N!==null&&z!==null&&qg(p,z,N,C,!0)}}e:{if(m=d?ls(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var V=LT;else if(Mg(m))if(vw)V=UT;else{V=FT;var M=OT}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=BT);if(V&&(V=V(t,d))){yw(p,V,n,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&gh(m,"number",m.value)}switch(M=d?ls(d):window,t){case"focusin":(Mg(M)||M.contentEditable==="true")&&(os=M,Sh=d,Wo=null);break;case"focusout":Wo=Sh=os=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Ug(p,n,h);break;case"selectionchange":if(qT)break;case"keydown":case"keyup":Ug(p,n,h)}var k;if(wp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ss?gw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(mw&&n.locale!=="ko"&&(ss||v!=="onCompositionStart"?v==="onCompositionEnd"&&ss&&(k=pw()):(Ir=h,xp="value"in Ir?Ir.value:Ir.textContent,ss=!0)),M=gc(d,v),0<M.length&&(v=new Pg(v,t,null,n,h),p.push({event:v,listeners:M}),k?v.data=k:(k=xw(n),k!==null&&(v.data=k)))),(k=PT?RT(t,n):DT(t,n))&&(d=gc(d,"onBeforeInput"),0<d.length&&(h=new Pg("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=k))}jw(p,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=aa(t,n),s!=null&&r.unshift(pa(t,s,i)),s=aa(t,e),s!=null&&r.push(pa(t,s,i))),t=t.return}return r}function Xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=aa(n,s),c!=null&&o.unshift(pa(n,c,l))):i||(c=aa(n,s),c!=null&&o.push(pa(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var QT=/\r\n?/g,YT=/\u0000|\uFFFD/g;function Hg(t){return(typeof t=="string"?t:""+t).replace(QT,`
`).replace(YT,"")}function vl(t,e,n){if(e=Hg(e),Hg(t)!==e&&n)throw Error(X(425))}function xc(){}var Ih=null,zh=null;function Ah(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ph=typeof setTimeout=="function"?setTimeout:void 0,XT=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,JT=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(ZT)}:Ph;function ZT(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ua(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ua(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Ks,ma="__reactProps$"+Ks,sr="__reactContainer$"+Ks,Rh="__reactEvents$"+Ks,eC="__reactListeners$"+Ks,tC="__reactHandles$"+Ks;function vi(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[Vn])return n;t=Kg(t)}return e}t=n,n=t.parentNode}return null}function Oa(t){return t=t[Vn]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function ou(t){return t[ma]||null}var Dh=[],cs=-1;function ri(t){return{current:t}}function Fe(t){0>cs||(t.current=Dh[cs],Dh[cs]=null,cs--)}function De(t,e){cs++,Dh[cs]=t.current,t.current=e}var Hr={},Rt=ri(Hr),Kt=ri(!1),zi=Hr;function As(t,e){var n=t.type.contextTypes;if(!n)return Hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qt(t){return t=t.childContextTypes,t!=null}function yc(){Fe(Kt),Fe(Rt)}function Qg(t,e,n){if(Rt.current!==Hr)throw Error(X(168));De(Rt,e),De(Kt,n)}function zw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,OE(t)||"Unknown",i));return Ke({},n,r)}function vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,zi=Rt.current,De(Rt,t),De(Kt,Kt.current),!0}function Yg(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=zw(t,e,zi),r.__reactInternalMemoizedMergedChildContext=t,Fe(Kt),Fe(Rt),De(Rt,t)):Fe(Kt),De(Kt,n)}var Zn=null,au=!1,bd=!1;function Aw(t){Zn===null?Zn=[t]:Zn.push(t)}function nC(t){au=!0,Aw(t)}function ii(){if(!bd&&Zn!==null){bd=!0;var t=0,e=Se;try{var n=Zn;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zn=null,au=!1}catch(i){throw Zn!==null&&(Zn=Zn.slice(t+1)),rw(fp,ii),i}finally{Se=e,bd=!1}}return null}var us=[],ds=0,wc=null,bc=0,ln=[],cn=0,Ai=null,er=1,tr="";function pi(t,e){us[ds++]=bc,us[ds++]=wc,wc=t,bc=e}function Pw(t,e,n){ln[cn++]=er,ln[cn++]=tr,ln[cn++]=Ai,Ai=t;var r=er;t=tr;var i=32-Tn(r)-1;r&=~(1<<i),n+=1;var s=32-Tn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,er=1<<32-Tn(e)+i|n<<i|r,tr=s+t}else er=1<<s|n<<i|r,tr=t}function kp(t){t.return!==null&&(pi(t,1),Pw(t,1,0))}function _p(t){for(;t===wc;)wc=us[--ds],us[ds]=null,bc=us[--ds],us[ds]=null;for(;t===Ai;)Ai=ln[--cn],ln[cn]=null,tr=ln[--cn],ln[cn]=null,er=ln[--cn],ln[cn]=null}var tn=null,en=null,We=!1,Nn=null;function Rw(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,en=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,en=null,!0):!1;default:return!1}}function Vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mh(t){if(We){var e=en;if(e){var n=e;if(!Xg(t,e)){if(Vh(t))throw Error(X(418));e=Vr(n.nextSibling);var r=tn;e&&Xg(t,e)?Rw(r,n):(t.flags=t.flags&-4097|2,We=!1,tn=t)}}else{if(Vh(t))throw Error(X(418));t.flags=t.flags&-4097|2,We=!1,tn=t}}}function Jg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function wl(t){if(t!==tn)return!1;if(!We)return Jg(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ah(t.type,t.memoizedProps)),e&&(e=en)){if(Vh(t))throw Dw(),Error(X(418));for(;e;)Rw(t,e),e=Vr(e.nextSibling)}if(Jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){en=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}en=null}}else en=tn?Vr(t.stateNode.nextSibling):null;return!0}function Dw(){for(var t=en;t;)t=Vr(t.nextSibling)}function Ps(){en=tn=null,We=!1}function Np(t){Nn===null?Nn=[t]:Nn.push(t)}var rC=gr.ReactCurrentBatchConfig;function Eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function bl(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zg(t){var e=t._init;return e(t._payload)}function Vw(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=Fr(b,x),b.index=0,b.sibling=null,b}function s(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,R){return x===null||x.tag!==6?(x=Sd(w,b.mode,R),x.return=b,x):(x=i(x,w),x.return=b,x)}function c(b,x,w,R){var V=w.type;return V===is?h(b,x,w.props.children,R,w.key):x!==null&&(x.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Tr&&Zg(V)===x.type)?(R=i(x,w.props),R.ref=Eo(b,x,w),R.return=b,R):(R=Kl(w.type,w.key,w.props,null,b.mode,R),R.ref=Eo(b,x,w),R.return=b,R)}function d(b,x,w,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=jd(w,b.mode,R),x.return=b,x):(x=i(x,w.children||[]),x.return=b,x)}function h(b,x,w,R,V){return x===null||x.tag!==7?(x=Ci(w,b.mode,R,V),x.return=b,x):(x=i(x,w),x.return=b,x)}function p(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sd(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ul:return w=Kl(x.type,x.key,x.props,null,b.mode,w),w.ref=Eo(b,null,x),w.return=b,w;case rs:return x=jd(x,b.mode,w),x.return=b,x;case Tr:var R=x._init;return p(b,R(x._payload),w)}if(Ao(x)||wo(x))return x=Ci(x,b.mode,w,null),x.return=b,x;bl(b,x)}return null}function m(b,x,w,R){var V=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:l(b,x,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ul:return w.key===V?c(b,x,w,R):null;case rs:return w.key===V?d(b,x,w,R):null;case Tr:return V=w._init,m(b,x,V(w._payload),R)}if(Ao(w)||wo(w))return V!==null?null:h(b,x,w,R,null);bl(b,w)}return null}function y(b,x,w,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(w)||null,l(x,b,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ul:return b=b.get(R.key===null?w:R.key)||null,c(x,b,R,V);case rs:return b=b.get(R.key===null?w:R.key)||null,d(x,b,R,V);case Tr:var M=R._init;return y(b,x,w,M(R._payload),V)}if(Ao(R)||wo(R))return b=b.get(w)||null,h(x,b,R,V,null);bl(x,R)}return null}function N(b,x,w,R){for(var V=null,M=null,k=x,v=x=0,_=null;k!==null&&v<w.length;v++){k.index>v?(_=k,k=null):_=k.sibling;var T=m(b,k,w[v],R);if(T===null){k===null&&(k=_);break}t&&k&&T.alternate===null&&e(b,k),x=s(T,x,v),M===null?V=T:M.sibling=T,M=T,k=_}if(v===w.length)return n(b,k),We&&pi(b,v),V;if(k===null){for(;v<w.length;v++)k=p(b,w[v],R),k!==null&&(x=s(k,x,v),M===null?V=k:M.sibling=k,M=k);return We&&pi(b,v),V}for(k=r(b,k);v<w.length;v++)_=y(k,b,v,w[v],R),_!==null&&(t&&_.alternate!==null&&k.delete(_.key===null?v:_.key),x=s(_,x,v),M===null?V=_:M.sibling=_,M=_);return t&&k.forEach(function(A){return e(b,A)}),We&&pi(b,v),V}function C(b,x,w,R){var V=wo(w);if(typeof V!="function")throw Error(X(150));if(w=V.call(w),w==null)throw Error(X(151));for(var M=V=null,k=x,v=x=0,_=null,T=w.next();k!==null&&!T.done;v++,T=w.next()){k.index>v?(_=k,k=null):_=k.sibling;var A=m(b,k,T.value,R);if(A===null){k===null&&(k=_);break}t&&k&&A.alternate===null&&e(b,k),x=s(A,x,v),M===null?V=A:M.sibling=A,M=A,k=_}if(T.done)return n(b,k),We&&pi(b,v),V;if(k===null){for(;!T.done;v++,T=w.next())T=p(b,T.value,R),T!==null&&(x=s(T,x,v),M===null?V=T:M.sibling=T,M=T);return We&&pi(b,v),V}for(k=r(b,k);!T.done;v++,T=w.next())T=y(k,b,v,T.value,R),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?v:T.key),x=s(T,x,v),M===null?V=T:M.sibling=T,M=T);return t&&k.forEach(function(D){return e(b,D)}),We&&pi(b,v),V}function z(b,x,w,R){if(typeof w=="object"&&w!==null&&w.type===is&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ul:e:{for(var V=w.key,M=x;M!==null;){if(M.key===V){if(V=w.type,V===is){if(M.tag===7){n(b,M.sibling),x=i(M,w.props.children),x.return=b,b=x;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Tr&&Zg(V)===M.type){n(b,M.sibling),x=i(M,w.props),x.ref=Eo(b,M,w),x.return=b,b=x;break e}n(b,M);break}else e(b,M);M=M.sibling}w.type===is?(x=Ci(w.props.children,b.mode,R,w.key),x.return=b,b=x):(R=Kl(w.type,w.key,w.props,null,b.mode,R),R.ref=Eo(b,x,w),R.return=b,b=R)}return o(b);case rs:e:{for(M=w.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=i(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=jd(w,b.mode,R),x.return=b,b=x}return o(b);case Tr:return M=w._init,z(b,x,M(w._payload),R)}if(Ao(w))return N(b,x,w,R);if(wo(w))return C(b,x,w,R);bl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=i(x,w),x.return=b,b=x):(n(b,x),x=Sd(w,b.mode,R),x.return=b,b=x),o(b)):n(b,x)}return z}var Rs=Vw(!0),Mw=Vw(!1),kc=ri(null),_c=null,hs=null,Ep=null;function Tp(){Ep=hs=_c=null}function Cp(t){var e=kc.current;Fe(kc),t._currentValue=e}function Lh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){_c=t,Ep=hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(Ep!==t)if(t={context:t,memoizedValue:e,next:null},hs===null){if(_c===null)throw Error(X(308));hs=t,_c.dependencies={lanes:0,firstContext:t}}else hs=hs.next=t;return e}var wi=null;function Sp(t){wi===null?wi=[t]:wi.push(t)}function Lw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sp(e)):(n.next=i.next,i.next=n),e.interleaved=n,or(t,r)}function or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ow(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,or(t,n)}return i=r.interleaved,i===null?(e.next=e,Sp(r)):(e.next=i.next,i.next=e),r.interleaved=e,or(t,n)}function Ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}function ex(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nc(t,e,n,r){var i=t.updateQueue;Cr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;o=0,h=d=c=null,l=s;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,C=l;switch(m=e,y=n,C.tag){case 1:if(N=C.payload,typeof N=="function"){p=N.call(y,p,m);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,m=typeof N=="function"?N.call(y,p,m):N,m==null)break e;p=Ke({},p,m);break e;case 2:Cr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=p):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ri|=o,t.lanes=o,t.memoizedState=p}}function tx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Fa={},Ln=ri(Fa),ga=ri(Fa),xa=ri(Fa);function bi(t){if(t===Fa)throw Error(X(174));return t}function Ip(t,e){switch(De(xa,e),De(ga,t),De(Ln,Fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yh(e,t)}Fe(Ln),De(Ln,e)}function Ds(){Fe(Ln),Fe(ga),Fe(xa)}function Fw(t){bi(xa.current);var e=bi(Ln.current),n=yh(e,t.type);e!==n&&(De(ga,t),De(Ln,n))}function zp(t){ga.current===t&&(Fe(Ln),Fe(ga))}var He=ri(0);function Ec(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kd=[];function Ap(){for(var t=0;t<kd.length;t++)kd[t]._workInProgressVersionPrimary=null;kd.length=0}var $l=gr.ReactCurrentDispatcher,_d=gr.ReactCurrentBatchConfig,Pi=0,Ge=null,ht=null,yt=null,Tc=!1,qo=!1,ya=0,iC=0;function St(){throw Error(X(321))}function Pp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function Rp(t,e,n,r,i,s){if(Pi=s,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$l.current=t===null||t.memoizedState===null?lC:cC,t=n(r,i),qo){s=0;do{if(qo=!1,ya=0,25<=s)throw Error(X(301));s+=1,yt=ht=null,e.updateQueue=null,$l.current=uC,t=n(r,i)}while(qo)}if($l.current=Cc,e=ht!==null&&ht.next!==null,Pi=0,yt=ht=Ge=null,Tc=!1,e)throw Error(X(300));return t}function Dp(){var t=ya!==0;return ya=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ge.memoizedState=yt=t:yt=yt.next=t,yt}function yn(){if(ht===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=yt===null?Ge.memoizedState:yt.next;if(e!==null)yt=e,ht=t;else{if(t===null)throw Error(X(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},yt===null?Ge.memoizedState=yt=t:yt=yt.next=t}return yt}function va(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=yn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,d=s;do{var h=d.lane;if((Pi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Ge.lanes|=h,Ri|=h}d=d.next}while(d!==null&&d!==s);c===null?o=r:c.next=l,Sn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ge.lanes|=s,Ri|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ed(t){var e=yn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Sn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Bw(){}function Uw(t,e){var n=Ge,r=yn(),i=e(),s=!Sn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ht=!0),r=r.queue,Vp(qw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,wa(9,Ww.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(X(349));Pi&30||$w(n,e,i)}return i}function $w(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ww(t,e,n,r){e.value=n,e.getSnapshot=r,Hw(e)&&Gw(t)}function qw(t,e,n){return n(function(){Hw(e)&&Gw(t)})}function Hw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function Gw(t){var e=or(t,1);e!==null&&Cn(e,t,1,-1)}function nx(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},e.queue=t,t=t.dispatch=aC.bind(null,Ge,t),[e.memoizedState,t]}function wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kw(){return yn().memoizedState}function Wl(t,e,n,r){var i=Rn();Ge.flags|=t,i.memoizedState=wa(1|e,n,void 0,r===void 0?null:r)}function lu(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&Pp(r,o.deps)){i.memoizedState=wa(e,n,s,r);return}}Ge.flags|=t,i.memoizedState=wa(1|e,n,s,r)}function rx(t,e){return Wl(8390656,8,t,e)}function Vp(t,e){return lu(2048,8,t,e)}function Qw(t,e){return lu(4,2,t,e)}function Yw(t,e){return lu(4,4,t,e)}function Xw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jw(t,e,n){return n=n!=null?n.concat([t]):null,lu(4,4,Xw.bind(null,e,t),n)}function Mp(){}function Zw(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eb(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tb(t,e,n){return Pi&21?(Sn(n,e)||(n=ow(),Ge.lanes|=n,Ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function sC(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=_d.transition;_d.transition={};try{t(!1),e()}finally{Se=n,_d.transition=r}}function nb(){return yn().memoizedState}function oC(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rb(t))ib(e,n);else if(n=Lw(t,e,n,r),n!==null){var i=Ot();Cn(n,t,r,i),sb(n,e,r)}}function aC(t,e,n){var r=Or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rb(t))ib(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Sn(l,o)){var c=e.interleaved;c===null?(i.next=i,Sp(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Lw(t,e,i,r),n!==null&&(i=Ot(),Cn(n,t,r,i),sb(n,e,r))}}function rb(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function ib(t,e){qo=Tc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}var Cc={readContext:xn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},lC={readContext:xn,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:rx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wl(4194308,4,Xw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wl(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oC.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:nx,useDebugValue:Mp,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=nx(!1),e=t[0];return t=sC.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,i=Rn();if(We){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),vt===null)throw Error(X(349));Pi&30||$w(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,rx(qw.bind(null,r,s,t),[t]),r.flags|=2048,wa(9,Ww.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rn(),e=vt.identifierPrefix;if(We){var n=tr,r=er;n=(r&~(1<<32-Tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cC={readContext:xn,useCallback:Zw,useContext:xn,useEffect:Vp,useImperativeHandle:Jw,useInsertionEffect:Qw,useLayoutEffect:Yw,useMemo:eb,useReducer:Nd,useRef:Kw,useState:function(){return Nd(va)},useDebugValue:Mp,useDeferredValue:function(t){var e=yn();return tb(e,ht.memoizedState,t)},useTransition:function(){var t=Nd(va)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Bw,useSyncExternalStore:Uw,useId:nb,unstable_isNewReconciler:!1},uC={readContext:xn,useCallback:Zw,useContext:xn,useEffect:Vp,useImperativeHandle:Jw,useInsertionEffect:Qw,useLayoutEffect:Yw,useMemo:eb,useReducer:Ed,useRef:Kw,useState:function(){return Ed(va)},useDebugValue:Mp,useDeferredValue:function(t){var e=yn();return ht===null?e.memoizedState=t:tb(e,ht.memoizedState,t)},useTransition:function(){var t=Ed(va)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Bw,useSyncExternalStore:Uw,useId:nb,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cu={isMounted:function(t){return(t=t._reactInternals)?Ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=Or(t),s=nr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(Cn(e,t,i,r),Ul(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=Or(t),s=nr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(Cn(e,t,i,r),Ul(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=Or(t),i=nr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mr(t,i,r),e!==null&&(Cn(e,t,r,n),Ul(e,t,r))}};function ix(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ha(n,r)||!ha(i,s):!0}function ob(t,e,n){var r=!1,i=Hr,s=e.contextType;return typeof s=="object"&&s!==null?s=xn(s):(i=Qt(e)?zi:Rt.current,r=e.contextTypes,s=(r=r!=null)?As(t,i):Hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cu.enqueueReplaceState(e,e.state,null)}function Fh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},jp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xn(s):(s=Qt(e)?zi:Rt.current,i.context=As(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Oh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cu.enqueueReplaceState(i,i.state,null),Nc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e){try{var n="",r=e;do n+=LE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Td(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dC=typeof WeakMap=="function"?WeakMap:Map;function ab(t,e,n){n=nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jc||(jc=!0,Xh=r),Bh(t,e)},n}function lb(t,e,n){n=nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bh(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ox(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EC.bind(null,t,e,n),e.then(t,t))}function ax(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nr(-1,1),e.tag=2,Mr(n,e,1))),n.lanes|=1),t)}var hC=gr.ReactCurrentOwner,Ht=!1;function Vt(t,e,n,r){e.child=t===null?Mw(e,null,n,r):Rs(e,t.child,n,r)}function cx(t,e,n,r,i){n=n.render;var s=e.ref;return Ns(e,i),r=Rp(t,e,n,r,s,i),n=Dp(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(We&&n&&kp(e),e.flags|=1,Vt(t,e,r,i),e.child)}function ux(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,cb(t,e,s,r,i)):(t=Kl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ha,n(o,r)&&t.ref===e.ref)return ar(t,e,i)}return e.flags|=1,t=Fr(s,r),t.ref=e.ref,t.return=e,e.child=t}function cb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ha(s,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,ar(t,e,i)}return Uh(t,e,n,r,i)}function ub(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(ps,Zt),Zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(ps,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(ps,Zt),Zt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(ps,Zt),Zt|=r;return Vt(t,e,i,n),e.child}function db(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uh(t,e,n,r,i){var s=Qt(n)?zi:Rt.current;return s=As(e,s),Ns(e,i),n=Rp(t,e,n,r,s,i),r=Dp(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(We&&r&&kp(e),e.flags|=1,Vt(t,e,n,i),e.child)}function dx(t,e,n,r,i){if(Qt(n)){var s=!0;vc(e)}else s=!1;if(Ns(e,i),e.stateNode===null)ql(t,e),ob(e,n,r),Fh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=xn(d):(d=Qt(n)?zi:Rt.current,d=As(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&sx(e,o,r,d),Cr=!1;var m=e.memoizedState;o.state=m,Nc(e,r,o,i),c=e.memoizedState,l!==r||m!==c||Kt.current||Cr?(typeof h=="function"&&(Oh(e,n,h,r),c=e.memoizedState),(l=Cr||ix(e,n,l,r,m,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ow(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:kn(e.type,l),o.props=d,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=xn(c):(c=Qt(n)?zi:Rt.current,c=As(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&sx(e,o,r,c),Cr=!1,m=e.memoizedState,o.state=m,Nc(e,r,o,i);var N=e.memoizedState;l!==p||m!==N||Kt.current||Cr?(typeof y=="function"&&(Oh(e,n,y,r),N=e.memoizedState),(d=Cr||ix(e,n,d,r,m,N,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return $h(t,e,n,r,s,i)}function $h(t,e,n,r,i,s){db(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Yg(e,n,!1),ar(t,e,s);r=e.stateNode,hC.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Rs(e,t.child,null,s),e.child=Rs(e,null,l,s)):Vt(t,e,l,s),e.memoizedState=r.state,i&&Yg(e,n,!0),e.child}function hb(t){var e=t.stateNode;e.pendingContext?Qg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qg(t,e.context,!1),Ip(t,e.containerInfo)}function hx(t,e,n,r,i){return Ps(),Np(i),e.flags|=256,Vt(t,e,n,r),e.child}var Wh={dehydrated:null,treeContext:null,retryLane:0};function qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function fb(t,e,n){var r=e.pendingProps,i=He.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(He,i&1),t===null)return Mh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hu(o,r,0,null),t=Ci(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qh(n),e.memoizedState=Wh,t):Lp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fC(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Fr(l,s):(s=Ci(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Wh,r}return s=t.child,t=s.sibling,r=Fr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lp(t,e){return e=hu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kl(t,e,n,r){return r!==null&&Np(r),Rs(e,t.child,null,n),t=Lp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Td(Error(X(422))),kl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hu({mode:"visible",children:r.children},i,0,null),s=Ci(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Rs(e,t.child,null,o),e.child.memoizedState=qh(o),e.memoizedState=Wh,s);if(!(e.mode&1))return kl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=Td(s,r,void 0),kl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ht||l){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,or(t,i),Cn(r,t,i,-1))}return Wp(),r=Td(Error(X(421))),kl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,en=Vr(i.nextSibling),tn=e,We=!0,Nn=null,t!==null&&(ln[cn++]=er,ln[cn++]=tr,ln[cn++]=Ai,er=t.id,tr=t.overflow,Ai=e),e=Lp(e,r.children),e.flags|=4096,e)}function fx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lh(t.return,e,n)}function Cd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fx(t,n,e);else if(t.tag===19)fx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(He,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ec(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ec(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cd(e,!0,n,null,s);break;case"together":Cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pC(t,e,n){switch(e.tag){case 3:hb(e),Ps();break;case 5:Fw(e);break;case 1:Qt(e.type)&&vc(e);break;case 4:Ip(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(kc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?fb(t,e,n):(De(He,He.current&1),t=ar(t,e,n),t!==null?t.sibling:null);De(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,ub(t,e,n)}return ar(t,e,n)}var mb,Hh,gb,xb;mb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hh=function(){};gb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bi(Ln.current);var s=null;switch(n){case"input":i=ph(t,i),r=ph(t,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=xh(t,i),r=xh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xc)}vh(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(sa.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(sa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Me("scroll",t),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};xb=function(t,e,n,r){n!==r&&(e.flags|=4)};function To(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mC(t,e,n){var r=e.pendingProps;switch(_p(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return Qt(e.type)&&yc(),jt(e),null;case 3:return r=e.stateNode,Ds(),Fe(Kt),Fe(Rt),Ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(ef(Nn),Nn=null))),Hh(t,e),jt(e),null;case 5:zp(e);var i=bi(xa.current);if(n=e.type,t!==null&&e.stateNode!=null)gb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return jt(e),null}if(t=bi(Ln.current),wl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Vn]=e,r[ma]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<Ro.length;i++)Me(Ro[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":kg(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":Ng(r,s),Me("invalid",r)}vh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&vl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&vl(r.textContent,l,t),i=["children",""+l]):sa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":dl(r),_g(r,s,!0);break;case"textarea":dl(r),Eg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vn]=e,t[ma]=r,mb(t,e,!1,!1),e.stateNode=t;e:{switch(o=wh(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ro.length;i++)Me(Ro[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":kg(t,r),i=ph(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),Me("invalid",t);break;case"textarea":Ng(t,r),i=xh(t,r),Me("invalid",t);break;default:i=r}vh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?K1(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&H1(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&oa(t,c):typeof c=="number"&&oa(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sa.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Me("scroll",t):c!=null&&lp(t,s,c,o))}switch(n){case"input":dl(t),_g(t,r,!1);break;case"textarea":dl(t),Eg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ws(t,!!r.multiple,s,!1):r.defaultValue!=null&&ws(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)xb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=bi(xa.current),bi(Ln.current),wl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vn]=e,(s=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=e,e.stateNode=r}return jt(e),null;case 13:if(Fe(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&en!==null&&e.mode&1&&!(e.flags&128))Dw(),Ps(),e.flags|=98560,s=!1;else if(s=wl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Vn]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else Nn!==null&&(ef(Nn),Nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ft===0&&(ft=3):Wp())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return Ds(),Hh(t,e),t===null&&fa(e.stateNode.containerInfo),jt(e),null;case 10:return Cp(e.type._context),jt(e),null;case 17:return Qt(e.type)&&yc(),jt(e),null;case 19:if(Fe(He),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)To(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ec(t),o!==null){for(e.flags|=128,To(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(He,He.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>Ms&&(e.flags|=128,r=!0,To(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ec(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),To(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!We)return jt(e),null}else 2*tt()-s.renderingStartTime>Ms&&n!==1073741824&&(e.flags|=128,r=!0,To(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=He.current,De(He,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return $p(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function gC(t,e){switch(_p(e),e.tag){case 1:return Qt(e.type)&&yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ds(),Fe(Kt),Fe(Rt),Ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zp(e),null;case 13:if(Fe(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(He),null;case 4:return Ds(),null;case 10:return Cp(e.type._context),null;case 22:case 23:return $p(),null;case 24:return null;default:return null}}var _l=!1,At=!1,xC=typeof WeakSet=="function"?WeakSet:Set,ae=null;function fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Gh(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var px=!1;function yC(t,e){if(Ih=pc,t=kw(),bp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++d===i&&(l=o),m===s&&++h===r&&(c=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(zh={focusedElem:t,selectionRange:n},pc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,z=N.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?C:kn(e.type,C),z);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(R){Ze(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return N=px,px=!1,N}function Ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gh(e,n,s)}i=i.next}while(i!==r)}}function uu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yb(t){var e=t.alternate;e!==null&&(t.alternate=null,yb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vn],delete e[ma],delete e[Rh],delete e[eC],delete e[tC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vb(t){return t.tag===5||t.tag===3||t.tag===4}function mx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xc));else if(r!==4&&(t=t.child,t!==null))for(Qh(t,e,n),t=t.sibling;t!==null;)Qh(t,e,n),t=t.sibling}function Yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yh(t,e,n),t=t.sibling;t!==null;)Yh(t,e,n),t=t.sibling}var wt=null,_n=!1;function _r(t,e,n){for(n=n.child;n!==null;)wb(t,e,n),n=n.sibling}function wb(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(nu,n)}catch{}switch(n.tag){case 5:At||fs(n,e);case 6:var r=wt,i=_n;wt=null,_r(t,e,n),wt=r,_n=i,wt!==null&&(_n?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(_n?(t=wt,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),ua(t)):wd(wt,n.stateNode));break;case 4:r=wt,i=_n,wt=n.stateNode.containerInfo,_n=!0,_r(t,e,n),wt=r,_n=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gh(n,e,o),i=i.next}while(i!==r)}_r(t,e,n);break;case 1:if(!At&&(fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ze(n,e,l)}_r(t,e,n);break;case 21:_r(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,_r(t,e,n),At=r):_r(t,e,n);break;default:_r(t,e,n)}}function gx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xC),e.forEach(function(r){var i=CC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,_n=!1;break e;case 3:wt=l.stateNode.containerInfo,_n=!0;break e;case 4:wt=l.stateNode.containerInfo,_n=!0;break e}l=l.return}if(wt===null)throw Error(X(160));wb(s,o,i),wt=null,_n=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Ze(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bb(e,t),e=e.sibling}function bb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Pn(t),r&4){try{Ho(3,t,t.return),uu(3,t)}catch(C){Ze(t,t.return,C)}try{Ho(5,t,t.return)}catch(C){Ze(t,t.return,C)}}break;case 1:vn(e,t),Pn(t),r&512&&n!==null&&fs(n,n.return);break;case 5:if(vn(e,t),Pn(t),r&512&&n!==null&&fs(n,n.return),t.flags&32){var i=t.stateNode;try{oa(i,"")}catch(C){Ze(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&$1(i,s),wh(l,o);var d=wh(l,s);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?K1(i,p):h==="dangerouslySetInnerHTML"?H1(i,p):h==="children"?oa(i,p):lp(i,h,p,d)}switch(l){case"input":mh(i,s);break;case"textarea":W1(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?ws(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?ws(i,!!s.multiple,s.defaultValue,!0):ws(i,!!s.multiple,s.multiple?[]:"",!1))}i[ma]=s}catch(C){Ze(t,t.return,C)}}break;case 6:if(vn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Ze(t,t.return,C)}}break;case 3:if(vn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ua(e.containerInfo)}catch(C){Ze(t,t.return,C)}break;case 4:vn(e,t),Pn(t);break;case 13:vn(e,t),Pn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bp=tt())),r&4&&gx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(d=At)||h,vn(e,t),At=d):vn(e,t),Pn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(p=ae=h;ae!==null;){switch(m=ae,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ho(4,m,m.return);break;case 1:fs(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(C){Ze(r,n,C)}}break;case 5:fs(m,m.return);break;case 22:if(m.memoizedState!==null){yx(p);continue}}y!==null?(y.return=m,ae=y):yx(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=G1("display",o))}catch(C){Ze(t,t.return,C)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(C){Ze(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vn(e,t),Pn(t),r&4&&gx(t);break;case 21:break;default:vn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vb(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(oa(i,""),r.flags&=-33);var s=mx(t);Yh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=mx(t);Qh(t,l,o);break;default:throw Error(X(161))}}catch(c){Ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vC(t,e,n){ae=t,kb(t)}function kb(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_l;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||At;l=_l;var d=At;if(_l=o,(At=c)&&!d)for(ae=i;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?vx(i):c!==null?(c.return=o,ae=c):vx(i);for(;s!==null;)ae=s,kb(s),s=s.sibling;ae=i,_l=l,At=d}xx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):xx(t)}}function xx(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||uu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tx(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ua(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}At||e.flags&512&&Kh(e)}catch(m){Ze(e,e.return,m)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function yx(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function vx(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uu(4,e)}catch(c){Ze(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ze(e,i,c)}}var s=e.return;try{Kh(e)}catch(c){Ze(e,s,c)}break;case 5:var o=e.return;try{Kh(e)}catch(c){Ze(e,o,c)}}}catch(c){Ze(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var wC=Math.ceil,Sc=gr.ReactCurrentDispatcher,Op=gr.ReactCurrentOwner,pn=gr.ReactCurrentBatchConfig,Te=0,vt=null,it=null,Et=0,Zt=0,ps=ri(0),ft=0,ba=null,Ri=0,du=0,Fp=0,Go=null,qt=null,Bp=0,Ms=1/0,Xn=null,jc=!1,Xh=null,Lr=null,Nl=!1,zr=null,Ic=0,Ko=0,Jh=null,Hl=-1,Gl=0;function Ot(){return Te&6?tt():Hl!==-1?Hl:Hl=tt()}function Or(t){return t.mode&1?Te&2&&Et!==0?Et&-Et:rC.transition!==null?(Gl===0&&(Gl=ow()),Gl):(t=Se,t!==0||(t=window.event,t=t===void 0?16:fw(t.type)),t):1}function Cn(t,e,n,r){if(50<Ko)throw Ko=0,Jh=null,Error(X(185));Ma(t,n,r),(!(Te&2)||t!==vt)&&(t===vt&&(!(Te&2)&&(du|=n),ft===4&&jr(t,Et)),Yt(t,r),n===1&&Te===0&&!(e.mode&1)&&(Ms=tt()+500,au&&ii()))}function Yt(t,e){var n=t.callbackNode;rT(t,e);var r=fc(t,t===vt?Et:0);if(r===0)n!==null&&Sg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sg(n),e===1)t.tag===0?nC(wx.bind(null,t)):Aw(wx.bind(null,t)),JT(function(){!(Te&6)&&ii()}),n=null;else{switch(aw(r)){case 1:n=fp;break;case 4:n=iw;break;case 16:n=hc;break;case 536870912:n=sw;break;default:n=hc}n=Ib(n,_b.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _b(t,e){if(Hl=-1,Gl=0,Te&6)throw Error(X(327));var n=t.callbackNode;if(Es()&&t.callbackNode!==n)return null;var r=fc(t,t===vt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zc(t,r);else{e=r;var i=Te;Te|=2;var s=Eb();(vt!==t||Et!==e)&&(Xn=null,Ms=tt()+500,Ti(t,e));do try{_C();break}catch(l){Nb(t,l)}while(!0);Tp(),Sc.current=s,Te=i,it!==null?e=0:(vt=null,Et=0,e=ft)}if(e!==0){if(e===2&&(i=Eh(t),i!==0&&(r=i,e=Zh(t,i))),e===1)throw n=ba,Ti(t,0),jr(t,r),Yt(t,tt()),n;if(e===6)jr(t,r);else{if(i=t.current.alternate,!(r&30)&&!bC(i)&&(e=zc(t,r),e===2&&(s=Eh(t),s!==0&&(r=s,e=Zh(t,s))),e===1))throw n=ba,Ti(t,0),jr(t,r),Yt(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:mi(t,qt,Xn);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=Bp+500-tt(),10<e)){if(fc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ph(mi.bind(null,t,qt,Xn),e);break}mi(t,qt,Xn);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Tn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wC(r/1960))-r,10<r){t.timeoutHandle=Ph(mi.bind(null,t,qt,Xn),r);break}mi(t,qt,Xn);break;case 5:mi(t,qt,Xn);break;default:throw Error(X(329))}}}return Yt(t,tt()),t.callbackNode===n?_b.bind(null,t):null}function Zh(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(Ti(t,e).flags|=256),t=zc(t,e),t!==2&&(e=qt,qt=n,e!==null&&ef(e)),t}function ef(t){qt===null?qt=t:qt.push.apply(qt,t)}function bC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~Fp,e&=~du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tn(e),r=1<<n;t[n]=-1,e&=~r}}function wx(t){if(Te&6)throw Error(X(327));Es();var e=fc(t,0);if(!(e&1))return Yt(t,tt()),null;var n=zc(t,e);if(t.tag!==0&&n===2){var r=Eh(t);r!==0&&(e=r,n=Zh(t,r))}if(n===1)throw n=ba,Ti(t,0),jr(t,e),Yt(t,tt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,qt,Xn),Yt(t,tt()),null}function Up(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(Ms=tt()+500,au&&ii())}}function Di(t){zr!==null&&zr.tag===0&&!(Te&6)&&Es();var e=Te;Te|=1;var n=pn.transition,r=Se;try{if(pn.transition=null,Se=1,t)return t()}finally{Se=r,pn.transition=n,Te=e,!(Te&6)&&ii()}}function $p(){Zt=ps.current,Fe(ps)}function Ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XT(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(_p(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yc();break;case 3:Ds(),Fe(Kt),Fe(Rt),Ap();break;case 5:zp(r);break;case 4:Ds();break;case 13:Fe(He);break;case 19:Fe(He);break;case 10:Cp(r.type._context);break;case 22:case 23:$p()}n=n.return}if(vt=t,it=t=Fr(t.current,null),Et=Zt=e,ft=0,ba=null,Fp=du=Ri=0,qt=Go=null,wi!==null){for(e=0;e<wi.length;e++)if(n=wi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wi=null}return t}function Nb(t,e){do{var n=it;try{if(Tp(),$l.current=Cc,Tc){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Tc=!1}if(Pi=0,yt=ht=Ge=null,qo=!1,ya=0,Op.current=null,n===null||n.return===null){ft=1,ba=e,it=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=Et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=ax(o);if(y!==null){y.flags&=-257,lx(y,o,l,s,e),y.mode&1&&ox(s,d,e),e=y,c=d;var N=e.updateQueue;if(N===null){var C=new Set;C.add(c),e.updateQueue=C}else N.add(c);break e}else{if(!(e&1)){ox(s,d,e),Wp();break e}c=Error(X(426))}}else if(We&&l.mode&1){var z=ax(o);if(z!==null){!(z.flags&65536)&&(z.flags|=256),lx(z,o,l,s,e),Np(Vs(c,l));break e}}s=c=Vs(c,l),ft!==4&&(ft=2),Go===null?Go=[s]:Go.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=ab(s,c,e);ex(s,b);break e;case 1:l=c;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Lr===null||!Lr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=lb(s,l,e);ex(s,R);break e}}s=s.return}while(s!==null)}Cb(n)}catch(V){e=V,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function Eb(){var t=Sc.current;return Sc.current=Cc,t===null?Cc:t}function Wp(){(ft===0||ft===3||ft===2)&&(ft=4),vt===null||!(Ri&268435455)&&!(du&268435455)||jr(vt,Et)}function zc(t,e){var n=Te;Te|=2;var r=Eb();(vt!==t||Et!==e)&&(Xn=null,Ti(t,e));do try{kC();break}catch(i){Nb(t,i)}while(!0);if(Tp(),Te=n,Sc.current=r,it!==null)throw Error(X(261));return vt=null,Et=0,ft}function kC(){for(;it!==null;)Tb(it)}function _C(){for(;it!==null&&!KE();)Tb(it)}function Tb(t){var e=jb(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?Cb(t):it=e,Op.current=null}function Cb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gC(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,it=null;return}}else if(n=mC(n,e,Zt),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ft===0&&(ft=5)}function mi(t,e,n){var r=Se,i=pn.transition;try{pn.transition=null,Se=1,NC(t,e,n,r)}finally{pn.transition=i,Se=r}return null}function NC(t,e,n,r){do Es();while(zr!==null);if(Te&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iT(t,s),t===vt&&(it=vt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nl||(Nl=!0,Ib(hc,function(){return Es(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pn.transition,pn.transition=null;var o=Se;Se=1;var l=Te;Te|=4,Op.current=null,yC(t,n),bb(n,t),WT(zh),pc=!!Ih,zh=Ih=null,t.current=n,vC(n),QE(),Te=l,Se=o,pn.transition=s}else t.current=n;if(Nl&&(Nl=!1,zr=t,Ic=i),s=t.pendingLanes,s===0&&(Lr=null),JE(n.stateNode),Yt(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jc)throw jc=!1,t=Xh,Xh=null,t;return Ic&1&&t.tag!==0&&Es(),s=t.pendingLanes,s&1?t===Jh?Ko++:(Ko=0,Jh=t):Ko=0,ii(),null}function Es(){if(zr!==null){var t=aw(Ic),e=pn.transition,n=Se;try{if(pn.transition=null,Se=16>t?16:t,zr===null)var r=!1;else{if(t=zr,zr=null,Ic=0,Te&6)throw Error(X(331));var i=Te;for(Te|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Ho(8,h,s)}var p=h.child;if(p!==null)p.return=h,ae=p;else for(;ae!==null;){h=ae;var m=h.sibling,y=h.return;if(yb(h),h===d){ae=null;break}if(m!==null){m.return=y,ae=m;break}ae=y}}}var N=s.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var z=C.sibling;C.sibling=null,C=z}while(C!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ho(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ae=b;break e}ae=s.return}}var x=t.current;for(ae=x;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=x;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uu(9,l)}}catch(V){Ze(l,l.return,V)}if(l===o){ae=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ae=R;break e}ae=l.return}}if(Te=i,ii(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(nu,t)}catch{}r=!0}return r}finally{Se=n,pn.transition=e}}return!1}function bx(t,e,n){e=Vs(n,e),e=ab(t,e,1),t=Mr(t,e,1),e=Ot(),t!==null&&(Ma(t,1,e),Yt(t,e))}function Ze(t,e,n){if(t.tag===3)bx(t,t,n);else for(;e!==null;){if(e.tag===3){bx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=Vs(n,t),t=lb(e,t,1),e=Mr(e,t,1),t=Ot(),e!==null&&(Ma(e,1,t),Yt(e,t));break}}e=e.return}}function EC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Et&n)===n&&(ft===4||ft===3&&(Et&130023424)===Et&&500>tt()-Bp?Ti(t,0):Fp|=n),Yt(t,e)}function Sb(t,e){e===0&&(t.mode&1?(e=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):e=1);var n=Ot();t=or(t,e),t!==null&&(Ma(t,e,n),Yt(t,n))}function TC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sb(t,n)}function CC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),Sb(t,n)}var jb;jb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,pC(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,We&&e.flags&1048576&&Pw(e,bc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ql(t,e),t=e.pendingProps;var i=As(e,Rt.current);Ns(e,n),i=Rp(null,e,r,t,i,n);var s=Dp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(s=!0,vc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jp(e),i.updater=cu,e.stateNode=i,i._reactInternals=e,Fh(e,r,t,n),e=$h(null,e,r,!0,s,n)):(e.tag=0,We&&s&&kp(e),Vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ql(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jC(r),t=kn(r,t),i){case 0:e=Uh(null,e,r,t,n);break e;case 1:e=dx(null,e,r,t,n);break e;case 11:e=cx(null,e,r,t,n);break e;case 14:e=ux(null,e,r,kn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),Uh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),dx(t,e,r,i,n);case 3:e:{if(hb(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ow(t,e),Nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Vs(Error(X(423)),e),e=hx(t,e,r,n,i);break e}else if(r!==i){i=Vs(Error(X(424)),e),e=hx(t,e,r,n,i);break e}else for(en=Vr(e.stateNode.containerInfo.firstChild),tn=e,We=!0,Nn=null,n=Mw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ps(),r===i){e=ar(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return Fw(e),t===null&&Mh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ah(r,i)?o=null:s!==null&&Ah(r,s)&&(e.flags|=32),db(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&Mh(e),null;case 13:return fb(t,e,n);case 4:return Ip(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rs(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),cx(t,e,r,i,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(kc,r._currentValue),r._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===i.children&&!Kt.current){e=ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=nr(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Lh(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Lh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ns(e,n),i=xn(i),r=r(i),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,i=kn(r,e.pendingProps),i=kn(r.type,i),ux(t,e,r,i,n);case 15:return cb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),ql(t,e),e.tag=1,Qt(r)?(t=!0,vc(e)):t=!1,Ns(e,n),ob(e,r,i),Fh(e,r,i,n),$h(null,e,r,!0,t,n);case 19:return pb(t,e,n);case 22:return ub(t,e,n)}throw Error(X(156,e.tag))};function Ib(t,e){return rw(t,e)}function SC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new SC(t,e,n,r)}function qp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jC(t){if(typeof t=="function")return qp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===up)return 11;if(t===dp)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")qp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case is:return Ci(n.children,i,s,e);case cp:o=8,i|=8;break;case uh:return t=hn(12,n,e,i|2),t.elementType=uh,t.lanes=s,t;case dh:return t=hn(13,n,e,i),t.elementType=dh,t.lanes=s,t;case hh:return t=hn(19,n,e,i),t.elementType=hh,t.lanes=s,t;case F1:return hu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L1:o=10;break e;case O1:o=9;break e;case up:o=11;break e;case dp:o=14;break e;case Tr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=hn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ci(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function hu(t,e,n,r){return t=hn(22,t,r,e),t.elementType=F1,t.lanes=n,t.stateNode={isHidden:!1},t}function Sd(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function jd(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hp(t,e,n,r,i,s,o,l,c){return t=new IC(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jp(s),t}function zC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zb(t){if(!t)return Hr;t=t._reactInternals;e:{if(Ui(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Qt(n))return zw(t,n,e)}return e}function Ab(t,e,n,r,i,s,o,l,c){return t=Hp(n,r,!0,t,i,s,o,l,c),t.context=zb(null),n=t.current,r=Ot(),i=Or(n),s=nr(r,i),s.callback=e??null,Mr(n,s,i),t.current.lanes=i,Ma(t,i,r),Yt(t,r),t}function fu(t,e,n,r){var i=e.current,s=Ot(),o=Or(i);return n=zb(n),e.context===null?e.context=n:e.pendingContext=n,e=nr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mr(i,e,o),t!==null&&(Cn(t,i,o,s),Ul(t,i,o)),o}function Ac(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gp(t,e){kx(t,e),(t=t.alternate)&&kx(t,e)}function AC(){return null}var Pb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kp(t){this._internalRoot=t}pu.prototype.render=Kp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));fu(t,e,null,null)};pu.prototype.unmount=Kp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Di(function(){fu(null,t,null,null)}),e[sr]=null}};function pu(t){this._internalRoot=t}pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=uw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&hw(t)}};function Qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _x(){}function PC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Ac(o);s.call(d)}}var o=Ab(e,r,t,0,null,!1,!1,"",_x);return t._reactRootContainer=o,t[sr]=o.current,fa(t.nodeType===8?t.parentNode:t),Di(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Ac(c);l.call(d)}}var c=Hp(t,0,!1,null,null,!1,!1,"",_x);return t._reactRootContainer=c,t[sr]=c.current,fa(t.nodeType===8?t.parentNode:t),Di(function(){fu(e,c,n,r)}),c}function gu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Ac(o);l.call(c)}}fu(e,o,t,i)}else o=PC(n,e,t,i,r);return Ac(o)}lw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Po(e.pendingLanes);n!==0&&(pp(e,n|1),Yt(e,tt()),!(Te&6)&&(Ms=tt()+500,ii()))}break;case 13:Di(function(){var r=or(t,1);if(r!==null){var i=Ot();Cn(r,t,1,i)}}),Gp(t,1)}};mp=function(t){if(t.tag===13){var e=or(t,134217728);if(e!==null){var n=Ot();Cn(e,t,134217728,n)}Gp(t,134217728)}};cw=function(t){if(t.tag===13){var e=Or(t),n=or(t,e);if(n!==null){var r=Ot();Cn(n,t,e,r)}Gp(t,e)}};uw=function(){return Se};dw=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};kh=function(t,e,n){switch(e){case"input":if(mh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ou(r);if(!i)throw Error(X(90));U1(r),mh(r,i)}}}break;case"textarea":W1(t,n);break;case"select":e=n.value,e!=null&&ws(t,!!n.multiple,e,!1)}};X1=Up;J1=Di;var RC={usingClientEntryPoint:!1,Events:[Oa,ls,ou,Q1,Y1,Up]},Co={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DC={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tw(t),t===null?null:t.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||AC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{nu=El.inject(DC),Mn=El}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RC;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qp(e))throw Error(X(200));return zC(t,e,null,n)};sn.createRoot=function(t,e){if(!Qp(t))throw Error(X(299));var n=!1,r="",i=Pb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hp(t,1,!1,null,null,n,!1,r,i),t[sr]=e.current,fa(t.nodeType===8?t.parentNode:t),new Kp(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=tw(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return Di(t)};sn.hydrate=function(t,e,n){if(!mu(e))throw Error(X(200));return gu(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!Qp(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Pb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ab(e,null,t,1,n??null,i,!1,s,o),t[sr]=e.current,fa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pu(e)};sn.render=function(t,e,n){if(!mu(e))throw Error(X(200));return gu(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!mu(t))throw Error(X(40));return t._reactRootContainer?(Di(function(){gu(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};sn.unstable_batchedUpdates=Up;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mu(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return gu(t,e,n,!1,r)};sn.version="18.3.1-next-f1338f8080-20240426";function Rb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rb)}catch(t){console.error(t)}}Rb(),R1.exports=sn;var jn=R1.exports,Nx=jn;lh.createRoot=Nx.createRoot,lh.hydrateRoot=Nx.hydrateRoot;const Yp=j.createContext({});function si(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const Xp=typeof window<"u",Jp=Xp?j.useLayoutEffect:j.useEffect,xu=j.createContext(null);function Zp(t,e){t.indexOf(e)===-1&&t.push(e)}function em(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function VC([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}const lr=(t,e,n)=>n>e?e:n<t?t:n;let tm=()=>{};const cr={},Db=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Vb(t){return typeof t=="object"&&t!==null}const Mb=t=>/^0[^.\s]+$/u.test(t);function nm(t){let e;return()=>(e===void 0&&(e=t()),e)}const mn=t=>t,MC=(t,e)=>n=>e(t(n)),Ba=(...t)=>t.reduce(MC),ka=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class rm{constructor(){this.subscriptions=[]}add(e){return Zp(this.subscriptions,e),()=>em(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const On=t=>t*1e3,fn=t=>t/1e3;function Lb(t,e){return e?t*(1e3/e):0}const Ob=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LC=1e-7,OC=12;function FC(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=Ob(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>LC&&++l<OC);return o}function Ua(t,e,n,r){if(t===e&&n===r)return mn;const i=s=>FC(s,0,1,t,n);return s=>s===0||s===1?s:Ob(i(s),e,r)}const Fb=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bb=t=>e=>1-t(1-e),Ub=Ua(.33,1.53,.69,.99),im=Bb(Ub),$b=Fb(im),Wb=t=>(t*=2)<1?.5*im(t):.5*(2-Math.pow(2,-10*(t-1))),sm=t=>1-Math.sin(Math.acos(t)),qb=Bb(sm),Hb=Fb(sm),BC=Ua(.42,0,1,1),UC=Ua(0,0,.58,1),Gb=Ua(.42,0,.58,1),$C=t=>Array.isArray(t)&&typeof t[0]!="number",Kb=t=>Array.isArray(t)&&typeof t[0]=="number",WC={linear:mn,easeIn:BC,easeInOut:Gb,easeOut:UC,circIn:sm,circInOut:Hb,circOut:qb,backIn:im,backInOut:$b,backOut:Ub,anticipate:Wb},qC=t=>typeof t=="string",Ex=t=>{if(Kb(t)){tm(t.length===4);const[e,n,r,i]=t;return Ua(e,n,r,i)}else if(qC(t))return WC[t];return t},Tl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function HC(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,p=!1,m=!1)=>{const N=m&&i?n:r;return p&&o.add(h),N.has(h)||N.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const GC=40;function Qb(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Tl.reduce((w,R)=>(w[R]=HC(s),w),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:y,postRender:N}=o,C=()=>{const w=cr.useManualTiming?i.timestamp:performance.now();n=!1,cr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,GC),1)),i.timestamp=w,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),p.process(i),m.process(i),y.process(i),N.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(C))},z=()=>{n=!0,r=!0,i.isProcessing||t(C)};return{schedule:Tl.reduce((w,R)=>{const V=o[R];return w[R]=(M,k=!1,v=!1)=>(n||z(),V.schedule(M,k,v)),w},{}),cancel:w=>{for(let R=0;R<Tl.length;R++)o[Tl[R]].cancel(w)},state:i,steps:o}}const{schedule:Be,cancel:ur,state:bt,steps:Id}=Qb(typeof requestAnimationFrame<"u"?requestAnimationFrame:mn,!0);let Ql;function KC(){Ql=void 0}const Gt={now:()=>(Ql===void 0&&Gt.set(bt.isProcessing||cr.useManualTiming?bt.timestamp:performance.now()),Ql),set:t=>{Ql=t,queueMicrotask(KC)}},Yb=t=>e=>typeof e=="string"&&e.startsWith(t),Xb=Yb("--"),QC=Yb("var(--"),om=t=>QC(t)?YC.test(t.split("/*")[0].trim()):!1,YC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},_a={...Qs,transform:t=>lr(0,1,t)},Cl={...Qs,default:1},Qo=t=>Math.round(t*1e5)/1e5,am=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XC(t){return t==null}const JC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lm=(t,e)=>n=>!!(typeof n=="string"&&JC.test(n)&&n.startsWith(t)||e&&!XC(n)&&Object.prototype.hasOwnProperty.call(n,e)),Jb=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(am);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},ZC=t=>lr(0,255,t),zd={...Qs,transform:t=>Math.round(ZC(t))},ki={test:lm("rgb","red"),parse:Jb("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+zd.transform(t)+", "+zd.transform(e)+", "+zd.transform(n)+", "+Qo(_a.transform(r))+")"};function eS(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const tf={test:lm("#"),parse:eS,transform:ki.transform},$a=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Er=$a("deg"),Fn=$a("%"),pe=$a("px"),tS=$a("vh"),nS=$a("vw"),Tx={...Fn,parse:t=>Fn.parse(t)/100,transform:t=>Fn.transform(t*100)},ms={test:lm("hsl","hue"),parse:Jb("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Fn.transform(Qo(e))+", "+Fn.transform(Qo(n))+", "+Qo(_a.transform(r))+")"},rt={test:t=>ki.test(t)||tf.test(t)||ms.test(t),parse:t=>ki.test(t)?ki.parse(t):ms.test(t)?ms.parse(t):tf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ki.transform(t):ms.transform(t),getAnimatableNone:t=>{const e=rt.parse(t);return e.alpha=0,rt.transform(e)}},rS=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iS(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(am))==null?void 0:e.length)||0)+(((n=t.match(rS))==null?void 0:n.length)||0)>0}const Zb="number",ek="color",sS="var",oS="var(",Cx="${}",aS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Na(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(aS,c=>(rt.test(c)?(r.color.push(s),i.push(ek),n.push(rt.parse(c))):c.startsWith(oS)?(r.var.push(s),i.push(sS),n.push(c)):(r.number.push(s),i.push(Zb),n.push(parseFloat(c))),++s,Cx)).split(Cx);return{values:n,split:l,indexes:r,types:i}}function tk(t){return Na(t).values}function nk(t){const{split:e,types:n}=Na(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===Zb?s+=Qo(i[o]):l===ek?s+=rt.transform(i[o]):s+=i[o]}return s}}const lS=t=>typeof t=="number"?0:rt.test(t)?rt.getAnimatableNone(t):t;function cS(t){const e=tk(t);return nk(t)(e.map(lS))}const Gr={test:iS,parse:tk,createTransformer:nk,getAnimatableNone:cS};function Ad(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function uS({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=Ad(c,l,t+1/3),s=Ad(c,l,t),o=Ad(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Pc(t,e){return n=>n>0?e:t}const qe=(t,e,n)=>t+(e-t)*n,Pd=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},dS=[tf,ki,ms],hS=t=>dS.find(e=>e.test(t));function Sx(t){const e=hS(t);if(!e)return!1;let n=e.parse(t);return e===ms&&(n=uS(n)),n}const jx=(t,e)=>{const n=Sx(t),r=Sx(e);if(!n||!r)return Pc(t,e);const i={...n};return s=>(i.red=Pd(n.red,r.red,s),i.green=Pd(n.green,r.green,s),i.blue=Pd(n.blue,r.blue,s),i.alpha=qe(n.alpha,r.alpha,s),ki.transform(i))},nf=new Set(["none","hidden"]);function fS(t,e){return nf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function pS(t,e){return n=>qe(t,e,n)}function cm(t){return typeof t=="number"?pS:typeof t=="string"?om(t)?Pc:rt.test(t)?jx:xS:Array.isArray(t)?rk:typeof t=="object"?rt.test(t)?jx:mS:Pc}function rk(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>cm(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function mS(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=cm(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function gS(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],l=t.values[o]??0;n[i]=l,r[s]++}return n}const xS=(t,e)=>{const n=Gr.createTransformer(e),r=Na(t),i=Na(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?nf.has(t)&&!i.values.length||nf.has(e)&&!r.values.length?fS(t,e):Ba(rk(gS(r,i),i.values),n):Pc(t,e)};function ik(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?qe(t,e,n):cm(t)(t,e)}const yS=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Be.update(e,n),stop:()=>ur(e),now:()=>bt.isProcessing?bt.timestamp:Gt.now()}},sk=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Rc=2e4;function um(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Rc;)e+=n,r=t.next(e);return e>=Rc?1/0:e}function vS(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(um(r),Rc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:fn(i)}}const wS=5;function ok(t,e,n){const r=Math.max(e-wS,0);return Lb(n-t(r),e-r)}const Je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Rd=.001;function bS({duration:t=Je.duration,bounce:e=Je.bounce,velocity:n=Je.velocity,mass:r=Je.mass}){let i,s,o=1-e;o=lr(Je.minDamping,Je.maxDamping,o),t=lr(Je.minDuration,Je.maxDuration,fn(t)),o<1?(i=d=>{const h=d*o,p=h*t,m=h-n,y=rf(d,o),N=Math.exp(-p);return Rd-m/y*N},s=d=>{const p=d*o*t,m=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*t,N=Math.exp(-p),C=rf(Math.pow(d,2),o);return(-i(d)+Rd>0?-1:1)*((m-y)*N)/C}):(i=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-Rd+h*p},s=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const l=5/t,c=_S(i,s,l);if(t=On(t),isNaN(c))return{stiffness:Je.stiffness,damping:Je.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const kS=12;function _S(t,e,n){let r=n;for(let i=1;i<kS;i++)r=r-t(r)/e(r);return r}function rf(t,e){return t*Math.sqrt(1-e*e)}const NS=["duration","bounce"],ES=["stiffness","damping","mass"];function Ix(t,e){return e.some(n=>t[n]!==void 0)}function TS(t){let e={velocity:Je.velocity,stiffness:Je.stiffness,damping:Je.damping,mass:Je.mass,isResolvedFromDuration:!1,...t};if(!Ix(t,ES)&&Ix(t,NS))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*lr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Je.mass,stiffness:i,damping:s}}else{const n=bS(t);e={...e,...n,mass:Je.mass},e.isResolvedFromDuration=!0}return e}function Dc(t=Je.visualDuration,e=Je.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=TS({...n,velocity:-fn(n.velocity||0)}),N=m||0,C=d/(2*Math.sqrt(c*h)),z=o-s,b=fn(Math.sqrt(c/h)),x=Math.abs(z)<5;r||(r=x?Je.restSpeed.granular:Je.restSpeed.default),i||(i=x?Je.restDelta.granular:Je.restDelta.default);let w;if(C<1){const V=rf(b,C);w=M=>{const k=Math.exp(-C*b*M);return o-k*((N+C*b*z)/V*Math.sin(V*M)+z*Math.cos(V*M))}}else if(C===1)w=V=>o-Math.exp(-b*V)*(z+(N+b*z)*V);else{const V=b*Math.sqrt(C*C-1);w=M=>{const k=Math.exp(-C*b*M),v=Math.min(V*M,300);return o-k*((N+C*b*z)*Math.sinh(v)+V*z*Math.cosh(v))/V}}const R={calculatedDuration:y&&p||null,next:V=>{const M=w(V);if(y)l.done=V>=p;else{let k=V===0?N:0;C<1&&(k=V===0?On(N):ok(w,V,M));const v=Math.abs(k)<=r,_=Math.abs(o-M)<=i;l.done=v&&_}return l.value=l.done?o:M,l},toString:()=>{const V=Math.min(um(R),Rc),M=sk(k=>R.next(V*k).value,V,30);return V+"ms "+M},toTransition:()=>{}};return R}Dc.applyToOptions=t=>{const e=vS(t,100,Dc);return t.ease=e.ease,t.duration=On(e.duration),t.type="keyframes",t};function sf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},y=v=>l!==void 0&&v<l||c!==void 0&&v>c,N=v=>l===void 0?c:c===void 0||Math.abs(l-v)<Math.abs(c-v)?l:c;let C=n*e;const z=p+C,b=o===void 0?z:o(z);b!==z&&(C=b-p);const x=v=>-C*Math.exp(-v/r),w=v=>b+x(v),R=v=>{const _=x(v),T=w(v);m.done=Math.abs(_)<=d,m.value=m.done?b:T};let V,M;const k=v=>{y(m.value)&&(V=v,M=Dc({keyframes:[m.value,N(m.value)],velocity:ok(w,v,m.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return k(0),{calculatedDuration:null,next:v=>{let _=!1;return!M&&V===void 0&&(_=!0,R(v),k(v)),V!==void 0&&v>=V?M.next(v-V):(!_&&R(v),m)}}}function CS(t,e,n){const r=[],i=n||cr.mix||ik,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||mn:e;l=Ba(c,l)}r.push(l)}return r}function ak(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(tm(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=CS(e,r,i),c=l.length,d=h=>{if(o&&h<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=ka(t[p],t[p+1],h);return l[p](m)};return n?h=>d(lr(t[0],t[s-1],h)):d}function SS(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ka(0,e,r);t.push(qe(n,1,i))}}function jS(t){const e=[0];return SS(e,t.length-1),e}function IS(t,e){return t.map(n=>n*e)}function zS(t,e){return t.map(()=>e||Gb).splice(0,t.length-1)}function Yo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=$C(r)?r.map(Ex):Ex(r),s={done:!1,value:e[0]},o=IS(n&&n.length===e.length?n:jS(e),t),l=ak(o,e,{ease:Array.isArray(i)?i:zS(e,i)});return{calculatedDuration:t,next:c=>(s.value=l(c),s.done=c>=t,s)}}const AS=t=>t!==null;function dm(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(AS),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const PS={decay:sf,inertia:sf,tween:Yo,keyframes:Yo,spring:Dc};function lk(t){typeof t.type=="string"&&(t.type=PS[t.type])}class hm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const RS=t=>t/100;class fm extends hm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Gt.now()&&this.tick(Gt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;lk(e);const{type:n=Yo,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const c=n||Yo;c!==Yo&&typeof l[0]!="number"&&(this.mixKeyframes=Ba(RS,ik(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=um(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:y,type:N,onUpdate:C,finalKeyframe:z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,R=r;if(p){const v=Math.min(this.currentTime,i)/l;let _=Math.floor(v),T=v%1;!T&&v>=1&&(T=1),T===1&&_--,_=Math.min(_,p+1),!!(_%2)&&(m==="reverse"?(T=1-T,y&&(T-=y/l)):m==="mirror"&&(R=o)),w=lr(0,1,T)*l}const V=x?{done:!1,value:h[0]}:R.next(w);s&&(V.value=s(V.value));let{done:M}=V;!x&&c!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return k&&N!==sf&&(V.value=dm(h,this.options,z,this.speed)),C&&C(V.value),k&&this.finish(),V}then(e,n){return this.finished.then(e,n)}get duration(){return fn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fn(e)}get time(){return fn(this.currentTime)}set time(e){var n;e=On(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Gt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=fn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=yS,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function DS(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const _i=t=>t*180/Math.PI,of=t=>{const e=_i(Math.atan2(t[1],t[0]));return af(e)},VS={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:of,rotateZ:of,skewX:t=>_i(Math.atan(t[1])),skewY:t=>_i(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},af=t=>(t=t%360,t<0&&(t+=360),t),zx=of,Ax=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Px=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),MS={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ax,scaleY:Px,scale:t=>(Ax(t)+Px(t))/2,rotateX:t=>af(_i(Math.atan2(t[6],t[5]))),rotateY:t=>af(_i(Math.atan2(-t[2],t[0]))),rotateZ:zx,rotate:zx,skewX:t=>_i(Math.atan(t[4])),skewY:t=>_i(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function lf(t){return t.includes("scale")?1:0}function cf(t,e){if(!t||t==="none")return lf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=MS,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=VS,i=l}if(!i)return lf(e);const s=r[e],o=i[1].split(",").map(OS);return typeof s=="function"?s(o):o[s]}const LS=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return cf(n,e)};function OS(t){return parseFloat(t.trim())}const Ys=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xs=new Set(Ys),Rx=t=>t===Qs||t===pe,FS=new Set(["x","y","z"]),BS=Ys.filter(t=>!FS.has(t));function US(t){const e=[];return BS.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Si={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>cf(e,"x"),y:(t,{transform:e})=>cf(e,"y")};Si.translateX=Si.x;Si.translateY=Si.y;const ji=new Set;let uf=!1,df=!1,hf=!1;function ck(){if(df){const t=Array.from(ji).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=US(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}df=!1,uf=!1,ji.forEach(t=>t.complete(hf)),ji.clear()}function uk(){ji.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(df=!0)})}function $S(){hf=!0,uk(),ck(),hf=!1}class pm{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ji.add(this),uf||(uf=!0,Be.read(uk),Be.resolveKeyframes(ck))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}DS(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ji.delete(this)}cancel(){this.state==="scheduled"&&(ji.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const WS=t=>t.startsWith("--");function qS(t,e,n){WS(e)?t.style.setProperty(e,n):t.style[e]=n}const HS=nm(()=>window.ScrollTimeline!==void 0),GS={};function KS(t,e){const n=nm(t);return()=>GS[e]??n()}const dk=KS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Do=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Dx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Do([0,.65,.55,1]),circOut:Do([.55,0,1,.45]),backIn:Do([.31,.01,.66,-.59]),backOut:Do([.33,1.53,.69,.99])};function hk(t,e){if(t)return typeof t=="function"?dk()?sk(t,e):"ease-out":Kb(t)?Do(t):Array.isArray(t)?t.map(n=>hk(n,e)||Dx.easeOut):Dx[t]}function QS(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const p=hk(l,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function fk(t){return typeof t=="function"&&"applyToOptions"in t}function YS({type:t,...e}){return fk(t)&&dk()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class XS extends hm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,tm(typeof e.type!="string");const d=YS(e);this.animation=QS(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=dm(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):qS(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return fn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fn(e)}get time(){return fn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=On(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&HS()?(this.animation.timeline=e,mn):n(this)}}const pk={anticipate:Wb,backInOut:$b,circInOut:Hb};function JS(t){return t in pk}function ZS(t){typeof t.ease=="string"&&JS(t.ease)&&(t.ease=pk[t.ease])}const Vx=10;class ej extends XS{constructor(e){ZS(e),lk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new fm({...o,autoplay:!1}),c=On(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Vx).value,l.sample(c).value,Vx),l.stop()}}const Mx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Gr.test(t)||t==="0")&&!t.startsWith("url("));function tj(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function nj(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Mx(i,e),l=Mx(s,e);return!o||!l?!1:tj(t)||(n==="spring"||fk(n))&&r}function ff(t){t.duration=0,t.type="keyframes"}const rj=new Set(["opacity","clipPath","filter","transform"]),ij=nm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sj(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return ij()&&n&&rj.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const oj=40;class aj extends hm{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:h,...p}){var N;super(),this.stop=()=>{var C,z;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(z=this.keyframeResolver)==null||z.cancel()},this.createdAt=Gt.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:d,element:h,...p},y=(h==null?void 0:h.KeyframeResolver)||pm;this.keyframeResolver=new y(l,(C,z,b)=>this.onKeyframesResolved(C,z,m,!b),c,d,h),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Gt.now(),nj(e,s,o,l)||((cr.instantAnimations||!c)&&(h==null||h(dm(e,r,n))),e[0]=e[e.length-1],ff(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>oj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!d&&sj(m)?new ej({...m,element:m.motionValue.owner.current}):new fm(m);y.finished.then(()=>this.notifyFinished()).catch(mn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),$S()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const lj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cj(t){const e=lj.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function mk(t,e,n=1){const[r,i]=cj(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Db(o)?parseFloat(o):o}return om(i)?mk(i,e,n+1):i}function mm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const gk=new Set(["width","height","top","left","right","bottom",...Ys]),uj={test:t=>t==="auto",parse:t=>t},xk=t=>e=>e.test(t),yk=[Qs,pe,Fn,Er,nS,tS,uj],Lx=t=>yk.find(xk(t));function dj(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Mb(t):!0}const hj=new Set(["brightness","contrast","saturate","opacity"]);function fj(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(am)||[];if(!r)return t;const i=n.replace(r,"");let s=hj.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const pj=/\b([a-z-]*)\(.*?\)/gu,pf={...Gr,getAnimatableNone:t=>{const e=t.match(pj);return e?e.map(fj).join(" "):t}},Ox={...Qs,transform:Math.round},mj={rotate:Er,rotateX:Er,rotateY:Er,rotateZ:Er,scale:Cl,scaleX:Cl,scaleY:Cl,scaleZ:Cl,skew:Er,skewX:Er,skewY:Er,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:_a,originX:Tx,originY:Tx,originZ:pe},gm={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe,...mj,zIndex:Ox,fillOpacity:_a,strokeOpacity:_a,numOctaves:Ox},gj={...gm,color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,filter:pf,WebkitFilter:pf},vk=t=>gj[t];function wk(t,e){let n=vk(t);return n!==pf&&(n=Gr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const xj=new Set(["auto","none","0"]);function yj(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!xj.has(s)&&Na(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=wk(n,i)}class vj extends pm{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),om(d))){const h=mk(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!gk.has(r)||e.length!==2)return;const[i,s]=e,o=Lx(i),l=Lx(s);if(o!==l)if(Rx(o)&&Rx(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else Si[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||dj(e[i]))&&r.push(i);r.length&&yj(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Si[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Si[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function wj(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const bk=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function kk(t){return Vb(t)&&"offsetHeight"in t}const Fx=30,bj=t=>!isNaN(parseFloat(t)),Xo={current:void 0};class kj{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Gt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=bj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new rm);const r=this.events[e].add(n);return e==="change"?()=>{r(),Be.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Xo.current&&Xo.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Gt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Fx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Fx);return Lb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vi(t,e){return new kj(t,e)}const{schedule:xm}=Qb(queueMicrotask,!1),bn={x:!1,y:!1};function _k(){return bn.x||bn.y}function _j(t){return t==="x"||t==="y"?bn[t]?null:(bn[t]=!0,()=>{bn[t]=!1}):bn.x||bn.y?null:(bn.x=bn.y=!0,()=>{bn.x=bn.y=!1})}function Nk(t,e){const n=wj(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Bx(t){return!(t.pointerType==="touch"||_k())}function Nj(t,e,n={}){const[r,i,s]=Nk(t,n),o=l=>{if(!Bx(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=p=>{Bx(p)&&(d(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const Ek=(t,e)=>e?t===e?!0:Ek(t,e.parentElement):!1,ym=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Ej=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Tj(t){return Ej.has(t.tagName)||t.tabIndex!==-1}const Yl=new WeakSet;function Ux(t){return e=>{e.key==="Enter"&&t(e)}}function Dd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Cj=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Ux(()=>{if(Yl.has(n))return;Dd(n,"down");const i=Ux(()=>{Dd(n,"up")}),s=()=>Dd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function $x(t){return ym(t)&&!_k()}function Sj(t,e,n={}){const[r,i,s]=Nk(t,n),o=l=>{const c=l.currentTarget;if(!$x(l))return;Yl.add(c);const d=e(c,l),h=(y,N)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Yl.has(c)&&Yl.delete(c),$x(y)&&typeof d=="function"&&d(y,{success:N})},p=y=>{h(y,c===window||c===document||n.useGlobalTarget||Ek(c,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),kk(l)&&(l.addEventListener("focus",d=>Cj(d,i)),!Tj(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function Tk(t){return Vb(t)&&"ownerSVGElement"in t}function jj(t){return Tk(t)&&t.tagName==="svg"}function Ij(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],o=t[3+n],l=ak(i,s,o);return e?l(r):l}const Nt=t=>!!(t&&t.getVelocity),zj=[...yk,rt,Gr],Aj=t=>zj.find(xk(t)),yu=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Wx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Pj(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Wx(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Wx(t[i],null)}}}}function Rj(...t){return j.useCallback(Pj(...t),t)}class Dj extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=kk(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Vj({children:t,isPresent:e,anchorX:n,root:r}){const i=j.useId(),s=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=j.useContext(yu),c=Rj(s,t==null?void 0:t.ref);return j.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:y}=o.current;if(e||!s.current||!d||!h)return;const N=n==="left"?`left: ${m}`:`right: ${y}`;s.current.dataset.motionPopId=i;const C=document.createElement("style");l&&(C.nonce=l);const z=r??document.head;return z.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${N}px !important;
            top: ${p}px !important;
          }
        `),()=>{z.contains(C)&&z.removeChild(C)}},[e]),a.jsx(Dj,{isPresent:e,childRef:s,sizeRef:o,children:j.cloneElement(t,{ref:c})})}const Mj=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:c})=>{const d=si(Lj),h=j.useId();let p=!0,m=j.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const N of d.values())if(!N)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return s&&p&&(m={...m}),j.useMemo(()=>{d.forEach((y,N)=>d.set(N,!1))},[n]),j.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=a.jsx(Vj,{isPresent:n,anchorX:l,root:c,children:t})),a.jsx(xu.Provider,{value:m,children:t})};function Lj(){return new Map}function Ck(t=!0){const e=j.useContext(xu);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=j.useId();j.useEffect(()=>{if(t)return i(s)},[t]);const o=j.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Sl=t=>t.key||"";function qx(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const Ie=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,h]=Ck(o),p=j.useMemo(()=>qx(t),[t]),m=o&&!d?[]:p.map(Sl),y=j.useRef(!0),N=j.useRef(p),C=si(()=>new Map),[z,b]=j.useState(p),[x,w]=j.useState(p);Jp(()=>{y.current=!1,N.current=p;for(let M=0;M<x.length;M++){const k=Sl(x[M]);m.includes(k)?C.delete(k):C.get(k)!==!0&&C.set(k,!1)}},[x,m.length,m.join("-")]);const R=[];if(p!==z){let M=[...p];for(let k=0;k<x.length;k++){const v=x[k],_=Sl(v);m.includes(_)||(M.splice(k,0,v),R.push(v))}return s==="wait"&&R.length&&(M=R),w(qx(M)),b(p),null}const{forceRender:V}=j.useContext(Yp);return a.jsx(a.Fragment,{children:x.map(M=>{const k=Sl(M),v=o&&!d?!1:p===x||m.includes(k),_=()=>{if(C.has(k))C.set(k,!0);else return;let T=!0;C.forEach(A=>{A||(T=!1)}),T&&(V==null||V(),w(N.current),o&&(h==null||h()),r&&r())};return a.jsx(Mj,{isPresent:v,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:v?void 0:_,anchorX:l,children:M},k)})})},Sk=j.createContext({strict:!1}),Hx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ls={};for(const t in Hx)Ls[t]={isEnabled:e=>Hx[t].some(n=>!!e[n])};function Oj(t){for(const e in t)Ls[e]={...Ls[e],...t[e]}}const Fj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Fj.has(t)}let jk=t=>!Vc(t);function Bj(t){typeof t=="function"&&(jk=e=>e.startsWith("on")?!Vc(e):t(e))}try{Bj(require("@emotion/is-prop-valid").default)}catch{}function Uj(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(jk(i)||n===!0&&Vc(i)||!e&&!Vc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const vu=j.createContext({});function wu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ea(t){return typeof t=="string"||Array.isArray(t)}const vm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wm=["initial",...vm];function bu(t){return wu(t.animate)||wm.some(e=>Ea(t[e]))}function Ik(t){return!!(bu(t)||t.variants)}function $j(t,e){if(bu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ea(n)?n:void 0,animate:Ea(r)?r:void 0}}return t.inherit!==!1?e:{}}function Wj(t){const{initial:e,animate:n}=$j(t,j.useContext(vu));return j.useMemo(()=>({initial:e,animate:n}),[Gx(e),Gx(n)])}function Gx(t){return Array.isArray(t)?t.join(" "):t}function Kx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const So={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=Kx(t,e.target.x),r=Kx(t,e.target.y);return`${n}% ${r}%`}},qj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Gr.parse(t);if(i.length>5)return r;const s=Gr.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=qe(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}},mf={borderRadius:{...So,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:So,borderTopRightRadius:So,borderBottomLeftRadius:So,borderBottomRightRadius:So,boxShadow:qj};function zk(t,{layout:e,layoutId:n}){return Xs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!mf[t]||t==="opacity")}const Hj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gj=Ys.length;function Kj(t,e,n){let r="",i=!0;for(let s=0;s<Gj;s++){const o=Ys[s],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=bk(l,gm[o]);if(!c){i=!1;const h=Hj[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function bm(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Xs.has(c)){o=!0;continue}else if(Xb(c)){i[c]=d;continue}else{const h=bk(d,gm[c]);c.startsWith("origin")?(l=!0,s[c]=h):r[c]=h}}if(e.transform||(o||n?r.transform=Kj(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${c} ${d} ${h}`}}const km=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ak(t,e,n){for(const r in e)!Nt(e[r])&&!zk(r,n)&&(t[r]=e[r])}function Qj({transformTemplate:t},e){return j.useMemo(()=>{const n=km();return bm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Yj(t,e){const n=t.style||{},r={};return Ak(r,n,t),Object.assign(r,Qj(t,e)),r}function Xj(t,e){const n={},r=Yj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Jj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Zj={offset:"strokeDashoffset",array:"strokeDasharray"};function e4(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Jj:Zj;t[s.offset]=pe.transform(-r);const o=pe.transform(e),l=pe.transform(n);t[s.array]=`${o} ${l}`}function Pk(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},c,d,h){if(bm(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&e4(p,i,s,o,!1)}const Rk=()=>({...km(),attrs:{}}),Dk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function t4(t,e,n,r){const i=j.useMemo(()=>{const s=Rk();return Pk(s,e,Dk(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Ak(s,t.style,t),i.style={...s,...i.style}}return i}const n4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _m(t){return typeof t!="string"||t.includes("-")?!1:!!(n4.indexOf(t)>-1||/[A-Z]/u.test(t))}function r4(t,e,n,{latestValues:r},i,s=!1){const l=(_m(t)?t4:Xj)(e,r,i,t),c=Uj(e,typeof t=="string",s),d=t!==j.Fragment?{...c,...l,ref:n}:{},{children:h}=e,p=j.useMemo(()=>Nt(h)?h.get():h,[h]);return j.createElement(t,{...d,children:p})}function Qx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Nm(t,e,n,r){if(typeof e=="function"){const[i,s]=Qx(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Qx(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Xl(t){return Nt(t)?t.get():t}function i4({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:s4(n,r,i,t),renderState:e()}}function s4(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Xl(s[m]);let{initial:o,animate:l}=t;const c=bu(t),d=Ik(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!wu(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const N=Nm(t,m[y]);if(N){const{transitionEnd:C,transition:z,...b}=N;for(const x in b){let w=b[x];if(Array.isArray(w)){const R=h?w.length-1:0;w=w[R]}w!==null&&(i[x]=w)}for(const x in C)i[x]=C[x]}}}return i}const Vk=t=>(e,n)=>{const r=j.useContext(vu),i=j.useContext(xu),s=()=>i4(t,e,r,i);return n?s():si(s)};function Em(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Nt(r[o])||e.style&&Nt(e.style[o])||zk(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const o4=Vk({scrapeMotionValuesFromProps:Em,createRenderState:km});function Mk(t,e,n){const r=Em(t,e,n);for(const i in t)if(Nt(t[i])||Nt(e[i])){const s=Ys.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const a4=Vk({scrapeMotionValuesFromProps:Mk,createRenderState:Rk}),l4=Symbol.for("motionComponentSymbol");function gs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function c4(t,e,n){return j.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):gs(n)&&(n.current=r))},[e])}const Tm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),u4="framerAppearId",Lk="data-"+Tm(u4),Ok=j.createContext({});function d4(t,e,n,r,i){var C,z;const{visualElement:s}=j.useContext(vu),o=j.useContext(Sk),l=j.useContext(xu),c=j.useContext(yu).reducedMotion,d=j.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,p=j.useContext(Ok);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&h4(d.current,n,i,p);const m=j.useRef(!1);j.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const y=n[Lk],N=j.useRef(!!y&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,y))&&((z=window.MotionHasOptimisedAnimation)==null?void 0:z.call(window,y)));return Jp(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),N.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!N.current&&h.animationState&&h.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,y)}),N.current=!1),h.enteringChildren=void 0)}),h}function h4(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Fk(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&gs(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function Fk(t){if(t)return t.options.allowProjection!==!1?t.projection:Fk(t.parent)}function Vd(t,{forwardMotionProps:e=!1}={},n,r){n&&Oj(n);const i=_m(t)?a4:o4;function s(l,c){let d;const h={...j.useContext(yu),...l,layoutId:f4(l)},{isStatic:p}=h,m=Wj(l),y=i(l,p);if(!p&&Xp){p4();const N=m4(h);d=N.MeasureLayout,m.visualElement=d4(t,y,h,r,N.ProjectionNode)}return a.jsxs(vu.Provider,{value:m,children:[d&&m.visualElement?a.jsx(d,{visualElement:m.visualElement,...h}):null,r4(t,l,c4(y,m.visualElement,c),y,p,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=j.forwardRef(s);return o[l4]=t,o}function f4({layoutId:t}){const e=j.useContext(Yp).id;return e&&t!==void 0?e+"-"+t:t}function p4(t,e){j.useContext(Sk).strict}function m4(t){const{drag:e,layout:n}=Ls;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function g4(t,e){if(typeof Proxy>"u")return Vd;const n=new Map,r=(s,o)=>Vd(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Vd(o,void 0,t,e)),n.get(o))})}function Bk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function x4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function y4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Md(t){return t===void 0||t===1}function gf({scale:t,scaleX:e,scaleY:n}){return!Md(t)||!Md(e)||!Md(n)}function gi(t){return gf(t)||Uk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Uk(t){return Yx(t.x)||Yx(t.y)}function Yx(t){return t&&t!=="0%"}function Mc(t,e,n){const r=t-n,i=e*r;return n+i}function Xx(t,e,n,r,i){return i!==void 0&&(t=Mc(t,i,r)),Mc(t,n,r)+e}function xf(t,e=0,n=1,r,i){t.min=Xx(t.min,e,n,r,i),t.max=Xx(t.max,e,n,r,i)}function $k(t,{x:e,y:n}){xf(t.x,e.translate,e.scale,e.originPoint),xf(t.y,n.translate,n.scale,n.originPoint)}const Jx=.999999999999,Zx=1.0000000000001;function v4(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ys(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,$k(t,o)),r&&gi(s.latestValues)&&ys(t,s.latestValues))}e.x<Zx&&e.x>Jx&&(e.x=1),e.y<Zx&&e.y>Jx&&(e.y=1)}function xs(t,e){t.min=t.min+e,t.max=t.max+e}function ey(t,e,n,r,i=.5){const s=qe(t.min,t.max,i);xf(t,e,n,s,r)}function ys(t,e){ey(t.x,e.x,e.scaleX,e.scale,e.originX),ey(t.y,e.y,e.scaleY,e.scale,e.originY)}function Wk(t,e){return Bk(y4(t.getBoundingClientRect(),e))}function w4(t,e,n){const r=Wk(t,n),{scroll:i}=e;return i&&(xs(r.x,i.offset.x),xs(r.y,i.offset.y)),r}const ty=()=>({translate:0,scale:1,origin:0,originPoint:0}),vs=()=>({x:ty(),y:ty()}),ny=()=>({min:0,max:0}),dt=()=>({x:ny(),y:ny()}),yf={current:null},qk={current:!1};function b4(){if(qk.current=!0,!!Xp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>yf.current=t.matches;t.addEventListener("change",e),e()}else yf.current=!1}const k4=new WeakMap;function _4(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Nt(i))t.addValue(r,i);else if(Nt(s))t.addValue(r,Vi(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Vi(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const ry=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class N4{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Gt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Be.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=bu(n),this.isVariantNode=Ik(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];c[m]!==void 0&&Nt(y)&&y.set(c[m])}}mount(e){var n;this.current=e,k4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),qk.current||b4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yf.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ur(this.notifyUpdate),ur(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Xs.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Be.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ls){const n=Ls[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ry.length;r++){const i=ry[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=_4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Vi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Db(r)||Mb(r))?r=parseFloat(r):!Aj(r)&&Gr.test(n)&&(r=wk(e,n)),this.setBaseTarget(e,Nt(r)?r.get():r)),Nt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Nm(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Nt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new rm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){xm.render(this.render)}}class Hk extends N4{constructor(){super(...arguments),this.KeyframeResolver=vj}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Gk(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function E4(t){return window.getComputedStyle(t)}class T4 extends Hk{constructor(){super(...arguments),this.type="html",this.renderInstance=Gk}readValueFromInstance(e,n){var r;if(Xs.has(n))return(r=this.projection)!=null&&r.isProjecting?lf(n):LS(e,n);{const i=E4(e),s=(Xb(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Wk(e,n)}build(e,n,r){bm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Em(e,n,r)}}const Kk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function C4(t,e,n,r){Gk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Kk.has(i)?i:Tm(i),e.attrs[i])}class S4 extends Hk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xs.has(n)){const r=vk(n);return r&&r.default||0}return n=Kk.has(n)?n:Tm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Mk(e,n,r)}build(e,n,r){Pk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){C4(e,n,r,i)}mount(e){this.isSVGTag=Dk(e.tagName),super.mount(e)}}const j4=(t,e)=>_m(t)?new S4(e):new T4(e,{allowProjection:t!==j.Fragment});function Ts(t,e,n){const r=t.getProps();return Nm(r,e,n!==void 0?n:r.custom,t)}const vf=t=>Array.isArray(t);function I4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Vi(n))}function z4(t){return vf(t)?t[t.length-1]||0:t}function A4(t,e){const n=Ts(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=z4(s[o]);I4(t,o,l)}}function P4(t){return!!(Nt(t)&&t.add)}function wf(t,e){const n=t.getValue("willChange");if(P4(n))return n.add(e);if(!n&&cr.WillChange){const r=new cr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Qk(t){return t.props[Lk]}const R4=t=>t!==null;function D4(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(R4),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const V4={type:"spring",stiffness:500,damping:25,restSpeed:10},M4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),L4={type:"keyframes",duration:.8},O4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},F4=(t,{keyframes:e})=>e.length>2?L4:Xs.has(t)?t.startsWith("scale")?M4(e[1]):V4:O4;function B4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const Cm=(t,e,n,r={},i,s)=>o=>{const l=mm(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-On(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};B4(l)||Object.assign(h,F4(t,h)),h.duration&&(h.duration=On(h.duration)),h.repeatDelay&&(h.repeatDelay=On(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(ff(h),h.delay===0&&(p=!0)),(cr.instantAnimations||cr.skipAnimations)&&(p=!0,ff(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&e.get()!==void 0){const m=D4(h.keyframes,l);if(m!==void 0){Be.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new fm(h):new aj(h)};function U4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Yk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const p=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||d&&U4(d,h))continue;const y={delay:n,...mm(s||{},h)},N=p.get();if(N!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===N&&!y.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const b=Qk(t);if(b){const x=window.MotionHandoffAnimation(b,h,Be);x!==null&&(y.startTime=x,C=!0)}}wf(t,h),p.start(Cm(h,p,m,t.shouldReduceMotion&&gk.has(h)?{type:!1}:y,t,C));const z=p.animation;z&&c.push(z)}return o&&Promise.all(c).then(()=>{Be.update(()=>{o&&A4(t,o)})}),c}function Xk(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function bf(t,e,n={}){var c;const r=Ts(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Yk(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=i;return $4(t,e,d,h,p,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function $4(t,e,n=0,r=0,i=0,s=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(bf(c,e,{...o,delay:n+(typeof r=="function"?0:r)+Xk(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function W4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>bf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=bf(t,e,n);else{const i=typeof e=="function"?Ts(t,e,n.custom):e;r=Promise.all(Yk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Jk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const q4=wm.length;function Zk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Zk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<q4;n++){const r=wm[n],i=t.props[r];(Ea(i)||i===!1)&&(e[r]=i)}return e}const H4=[...vm].reverse(),G4=vm.length;function K4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>W4(t,n,r)))}function Q4(t){let e=K4(t),n=iy(),r=!0;const i=c=>(d,h)=>{var m;const p=Ts(t,h,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:y,transitionEnd:N,...C}=p;d={...d,...C,...N}}return d};function s(c){e=c(t)}function o(c){const{props:d}=t,h=Zk(t.parent)||{},p=[],m=new Set;let y={},N=1/0;for(let z=0;z<G4;z++){const b=H4[z],x=n[b],w=d[b]!==void 0?d[b]:h[b],R=Ea(w),V=b===c?x.isActive:null;V===!1&&(N=z);let M=w===h[b]&&w!==d[b]&&R;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...y},!x.isActive&&V===null||!w&&!x.prevProp||wu(w)||typeof w=="boolean")continue;const k=Y4(x.prevProp,w);let v=k||b===c&&x.isActive&&!M&&R||z>N&&R,_=!1;const T=Array.isArray(w)?w:[w];let A=T.reduce(i(b),{});V===!1&&(A={});const{prevResolvedValues:D={}}=x,I={...D,...A},xe=le=>{v=!0,m.has(le)&&(_=!0,m.delete(le)),x.needsAnimating[le]=!0;const Y=t.getValue(le);Y&&(Y.liveStyle=!1)};for(const le in I){const Y=A[le],ie=D[le];if(y.hasOwnProperty(le))continue;let te=!1;vf(Y)&&vf(ie)?te=!Jk(Y,ie):te=Y!==ie,te?Y!=null?xe(le):m.add(le):Y!==void 0&&m.has(le)?xe(le):x.protectedKeys[le]=!0}x.prevProp=w,x.prevResolvedValues=A,x.isActive&&(y={...y,...A}),r&&t.blockInitialAnimation&&(v=!1);const ce=M&&k;v&&(!ce||_)&&p.push(...T.map(le=>{const Y={type:b};if(typeof le=="string"&&r&&!ce&&t.manuallyAnimateOnMount&&t.parent){const{parent:ie}=t,te=Ts(ie,le);if(ie.enteringChildren&&te){const{delayChildren:ue}=te.transition||{};Y.delay=Xk(ie.enteringChildren,t,ue)}}return{animation:le,options:Y}}))}if(m.size){const z={};if(typeof d.initial!="boolean"){const b=Ts(t,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(z.transition=b.transition)}m.forEach(b=>{const x=t.getBaseTarget(b),w=t.getValue(b);w&&(w.liveStyle=!0),z[b]=x??null}),p.push({animation:z})}let C=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(p):Promise.resolve()}function l(c,d){var p;if(n[c].isActive===d)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(c,d)}),n[c].isActive=d;const h=o(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=iy()}}}function Y4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Jk(e,t):!1}function fi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iy(){return{animate:fi(!0),whileInView:fi(),whileHover:fi(),whileTap:fi(),whileDrag:fi(),whileFocus:fi(),exit:fi()}}class oi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class X4 extends oi{constructor(e){super(e),e.animationState||(e.animationState=Q4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let J4=0;class Z4 extends oi{constructor(){super(...arguments),this.id=J4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const e5={animation:{Feature:X4},exit:{Feature:Z4}};function Ta(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Wa(t){return{point:{x:t.pageX,y:t.pageY}}}const t5=t=>e=>ym(e)&&t(e,Wa(e));function Jo(t,e,n,r){return Ta(t,e,t5(n),r)}const e2=1e-4,n5=1-e2,r5=1+e2,t2=.01,i5=0-t2,s5=0+t2;function Lt(t){return t.max-t.min}function o5(t,e,n){return Math.abs(t-e)<=n}function sy(t,e,n,r=.5){t.origin=r,t.originPoint=qe(e.min,e.max,t.origin),t.scale=Lt(n)/Lt(e),t.translate=qe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=n5&&t.scale<=r5||isNaN(t.scale))&&(t.scale=1),(t.translate>=i5&&t.translate<=s5||isNaN(t.translate))&&(t.translate=0)}function Zo(t,e,n,r){sy(t.x,e.x,n.x,r?r.originX:void 0),sy(t.y,e.y,n.y,r?r.originY:void 0)}function oy(t,e,n){t.min=n.min+e.min,t.max=t.min+Lt(e)}function a5(t,e,n){oy(t.x,e.x,n.x),oy(t.y,e.y,n.y)}function ay(t,e,n){t.min=e.min-n.min,t.max=t.min+Lt(e)}function Lc(t,e,n){ay(t.x,e.x,n.x),ay(t.y,e.y,n.y)}function an(t){return[t("x"),t("y")]}const n2=({current:t})=>t?t.ownerDocument.defaultView:null,ly=(t,e)=>Math.abs(t-e);function l5(t,e){const n=ly(t.x,e.x),r=ly(t.y,e.y);return Math.sqrt(n**2+r**2)}class r2{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Od(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,N=l5(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!N)return;const{point:C}=m,{timestamp:z}=bt;this.history.push({...C,timestamp:z});const{onStart:b,onMove:x}=this.handlers;y||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Ld(y,this.transformPagePoint),Be.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:N,onSessionEnd:C,resumeAnimation:z}=this.handlers;if(this.dragSnapToOrigin&&z&&z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Od(m.type==="pointercancel"?this.lastMoveEventInfo:Ld(y,this.transformPagePoint),this.history);this.startEvent&&N&&N(m,b),C&&C(m,b)},!ym(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Wa(e),c=Ld(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=bt;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,Od(c,this.history)),this.removeListeners=Ba(Jo(this.contextWindow,"pointermove",this.handlePointerMove),Jo(this.contextWindow,"pointerup",this.handlePointerUp),Jo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ur(this.updatePoint)}}function Ld(t,e){return e?{point:e(t.point)}:t}function cy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Od({point:t},e){return{point:t,delta:cy(t,i2(e)),offset:cy(t,c5(e)),velocity:u5(e,.1)}}function c5(t){return t[0]}function i2(t){return t[t.length-1]}function u5(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=i2(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>On(e)));)n--;if(!r)return{x:0,y:0};const s=fn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function d5(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?qe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?qe(n,t,r.max):Math.min(t,n)),t}function uy(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function h5(t,{top:e,left:n,bottom:r,right:i}){return{x:uy(t.x,n,i),y:uy(t.y,e,r)}}function dy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function f5(t,e){return{x:dy(t.x,e.x),y:dy(t.y,e.y)}}function p5(t,e){let n=.5;const r=Lt(t),i=Lt(e);return i>r?n=ka(e.min,e.max-r,t.min):r>i&&(n=ka(t.min,t.max-i,e.min)),lr(0,1,n)}function m5(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const kf=.35;function g5(t=kf){return t===!1?t=0:t===!0&&(t=kf),{x:hy(t,"left","right"),y:hy(t,"top","bottom")}}function hy(t,e,n){return{min:fy(t,e),max:fy(t,n)}}function fy(t,e){return typeof t=="number"?t:t[e]||0}const x5=new WeakMap;class y5{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wa(p).point)},o=(p,m)=>{const{drag:y,dragPropagation:N,onDragStart:C}=this.getProps();if(y&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_j(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),an(b=>{let x=this.getAxisMotionValue(b).get()||0;if(Fn.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const R=w.layout.layoutBox[b];R&&(x=Lt(R)*(parseFloat(x)/100))}}this.originPoint[b]=x}),C&&Be.postRender(()=>C(p,m)),wf(this.visualElement,"transform");const{animationState:z}=this.visualElement;z&&z.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:N,onDirectionLock:C,onDrag:z}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:b}=m;if(N&&this.currentDirection===null){this.currentDirection=v5(b),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),z&&z(p,m)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>an(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new r2(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:n2(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Be.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!jl(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=d5(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&gs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=h5(r.layoutBox,e):this.constraints=!1,this.elastic=g5(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&an(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=m5(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!gs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=w4(r,i.root,this.visualElement.getTransformPagePoint());let o=f5(i.layout.layoutBox,s);if(n){const l=n(x4(o));this.hasMutatedConstraints=!!l,l&&(o=Bk(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=an(h=>{if(!jl(h,n,this.currentDirection))return;let p=c&&c[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,N={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,N)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return wf(this.visualElement,e),r.start(Cm(e,r,0,n,this.visualElement,!1))}stopAnimation(){an(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){an(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){an(n=>{const{drag:r}=this.getProps();if(!jl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-qe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!gs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};an(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=p5({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),an(o=>{if(!jl(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(qe(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;x5.set(this.visualElement,this);const e=this.visualElement.current,n=Jo(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();gs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Be.read(r);const o=Ta(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(an(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=kf,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function jl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function v5(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class w5 extends oi{constructor(e){super(e),this.removeGroupControls=mn,this.removeListeners=mn,this.controls=new y5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const py=t=>(e,n)=>{t&&Be.postRender(()=>t(e,n))};class b5 extends oi{constructor(){super(...arguments),this.removePointerDownListener=mn}onPointerDown(e){this.session=new r2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:n2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:py(e),onStart:py(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Be.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Jo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Fd=!1;class k5 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Fd&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Jl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Fd=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Be.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Fd=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function s2(t){const[e,n]=Ck(),r=j.useContext(Yp);return a.jsx(k5,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(Ok),isPresent:e,safeToRemove:n})}function _5(t,e,n){const r=Nt(t)?t:Vi(t);return r.start(Cm("",r,e,n)),r.animation}const N5=(t,e)=>t.depth-e.depth;class E5{constructor(){this.children=[],this.isDirty=!1}add(e){Zp(this.children,e),this.isDirty=!0}remove(e){em(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(N5),this.isDirty=!1,this.children.forEach(e)}}function T5(t,e){const n=Gt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ur(r),t(s-e))};return Be.setup(r,!0),()=>ur(r)}const o2=["TopLeft","TopRight","BottomLeft","BottomRight"],C5=o2.length,my=t=>typeof t=="string"?parseFloat(t):t,gy=t=>typeof t=="number"||pe.test(t);function S5(t,e,n,r,i,s){i?(t.opacity=qe(0,n.opacity??1,j5(r)),t.opacityExit=qe(e.opacity??1,0,I5(r))):s&&(t.opacity=qe(e.opacity??1,n.opacity??1,r));for(let o=0;o<C5;o++){const l=`border${o2[o]}Radius`;let c=xy(e,l),d=xy(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||gy(c)===gy(d)?(t[l]=Math.max(qe(my(c),my(d),r),0),(Fn.test(d)||Fn.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=qe(e.rotate||0,n.rotate||0,r))}function xy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const j5=a2(0,.5,qb),I5=a2(.5,.95,mn);function a2(t,e,n){return r=>r<t?0:r>e?1:n(ka(t,e,r))}function yy(t,e){t.min=e.min,t.max=e.max}function wn(t,e){yy(t.x,e.x),yy(t.y,e.y)}function vy(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function wy(t,e,n,r,i){return t-=e,t=Mc(t,1/n,r),i!==void 0&&(t=Mc(t,1/i,r)),t}function z5(t,e=0,n=1,r=.5,i,s=t,o=t){if(Fn.test(e)&&(e=parseFloat(e),e=qe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=qe(s.min,s.max,r);t===s&&(l-=e),t.min=wy(t.min,e,n,l,i),t.max=wy(t.max,e,n,l,i)}function by(t,e,[n,r,i],s,o){z5(t,e[n],e[r],e[i],e.scale,s,o)}const A5=["x","scaleX","originX"],P5=["y","scaleY","originY"];function ky(t,e,n,r){by(t.x,e,A5,n?n.x:void 0,r?r.x:void 0),by(t.y,e,P5,n?n.y:void 0,r?r.y:void 0)}function _y(t){return t.translate===0&&t.scale===1}function l2(t){return _y(t.x)&&_y(t.y)}function Ny(t,e){return t.min===e.min&&t.max===e.max}function R5(t,e){return Ny(t.x,e.x)&&Ny(t.y,e.y)}function Ey(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function c2(t,e){return Ey(t.x,e.x)&&Ey(t.y,e.y)}function Ty(t){return Lt(t.x)/Lt(t.y)}function Cy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class D5{constructor(){this.members=[]}add(e){Zp(this.members,e),e.scheduleRender()}remove(e){if(em(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function V5(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:N}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),N&&(r+=`skewY(${N}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Bd=["","X","Y","Z"],M5=1e3;let L5=0;function Ud(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function u2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Qk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Be,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&u2(r)}function d2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=L5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(B5),this.nodes.forEach(q5),this.nodes.forEach(H5),this.nodes.forEach(U5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new E5)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rm),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Tk(o)&&!jj(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;Be.read(()=>{p=window.innerWidth}),t(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=T5(m,250),Jl.hasAnimatedSinceResize&&(Jl.hasAnimatedSinceResize=!1,this.nodes.forEach(Iy)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||d.getDefaultTransition()||X5,{onLayoutAnimationStart:C,onLayoutAnimationComplete:z}=d.getProps(),b=!this.targetLayout||!c2(this.targetLayout,y),x=!p&&m;if(this.options.layoutRoot||this.resumeFrom||x||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...mm(N,"layout"),onPlay:C,onComplete:z};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(h,x)}else p||Iy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ur(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(G5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&u2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sy);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(W5),this.nodes.forEach(O5),this.nodes.forEach(F5)):this.nodes.forEach(jy),this.clearAllSnapshots();const l=Gt.now();bt.delta=lr(0,1e3/60,l-bt.timestamp),bt.timestamp=l,bt.isProcessing=!0,Id.update.process(bt),Id.preRender.process(bt),Id.render.process(bt),bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($5),this.sharedNodes.forEach(K5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Be.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Be.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lt(this.snapshot.measuredBox.x)&&!Lt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!l2(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||gi(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),J5(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return dt();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(Z5))){const{scroll:h}=this.root;h&&(xs(l.x,h.offset.x),xs(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=dt();if(wn(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&wn(l,o),xs(l.x,p.offset.x),xs(l.y,p.offset.y))}return l}applyTransform(o,l=!1){const c=dt();wn(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ys(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),gi(h.latestValues)&&ys(c,h.latestValues)}return gi(this.latestValues)&&ys(c,this.latestValues),c}removeTransform(o){const l=dt();wn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!gi(d.latestValues))continue;gf(d.latestValues)&&d.updateSnapshot();const h=dt(),p=d.measurePageBox();wn(h,p),ky(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return gi(this.latestValues)&&ky(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!this.layout||!(h||p))return;this.resolvedRelativeTargetAt=bt.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wn(this.target,this.layout.layoutBox),$k(this.target,this.targetDelta)):wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||gf(this.parent.latestValues)||Uk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Lc(this.relativeTargetOrigin,l,c),wn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var N;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===bt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;wn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;v4(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=dt());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vy(this.prevProjectionDelta.x,this.projectionDelta.x),vy(this.prevProjectionDelta.y,this.projectionDelta.y)),Zo(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!Cy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Cy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vs(),this.projectionDelta=vs(),this.projectionDeltaWithTransform=vs()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},p=vs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=dt(),y=c?c.source:void 0,N=this.layout?this.layout.source:void 0,C=y!==N,z=this.getStack(),b=!z||z.members.length<=1,x=!!(C&&!b&&this.options.crossfade===!0&&!this.path.some(Y5));this.animationProgress=0;let w;this.mixTargetDelta=R=>{const V=R/1e3;zy(p.x,o.x,V),zy(p.y,o.y,V),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Q5(this.relativeTarget,this.relativeTargetOrigin,m,V),w&&R5(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=dt()),wn(w,this.relativeTarget)),C&&(this.animationValues=h,S5(h,d,this.latestValues,V,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(ur(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Be.update(()=>{Jl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Vi(0)),this.currentAnimation=_5(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(M5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&h2(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||dt();const p=Lt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+p;const m=Lt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}wn(l,c),ys(l,h),Zo(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new D5),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Ud("z",o,d,this.animationValues);for(let h=0;h<Bd.length;h++)Ud(`rotate${Bd[h]}`,o,d,this.animationValues),Ud(`skew${Bd[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Xl(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Xl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!gi(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=V5(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),o.transform=p;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const N in mf){if(h[N]===void 0)continue;const{correct:C,applyTo:z,isCSSVariable:b}=mf[N],x=p==="none"?h[N]:C(h[N],d);if(z){const w=z.length;for(let R=0;R<w;R++)o[z[R]]=x}else b?this.options.visualElement.renderState.vars[N]=x:o[N]=x}this.options.layoutId&&(o.pointerEvents=d===this?Xl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Sy),this.root.sharedNodes.clear()}}}function O5(t){t.updateLayout()}function F5(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?an(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],y=Lt(m);m.min=r[p].min,m.max=m.min+y}):h2(s,e.layoutBox,r)&&an(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],y=Lt(r[p]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const l=vs();Zo(l,r,e.layoutBox);const c=vs();o?Zo(c,t.applyTransform(i,!0),e.measuredBox):Zo(c,r,e.layoutBox);const d=!l2(l);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const N=dt();Lc(N,e.layoutBox,m.layoutBox);const C=dt();Lc(C,r,y.layoutBox),c2(N,C)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=N,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function B5(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function U5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function $5(t){t.clearSnapshot()}function Sy(t){t.clearMeasurements()}function jy(t){t.isLayoutDirty=!1}function W5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Iy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function q5(t){t.resolveTargetDelta()}function H5(t){t.calcProjection()}function G5(t){t.resetSkewAndRotation()}function K5(t){t.removeLeadSnapshot()}function zy(t,e,n){t.translate=qe(e.translate,0,n),t.scale=qe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ay(t,e,n,r){t.min=qe(e.min,n.min,r),t.max=qe(e.max,n.max,r)}function Q5(t,e,n,r){Ay(t.x,e.x,n.x,r),Ay(t.y,e.y,n.y,r)}function Y5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const X5={duration:.45,ease:[.4,0,.1,1]},Py=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Ry=Py("applewebkit/")&&!Py("chrome/")?Math.round:mn;function Dy(t){t.min=Ry(t.min),t.max=Ry(t.max)}function J5(t){Dy(t.x),Dy(t.y)}function h2(t,e,n){return t==="position"||t==="preserve-aspect"&&!o5(Ty(e),Ty(n),.2)}function Z5(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const eI=d2({attachResizeListener:(t,e)=>Ta(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$d={current:void 0},f2=d2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$d.current){const t=new eI({});t.mount(window),t.setOptions({layoutScroll:!0}),$d.current=t}return $d.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tI={pan:{Feature:b5},drag:{Feature:w5,ProjectionNode:f2,MeasureLayout:s2}};function Vy(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Be.postRender(()=>s(e,Wa(e)))}class nI extends oi{mount(){const{current:e}=this.node;e&&(this.unmount=Nj(e,(n,r)=>(Vy(this.node,r,"Start"),i=>Vy(this.node,i,"End"))))}unmount(){}}class rI extends oi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ba(Ta(this.node.current,"focus",()=>this.onFocus()),Ta(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function My(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Be.postRender(()=>s(e,Wa(e)))}class iI extends oi{mount(){const{current:e}=this.node;e&&(this.unmount=Sj(e,(n,r)=>(My(this.node,r,"Start"),(i,{success:s})=>My(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _f=new WeakMap,Wd=new WeakMap,sI=t=>{const e=_f.get(t.target);e&&e(t)},oI=t=>{t.forEach(sI)};function aI({root:t,...e}){const n=t||document;Wd.has(n)||Wd.set(n,{});const r=Wd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(oI,{root:t,...e})),r[i]}function lI(t,e,n){const r=aI(e);return _f.set(t,n),r.observe(t),()=>{_f.delete(t),r.unobserve(t)}}const cI={some:0,all:1};class uI extends oi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:cI[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(c)};return lI(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(dI(e,n))&&this.startObserver()}unmount(){}}function dI({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const hI={inView:{Feature:uI},tap:{Feature:iI},focus:{Feature:rI},hover:{Feature:nI}},fI={layout:{ProjectionNode:f2,MeasureLayout:s2}},pI={...e5,...hI,...tI,...fI},oe=g4(pI,j4);function Oc(t){const e=si(()=>Vi(t)),{isStatic:n}=j.useContext(yu);if(n){const[,r]=j.useState(t);j.useEffect(()=>e.on("change",r),[])}return e}function p2(t,e){const n=Oc(e()),r=()=>n.set(e());return r(),Jp(()=>{const i=()=>Be.preRender(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),ur(r)}}),n}function mI(t){Xo.current=[],t();const e=p2(Xo.current,t);return Xo.current=void 0,e}function gI(t,e,n,r){if(typeof t=="function")return mI(t);const i=typeof e=="function"?e:Ij(e,n,r);return Array.isArray(t)?Ly(t,i):Ly([t],([s])=>i(s))}function Ly(t,e){const n=si(()=>[]);return p2(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class xI{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const yI=()=>new xI;function Sm(){return si(yI)}const m2=j.createContext(null);function vI(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const s=r>0?1:-1,o=t[i+s];if(!o)return t;const l=t[i],c=o.layout,d=qe(c.min,c.max,.5);return s===1&&l.layout.max+n>d||s===-1&&l.layout.min+n<d?VC(t,i,i+s):t}function wI({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},o){const l=si(()=>oe[e]),c=[],d=j.useRef(!1),h={axis:n,registerItem:(p,m)=>{const y=c.findIndex(N=>p===N.value);y!==-1?c[y].layout=m[n]:c.push({value:p,layout:m[n]}),c.sort(kI)},updateOrder:(p,m,y)=>{if(d.current)return;const N=vI(c,p,m,y);c!==N&&(d.current=!0,r(N.map(bI).filter(C=>i.indexOf(C)!==-1)))}};return j.useEffect(()=>{d.current=!1}),a.jsx(l,{...s,ref:o,ignoreStrict:!0,children:a.jsx(m2.Provider,{value:h,children:t})})}const ku=j.forwardRef(wI);function bI(t){return t.value}function kI(t,e){return t.layout.min-e.layout.min}function Oy(t,e=0){return Nt(t)?t:Oc(e)}function _I({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...o},l){const c=si(()=>oe[r]),d=j.useContext(m2),h={x:Oy(e.x),y:Oy(e.y)},p=gI([h.x,h.y],([C,z])=>C||z?1:"unset"),{axis:m,registerItem:y,updateOrder:N}=d;return a.jsx(c,{drag:m,...o,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:p},layout:s,onDrag:(C,z)=>{const{velocity:b}=z;b[m]&&N(n,h[m].get(),b[m]),i&&i(C,z)},onLayoutMeasure:C=>y(n,C),ref:l,ignoreStrict:!0,children:t})}const _u=j.forwardRef(_I);function Fy({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return a.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>a.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const NI=()=>{};var By={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},EI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},x2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||p==null)throw new TI;const m=s<<2|l>>4;if(r.push(m),d!==64){const y=l<<4&240|d>>2;if(r.push(y),p!==64){const N=d<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CI=function(t){const e=g2(t);return x2.encodeByteArray(e,!0)},Fc=function(t){return CI(t).replace(/\./g,"")},SI=function(t){try{return x2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=()=>jI().__FIREBASE_DEFAULTS__,zI=()=>{if(typeof process>"u"||typeof By>"u")return;const t=By.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SI(t[1]);return e&&JSON.parse(e)},jm=()=>{try{return NI()||II()||zI()||AI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PI=t=>{var e,n;return(n=(e=jm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},RI=t=>{const e=PI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},y2=()=>{var t;return(t=jm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function VI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Fc(JSON.stringify(n)),Fc(JSON.stringify(o)),""].join(".")}const ea={};function LI(){const t={prod:[],emulator:[]};for(const e of Object.keys(ea))ea[e]?t.emulator.push(e):t.prod.push(e);return t}function OI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Uy=!1;function FI(t,e){if(typeof window>"u"||typeof document>"u"||!Im(window.location.host)||ea[t]===e||ea[t]||Uy)return;ea[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=LI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Uy=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=OI(r),y=n("text"),N=document.getElementById(y)||document.createElement("span"),C=n("learnmore"),z=document.getElementById(C)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),h(z,C);const R=d();c(x,b),w.append(x,N,z,R),document.body.appendChild(w)}s?(N.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UI(){var e;const t=(e=jm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $I(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WI(){return!UI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v2(){try{return typeof indexedDB=="object"}catch{return!1}}function w2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function qI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="FirebaseError";class ai extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HI,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?GI(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ai(i,l,r)}}function GI(t,e){return t.replace(KI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KI=/\{\$([^}]+)}/g;function Ca(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if($y(s)&&$y(o)){if(!Ca(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $y(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=1e3,YI=2,XI=4*60*60*1e3,JI=.5;function Wy(t,e=QI,n=YI){const r=e*Math.pow(n,t),i=Math.round(JI*r*(Math.random()-.5)*2);return Math.min(XI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){return t&&t._delegate?t._delegate:t}class hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tz(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ez(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ez(t){return t===xi?void 0:t}function tz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const rz={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},iz=Ne.INFO,sz={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},oz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zm{constructor(e){this.name=e,this._logLevel=iz,this._logHandler=oz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const az=(t,e)=>e.some(n=>t instanceof n);let qy,Hy;function lz(){return qy||(qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cz(){return Hy||(Hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b2=new WeakMap,Nf=new WeakMap,k2=new WeakMap,qd=new WeakMap,Am=new WeakMap;function uz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Br(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&b2.set(n,t)}).catch(()=>{}),Am.set(e,t),e}function dz(t){if(Nf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Nf.set(t,e)}let Ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||k2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hz(t){Ef=t(Ef)}function fz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hd(this),e,...n);return k2.set(r,e.sort?e.sort():[e]),Br(r)}:cz().includes(t)?function(...e){return t.apply(Hd(this),e),Br(b2.get(this))}:function(...e){return Br(t.apply(Hd(this),e))}}function pz(t){return typeof t=="function"?fz(t):(t instanceof IDBTransaction&&dz(t),az(t,lz())?new Proxy(t,Ef):t)}function Br(t){if(t instanceof IDBRequest)return uz(t);if(qd.has(t))return qd.get(t);const e=pz(t);return e!==t&&(qd.set(t,e),Am.set(e,t)),e}const Hd=t=>Am.get(t);function _2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Br(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Br(o.result),c.oldVersion,c.newVersion,Br(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const mz=["get","getKey","getAll","getAllKeys","count"],gz=["put","add","delete","clear"],Gd=new Map;function Gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gd.get(e))return Gd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mz.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Gd.set(e,s),s}hz(t=>({...t,get:(e,n,r)=>Gy(e,n)||t.get(e,n,r),has:(e,n)=>!!Gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tf="@firebase/app",Ky="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new zm("@firebase/app"),vz="@firebase/app-compat",wz="@firebase/analytics-compat",bz="@firebase/analytics",kz="@firebase/app-check-compat",_z="@firebase/app-check",Nz="@firebase/auth",Ez="@firebase/auth-compat",Tz="@firebase/database",Cz="@firebase/data-connect",Sz="@firebase/database-compat",jz="@firebase/functions",Iz="@firebase/functions-compat",zz="@firebase/installations",Az="@firebase/installations-compat",Pz="@firebase/messaging",Rz="@firebase/messaging-compat",Dz="@firebase/performance",Vz="@firebase/performance-compat",Mz="@firebase/remote-config",Lz="@firebase/remote-config-compat",Oz="@firebase/storage",Fz="@firebase/storage-compat",Bz="@firebase/firestore",Uz="@firebase/ai",$z="@firebase/firestore-compat",Wz="firebase",qz="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="[DEFAULT]",Hz={[Tf]:"fire-core",[vz]:"fire-core-compat",[bz]:"fire-analytics",[wz]:"fire-analytics-compat",[_z]:"fire-app-check",[kz]:"fire-app-check-compat",[Nz]:"fire-auth",[Ez]:"fire-auth-compat",[Tz]:"fire-rtdb",[Cz]:"fire-data-connect",[Sz]:"fire-rtdb-compat",[jz]:"fire-fn",[Iz]:"fire-fn-compat",[zz]:"fire-iid",[Az]:"fire-iid-compat",[Pz]:"fire-fcm",[Rz]:"fire-fcm-compat",[Dz]:"fire-perf",[Vz]:"fire-perf-compat",[Mz]:"fire-rc",[Lz]:"fire-rc-compat",[Oz]:"fire-gcs",[Fz]:"fire-gcs-compat",[Bz]:"fire-fst",[$z]:"fire-fst-compat",[Uz]:"fire-vertex","fire-js":"fire-js",[Wz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Map,Gz=new Map,Sf=new Map;function Qy(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kr(t){const e=t.name;if(Sf.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;Sf.set(e,t);for(const n of Bc.values())Qy(n,t);for(const n of Gz.values())Qy(n,t);return!0}function qa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kz(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Nu("app","Firebase",Qz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=qz;function N2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Cf,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(n||(n=y2()),!n)throw Ur.create("no-options");const s=Bc.get(i);if(s){if(Ca(n,s.options)&&Ca(r,s.config))return s;throw Ur.create("duplicate-app",{appName:i})}const o=new nz(i);for(const c of Sf.values())o.addComponent(c);const l=new Yz(n,r,o);return Bc.set(i,l),l}function E2(t=Cf){const e=Bc.get(t);if(!e&&t===Cf&&y2())return N2();if(!e)throw Ur.create("no-app",{appName:t});return e}function Bn(t,e,n){let r=Hz[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(o.join(" "));return}Kr(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz="firebase-heartbeat-database",Zz=1,Sa="firebase-heartbeat-store";let Kd=null;function T2(){return Kd||(Kd=_2(Jz,Zz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),Kd}async function eA(t){try{const n=(await T2()).transaction(Sa),r=await n.objectStore(Sa).get(C2(t));return await n.done,r}catch(e){if(e instanceof ai)fr.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function Yy(t,e){try{const r=(await T2()).transaction(Sa,"readwrite");await r.objectStore(Sa).put(e,C2(t)),await r.done}catch(n){if(n instanceof ai)fr.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(r.message)}}}function C2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=1024,nA=30;class rA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>nA){const o=oA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xy(),{heartbeatsToSend:r,unsentEntries:i}=iA(this._heartbeatsCache.heartbeats),s=Fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fr.warn(n),""}}}function Xy(){return new Date().toISOString().substring(0,10)}function iA(t,e=tA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Jy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Jy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v2()?w2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Jy(t){return Fc(JSON.stringify({version:2,heartbeats:t})).length}function oA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){Kr(new hr("platform-logger",e=>new xz(e),"PRIVATE")),Kr(new hr("heartbeat",e=>new rA(e),"PRIVATE")),Bn(Tf,Ky,t),Bn(Tf,Ky,"esm2020"),Bn("fire-js","")}aA("");var lA="firebase",cA="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(lA,cA,"app");const S2="@firebase/installations",Pm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=1e4,I2=`w:${Pm}`,z2="FIS_v2",uA="https://firebaseinstallations.googleapis.com/v1",dA=60*60*1e3,hA="installations",fA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Mi=new Nu(hA,fA,pA);function A2(t){return t instanceof ai&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2({projectId:t}){return`${uA}/projects/${t}/installations`}function R2(t){return{token:t.token,requestStatus:2,expiresIn:gA(t.expiresIn),creationTime:Date.now()}}async function D2(t,e){const r=(await e.json()).error;return Mi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function V2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mA(t,{refreshToken:e}){const n=V2(t);return n.append("Authorization",xA(e)),n}async function M2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function gA(t){return Number(t.replace("s","000"))}function xA(t){return`${z2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=P2(t),i=V2(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:z2,appId:t.appId,sdkVersion:I2},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await M2(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:R2(d.authToken)}}else throw await D2("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=/^[cdef][\w-]{21}$/,jf="";function bA(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=kA(t);return wA.test(n)?n:jf}catch{return jf}}function kA(t){return vA(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new Map;function F2(t,e){const n=Eu(t);B2(n,e),_A(n,e)}function B2(t,e){const n=O2.get(t);if(n)for(const r of n)r(e)}function _A(t,e){const n=NA();n&&n.postMessage({key:t,fid:e}),EA()}let Ni=null;function NA(){return!Ni&&"BroadcastChannel"in self&&(Ni=new BroadcastChannel("[Firebase] FID Change"),Ni.onmessage=t=>{B2(t.data.key,t.data.fid)}),Ni}function EA(){O2.size===0&&Ni&&(Ni.close(),Ni=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebase-installations-database",CA=1,Li="firebase-installations-store";let Qd=null;function Rm(){return Qd||(Qd=_2(TA,CA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Li)}}})),Qd}async function Uc(t,e){const n=Eu(t),i=(await Rm()).transaction(Li,"readwrite"),s=i.objectStore(Li),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&F2(t,e.fid),e}async function U2(t){const e=Eu(t),r=(await Rm()).transaction(Li,"readwrite");await r.objectStore(Li).delete(e),await r.done}async function Tu(t,e){const n=Eu(t),i=(await Rm()).transaction(Li,"readwrite"),s=i.objectStore(Li),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&F2(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dm(t){let e;const n=await Tu(t.appConfig,r=>{const i=SA(r),s=jA(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===jf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function SA(t){const e=t||{fid:bA(),registrationStatus:0};return $2(e)}function jA(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Mi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=IA(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zA(t)}:{installationEntry:e}}async function IA(t,e){try{const n=await yA(t,e);return Uc(t.appConfig,n)}catch(n){throw A2(n)&&n.customData.serverCode===409?await U2(t.appConfig):await Uc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function zA(t){let e=await Zy(t.appConfig);for(;e.registrationStatus===1;)await L2(100),e=await Zy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Dm(t);return r||n}return e}function Zy(t){return Tu(t,e=>{if(!e)throw Mi.create("installation-not-found");return $2(e)})}function $2(t){return AA(t)?{fid:t.fid,registrationStatus:0}:t}function AA(t){return t.registrationStatus===1&&t.registrationTime+j2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA({appConfig:t,heartbeatServiceProvider:e},n){const r=RA(t,n),i=mA(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:I2,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await M2(()=>fetch(r,l));if(c.ok){const d=await c.json();return R2(d)}else throw await D2("Generate Auth Token",c)}function RA(t,{fid:e}){return`${P2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vm(t,e=!1){let n;const r=await Tu(t.appConfig,s=>{if(!W2(s))throw Mi.create("not-registered");const o=s.authToken;if(!e&&MA(o))return s;if(o.requestStatus===1)return n=DA(t,e),s;{if(!navigator.onLine)throw Mi.create("app-offline");const l=OA(s);return n=VA(t,l),l}});return n?await n:r.authToken}async function DA(t,e){let n=await ev(t.appConfig);for(;n.authToken.requestStatus===1;)await L2(100),n=await ev(t.appConfig);const r=n.authToken;return r.requestStatus===0?Vm(t,e):r}function ev(t){return Tu(t,e=>{if(!W2(e))throw Mi.create("not-registered");const n=e.authToken;return FA(n)?{...e,authToken:{requestStatus:0}}:e})}async function VA(t,e){try{const n=await PA(t,e),r={...e,authToken:n};return await Uc(t.appConfig,r),n}catch(n){if(A2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await U2(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Uc(t.appConfig,r)}throw n}}function W2(t){return t!==void 0&&t.registrationStatus===2}function MA(t){return t.requestStatus===2&&!LA(t)}function LA(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dA}function OA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function FA(t){return t.requestStatus===1&&t.requestTime+j2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t){const e=t,{installationEntry:n,registrationPromise:r}=await Dm(e);return r?r.catch(console.error):Vm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(t,e=!1){const n=t;return await $A(n),(await Vm(n,e)).token}async function $A(t){const{registrationPromise:e}=await Dm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){if(!t||!t.options)throw Yd("App Configuration");if(!t.name)throw Yd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Yd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Yd(t){return Mi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="installations",qA="installations-internal",HA=t=>{const e=t.getProvider("app").getImmediate(),n=WA(e),r=qa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},GA=t=>{const e=t.getProvider("app").getImmediate(),n=qa(e,q2).getImmediate();return{getId:()=>BA(n),getToken:i=>UA(n,i)}};function KA(){Kr(new hr(q2,HA,"PUBLIC")),Kr(new hr(qA,GA,"PRIVATE"))}KA();Bn(S2,Pm);Bn(S2,Pm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="analytics",QA="firebase_id",YA="origin",XA=60*1e3,JA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new zm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nn=new Nu("analytics","Analytics",ZA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){if(!t.startsWith(Mm)){const e=nn.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function H2(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function tP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function nP(t,e){const n=tP("firebase-js-sdk-policy",{createScriptURL:eP}),r=document.createElement("script"),i=`${Mm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function rP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function iP(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await H2(n)).find(d=>d.measurementId===i);c&&await e[c.appId]}}catch(l){Ft.error(l)}t("config",i,s)}async function sP(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await H2(n);for(const c of o){const d=l.find(p=>p.measurementId===c),h=d&&e[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ft.error(s)}}function oP(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,c]=o;await sP(t,e,n,l,c)}else if(s==="config"){const[l,c]=o;await iP(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=o;t("consent",l,c)}else if(s==="get"){const[l,c,d]=o;t("get",l,c,d)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Ft.error(l)}}return i}function aP(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=oP(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function lP(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Mm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=30,uP=1e3;class dP{constructor(e={},n=uP){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const G2=new dP;function hP(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function fP(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:hP(n)},i=JA.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let l="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw nn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function pP(t,e=G2,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw nn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw nn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new xP;return setTimeout(async()=>{l.abort()},XA),K2({appId:r,apiKey:i,measurementId:s},o,l,e)}async function K2(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=G2){var l;const{appId:s,measurementId:o}=t;try{await mP(r,e)}catch(c){if(o)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await fP(t);return i.deleteThrottleMetadata(s),c}catch(c){const d=c;if(!gP(d)){if(i.deleteThrottleMetadata(s),o)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:o};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?Wy(n,i.intervalMillis,cP):Wy(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,p),Ft.debug(`Calling attemptFetch again in ${h} millis`),K2(t,p,r,i)}}function mP(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function gP(t){if(!(t instanceof ai)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class xP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function yP(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function vP(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(){if(v2())try{await w2()}catch(t){return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bP(t,e,n,r,i,s,o){const l=pP(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ft.error(m)),e.push(l);const c=wP().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);lP(s)||nP(s,d.measurementId),i("js",new Date);const p=(o==null?void 0:o.config)??{};return p[YA]="firebase",p.update=!0,h!=null&&(p[QA]=h),i("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.app=e}_delete(){return delete Cs[this.app.options.appId],Promise.resolve()}}let Cs={},tv=[];const nv={};let Xd="dataLayer",_P="gtag",rv,Lm,iv=!1;function NP(){const t=[];if($I()&&t.push("This is a browser extension environment."),qI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=nn.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function EP(t,e,n){NP();const r=t.options.appId;if(!r)throw nn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nn.create("no-api-key");if(Cs[r]!=null)throw nn.create("already-exists",{id:r});if(!iv){rP(Xd);const{wrappedGtag:s,gtagCore:o}=aP(Cs,tv,nv,Xd,_P);Lm=s,rv=o,iv=!0}return Cs[r]=bP(t,tv,nv,e,rv,Xd,n),new kP(t)}function TP(t=E2()){t=dr(t);const e=qa(t,$c);return e.isInitialized()?e.getImmediate():CP(t)}function CP(t,e={}){const n=qa(t,$c);if(n.isInitialized()){const i=n.getImmediate();if(Ca(e,n.getOptions()))return i;throw nn.create("already-initialized")}return n.initialize({options:e})}function SP(t,e,n){t=dr(t),vP(Lm,Cs[t.app.options.appId],e,n).catch(r=>Ft.error(r))}function jP(t,e,n,r){t=dr(t),yP(Lm,Cs[t.app.options.appId],e,n,r).catch(i=>Ft.error(i))}const sv="@firebase/analytics",ov="0.10.19";function IP(){Kr(new hr($c,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return EP(r,i,n)},"PUBLIC")),Kr(new hr("analytics-internal",t,"PRIVATE")),Bn(sv,ov),Bn(sv,ov,"esm2020");function t(e){try{const n=e.getProvider($c).getImmediate();return{logEvent:(r,i,s)=>jP(n,r,i,s),setUserProperties:(r,i)=>SP(n,r,i)}}catch(n){throw nn.create("interop-component-reg-failed",{reason:n})}}}IP();var av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,Q2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,v){function _(){}_.prototype=v.prototype,k.F=v.prototype,k.prototype=new _,k.prototype.constructor=k,k.D=function(T,A,D){for(var I=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)I[xe-2]=arguments[xe];return v.prototype[A].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,v,_){_||(_=0);const T=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)T[A]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(A=0;A<16;++A)T[A]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=k.g[0],_=k.g[1],A=k.g[2];let D=k.g[3],I;I=v+(D^_&(A^D))+T[0]+3614090360&4294967295,v=_+(I<<7&4294967295|I>>>25),I=D+(A^v&(_^A))+T[1]+3905402710&4294967295,D=v+(I<<12&4294967295|I>>>20),I=A+(_^D&(v^_))+T[2]+606105819&4294967295,A=D+(I<<17&4294967295|I>>>15),I=_+(v^A&(D^v))+T[3]+3250441966&4294967295,_=A+(I<<22&4294967295|I>>>10),I=v+(D^_&(A^D))+T[4]+4118548399&4294967295,v=_+(I<<7&4294967295|I>>>25),I=D+(A^v&(_^A))+T[5]+1200080426&4294967295,D=v+(I<<12&4294967295|I>>>20),I=A+(_^D&(v^_))+T[6]+2821735955&4294967295,A=D+(I<<17&4294967295|I>>>15),I=_+(v^A&(D^v))+T[7]+4249261313&4294967295,_=A+(I<<22&4294967295|I>>>10),I=v+(D^_&(A^D))+T[8]+1770035416&4294967295,v=_+(I<<7&4294967295|I>>>25),I=D+(A^v&(_^A))+T[9]+2336552879&4294967295,D=v+(I<<12&4294967295|I>>>20),I=A+(_^D&(v^_))+T[10]+4294925233&4294967295,A=D+(I<<17&4294967295|I>>>15),I=_+(v^A&(D^v))+T[11]+2304563134&4294967295,_=A+(I<<22&4294967295|I>>>10),I=v+(D^_&(A^D))+T[12]+1804603682&4294967295,v=_+(I<<7&4294967295|I>>>25),I=D+(A^v&(_^A))+T[13]+4254626195&4294967295,D=v+(I<<12&4294967295|I>>>20),I=A+(_^D&(v^_))+T[14]+2792965006&4294967295,A=D+(I<<17&4294967295|I>>>15),I=_+(v^A&(D^v))+T[15]+1236535329&4294967295,_=A+(I<<22&4294967295|I>>>10),I=v+(A^D&(_^A))+T[1]+4129170786&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^A&(v^_))+T[6]+3225465664&4294967295,D=v+(I<<9&4294967295|I>>>23),I=A+(v^_&(D^v))+T[11]+643717713&4294967295,A=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(A^D))+T[0]+3921069994&4294967295,_=A+(I<<20&4294967295|I>>>12),I=v+(A^D&(_^A))+T[5]+3593408605&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^A&(v^_))+T[10]+38016083&4294967295,D=v+(I<<9&4294967295|I>>>23),I=A+(v^_&(D^v))+T[15]+3634488961&4294967295,A=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(A^D))+T[4]+3889429448&4294967295,_=A+(I<<20&4294967295|I>>>12),I=v+(A^D&(_^A))+T[9]+568446438&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^A&(v^_))+T[14]+3275163606&4294967295,D=v+(I<<9&4294967295|I>>>23),I=A+(v^_&(D^v))+T[3]+4107603335&4294967295,A=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(A^D))+T[8]+1163531501&4294967295,_=A+(I<<20&4294967295|I>>>12),I=v+(A^D&(_^A))+T[13]+2850285829&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^A&(v^_))+T[2]+4243563512&4294967295,D=v+(I<<9&4294967295|I>>>23),I=A+(v^_&(D^v))+T[7]+1735328473&4294967295,A=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(A^D))+T[12]+2368359562&4294967295,_=A+(I<<20&4294967295|I>>>12),I=v+(_^A^D)+T[5]+4294588738&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^A)+T[8]+2272392833&4294967295,D=v+(I<<11&4294967295|I>>>21),I=A+(D^v^_)+T[11]+1839030562&4294967295,A=D+(I<<16&4294967295|I>>>16),I=_+(A^D^v)+T[14]+4259657740&4294967295,_=A+(I<<23&4294967295|I>>>9),I=v+(_^A^D)+T[1]+2763975236&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^A)+T[4]+1272893353&4294967295,D=v+(I<<11&4294967295|I>>>21),I=A+(D^v^_)+T[7]+4139469664&4294967295,A=D+(I<<16&4294967295|I>>>16),I=_+(A^D^v)+T[10]+3200236656&4294967295,_=A+(I<<23&4294967295|I>>>9),I=v+(_^A^D)+T[13]+681279174&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^A)+T[0]+3936430074&4294967295,D=v+(I<<11&4294967295|I>>>21),I=A+(D^v^_)+T[3]+3572445317&4294967295,A=D+(I<<16&4294967295|I>>>16),I=_+(A^D^v)+T[6]+76029189&4294967295,_=A+(I<<23&4294967295|I>>>9),I=v+(_^A^D)+T[9]+3654602809&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^A)+T[12]+3873151461&4294967295,D=v+(I<<11&4294967295|I>>>21),I=A+(D^v^_)+T[15]+530742520&4294967295,A=D+(I<<16&4294967295|I>>>16),I=_+(A^D^v)+T[2]+3299628645&4294967295,_=A+(I<<23&4294967295|I>>>9),I=v+(A^(_|~D))+T[0]+4096336452&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~A))+T[7]+1126891415&4294967295,D=v+(I<<10&4294967295|I>>>22),I=A+(v^(D|~_))+T[14]+2878612391&4294967295,A=D+(I<<15&4294967295|I>>>17),I=_+(D^(A|~v))+T[5]+4237533241&4294967295,_=A+(I<<21&4294967295|I>>>11),I=v+(A^(_|~D))+T[12]+1700485571&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~A))+T[3]+2399980690&4294967295,D=v+(I<<10&4294967295|I>>>22),I=A+(v^(D|~_))+T[10]+4293915773&4294967295,A=D+(I<<15&4294967295|I>>>17),I=_+(D^(A|~v))+T[1]+2240044497&4294967295,_=A+(I<<21&4294967295|I>>>11),I=v+(A^(_|~D))+T[8]+1873313359&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~A))+T[15]+4264355552&4294967295,D=v+(I<<10&4294967295|I>>>22),I=A+(v^(D|~_))+T[6]+2734768916&4294967295,A=D+(I<<15&4294967295|I>>>17),I=_+(D^(A|~v))+T[13]+1309151649&4294967295,_=A+(I<<21&4294967295|I>>>11),I=v+(A^(_|~D))+T[4]+4149444226&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~A))+T[11]+3174756917&4294967295,D=v+(I<<10&4294967295|I>>>22),I=A+(v^(D|~_))+T[2]+718787259&4294967295,A=D+(I<<15&4294967295|I>>>17),I=_+(D^(A|~v))+T[9]+3951481745&4294967295,k.g[0]=k.g[0]+v&4294967295,k.g[1]=k.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+A&4294967295,k.g[3]=k.g[3]+D&4294967295}r.prototype.v=function(k,v){v===void 0&&(v=k.length);const _=v-this.blockSize,T=this.C;let A=this.h,D=0;for(;D<v;){if(A==0)for(;D<=_;)i(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<v;)if(T[A++]=k.charCodeAt(D++),A==this.blockSize){i(this,T),A=0;break}}else for(;D<v;)if(T[A++]=k[D++],A==this.blockSize){i(this,T),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var v=1;v<k.length-8;++v)k[v]=0;v=this.o*8;for(var _=k.length-8;_<k.length;++_)k[_]=v&255,v/=256;for(this.v(k),k=Array(16),v=0,_=0;_<4;++_)for(let T=0;T<32;T+=8)k[v++]=this.g[_]>>>T&255;return k};function s(k,v){var _=l;return Object.prototype.hasOwnProperty.call(_,k)?_[k]:_[k]=v(k)}function o(k,v){this.h=v;const _=[];let T=!0;for(let A=k.length-1;A>=0;A--){const D=k[A]|0;T&&D==v||(_[A]=D,T=!1)}this.g=_}var l={};function c(k){return-128<=k&&k<128?s(k,function(v){return new o([v|0],v<0?-1:0)}):new o([k|0],k<0?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return p;if(k<0)return z(d(-k));const v=[];let _=1;for(let T=0;k>=_;T++)v[T]=k/_|0,_*=4294967296;return new o(v,0)}function h(k,v){if(k.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(k.charAt(0)=="-")return z(h(k.substring(1),v));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=d(Math.pow(v,8));let T=p;for(let D=0;D<k.length;D+=8){var A=Math.min(8,k.length-D);const I=parseInt(k.substring(D,D+A),v);A<8?(A=d(Math.pow(v,A)),T=T.j(A).add(d(I))):(T=T.j(_),T=T.add(d(I)))}return T}var p=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-z(this).m();let k=0,v=1;for(let _=0;_<this.g.length;_++){const T=this.i(_);k+=(T>=0?T:4294967296+T)*v,v*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(C(this))return"-"+z(this).toString(k);const v=d(Math.pow(k,6));var _=this;let T="";for(;;){const A=R(_,v).g;_=b(_,A.j(v));let D=((_.g.length>0?_.g[0]:_.h)>>>0).toString(k);if(_=A,N(_))return D+T;for(;D.length<6;)D="0"+D;T=D+T}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(let v=0;v<k.g.length;v++)if(k.g[v]!=0)return!1;return!0}function C(k){return k.h==-1}t.l=function(k){return k=b(this,k),C(k)?-1:N(k)?0:1};function z(k){const v=k.g.length,_=[];for(let T=0;T<v;T++)_[T]=~k.g[T];return new o(_,~k.h).add(m)}t.abs=function(){return C(this)?z(this):this},t.add=function(k){const v=Math.max(this.g.length,k.g.length),_=[];let T=0;for(let A=0;A<=v;A++){let D=T+(this.i(A)&65535)+(k.i(A)&65535),I=(D>>>16)+(this.i(A)>>>16)+(k.i(A)>>>16);T=I>>>16,D&=65535,I&=65535,_[A]=I<<16|D}return new o(_,_[_.length-1]&-2147483648?-1:0)};function b(k,v){return k.add(z(v))}t.j=function(k){if(N(this)||N(k))return p;if(C(this))return C(k)?z(this).j(z(k)):z(z(this).j(k));if(C(k))return z(this.j(z(k)));if(this.l(y)<0&&k.l(y)<0)return d(this.m()*k.m());const v=this.g.length+k.g.length,_=[];for(var T=0;T<2*v;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(let A=0;A<k.g.length;A++){const D=this.i(T)>>>16,I=this.i(T)&65535,xe=k.i(A)>>>16,ce=k.i(A)&65535;_[2*T+2*A]+=I*ce,x(_,2*T+2*A),_[2*T+2*A+1]+=D*ce,x(_,2*T+2*A+1),_[2*T+2*A+1]+=I*xe,x(_,2*T+2*A+1),_[2*T+2*A+2]+=D*xe,x(_,2*T+2*A+2)}for(k=0;k<v;k++)_[k]=_[2*k+1]<<16|_[2*k];for(k=v;k<2*v;k++)_[k]=0;return new o(_,0)};function x(k,v){for(;(k[v]&65535)!=k[v];)k[v+1]+=k[v]>>>16,k[v]&=65535,v++}function w(k,v){this.g=k,this.h=v}function R(k,v){if(N(v))throw Error("division by zero");if(N(k))return new w(p,p);if(C(k))return v=R(z(k),v),new w(z(v.g),z(v.h));if(C(v))return v=R(k,z(v)),new w(z(v.g),v.h);if(k.g.length>30){if(C(k)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,T=v;T.l(k)<=0;)_=V(_),T=V(T);var A=M(_,1),D=M(T,1);for(T=M(T,2),_=M(_,2);!N(T);){var I=D.add(T);I.l(k)<=0&&(A=A.add(_),D=I),T=M(T,1),_=M(_,1)}return v=b(k,A.j(v)),new w(A,v)}for(A=p;k.l(v)>=0;){for(_=Math.max(1,Math.floor(k.m()/v.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),D=d(_),I=D.j(v);C(I)||I.l(k)>0;)_-=T,D=d(_),I=D.j(v);N(D)&&(D=m),A=A.add(D),k=b(k,I)}return new w(A,k)}t.B=function(k){return R(this,k).h},t.and=function(k){const v=Math.max(this.g.length,k.g.length),_=[];for(let T=0;T<v;T++)_[T]=this.i(T)&k.i(T);return new o(_,this.h&k.h)},t.or=function(k){const v=Math.max(this.g.length,k.g.length),_=[];for(let T=0;T<v;T++)_[T]=this.i(T)|k.i(T);return new o(_,this.h|k.h)},t.xor=function(k){const v=Math.max(this.g.length,k.g.length),_=[];for(let T=0;T<v;T++)_[T]=this.i(T)^k.i(T);return new o(_,this.h^k.h)};function V(k){const v=k.g.length+1,_=[];for(let T=0;T<v;T++)_[T]=k.i(T)<<1|k.i(T-1)>>>31;return new o(_,k.h)}function M(k,v){const _=v>>5;v%=32;const T=k.g.length-_,A=[];for(let D=0;D<T;D++)A[D]=v>0?k.i(D+_)>>>v|k.i(D+_+1)<<32-v:k.i(D+_);return new o(A,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Q2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,$r=o}).apply(typeof av<"u"?av:typeof self<"u"?self:typeof window<"u"?window:{});var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y2,Vo,X2,Zl,If,J2,Z2,e_;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Il=="object"&&Il];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var F=u[E];if(!(F in g))break e;g=g[F]}u=u[u.length-1],E=g[u],f=f(E),f!=E&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(f){var g=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&g.push([E,f[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function c(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){return d=c,d.apply(null,arguments)}function h(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function p(u,f){function g(){}g.prototype=f.prototype,u.Z=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(E,F,$){for(var Z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)Z[ye-2]=arguments[ye];return f.prototype[F].apply(E,Z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){const f=u.length;if(f>0){const g=Array(f);for(let E=0;E<f;E++)g[E]=u[E];return g}return[]}function N(u,f){for(let E=1;E<arguments.length;E++){const F=arguments[E];var g=typeof F;if(g=g!="object"?g:F?Array.isArray(F)?"array":g:"null",g=="array"||g=="object"&&typeof F.length=="number"){g=u.length||0;const $=F.length||0;u.length=g+$;for(let Z=0;Z<$;Z++)u[g+Z]=F[Z]}else u.push(F)}}class C{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function z(u){o.setTimeout(()=>{throw u},0)}function b(){var u=k;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class x{constructor(){this.h=this.g=null}add(f,g){const E=w.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var w=new C(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,M=!1,k=new x,v=()=>{const u=Promise.resolve(void 0);V=()=>{u.then(_)}};function _(){for(var u;u=b();){try{u.h.call(u.g)}catch(g){z(g)}var f=w;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}M=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return u}();function I(u){return/^[\s\xa0]*$/.test(u)}function xe(u,f){A.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}p(xe,A),xe.prototype.init=function(u,f){const g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),re=0;function le(u,f,g,E,F){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=F,this.key=++re,this.da=this.fa=!1}function Y(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ie(u,f,g){for(const E in u)f.call(g,u[E],E,u)}function te(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function ue(u){const f={};for(const g in u)f[g]=u[g];return f}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(u,f){let g,E;for(let F=1;F<arguments.length;F++){E=arguments[F];for(g in E)u[g]=E[g];for(let $=0;$<he.length;$++)g=he[$],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function P(u){this.src=u,this.g={},this.h=0}P.prototype.add=function(u,f,g,E,F){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const Z=U(u,f,E,F);return Z>-1?(f=u[Z],g||(f.fa=!1)):(f=new le(f,this.src,$,!!E,F),f.fa=g,u.push(f)),f};function B(u,f){const g=f.type;if(g in u.g){var E=u.g[g],F=Array.prototype.indexOf.call(E,f,void 0),$;($=F>=0)&&Array.prototype.splice.call(E,F,1),$&&(Y(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function U(u,f,g,E){for(let F=0;F<u.length;++F){const $=u[F];if(!$.da&&$.listener==f&&$.capture==!!g&&$.ha==E)return F}return-1}var W="closure_lm_"+(Math.random()*1e6|0),S={};function O(u,f,g,E,F){if(Array.isArray(f)){for(let $=0;$<f.length;$++)O(u,f[$],g,E,F);return null}return g=Ue(g),u&&u[ce]?u.J(f,g,l(E)?!!E.capture:!1,F):G(u,f,g,!1,E,F)}function G(u,f,g,E,F,$){if(!f)throw Error("Invalid event type");const Z=l(F)?!!F.capture:!!F;let ye=ke(u);if(ye||(u[W]=ye=new P(u)),g=ye.add(f,g,E,Z,$),g.proxy)return g;if(E=ee(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)D||(F=Z),F===void 0&&(F=!1),u.addEventListener(f.toString(),E,F);else if(u.attachEvent)u.attachEvent(H(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ee(){function u(g){return f.call(u.src,u.listener,g)}const f=J;return u}function L(u,f,g,E,F){if(Array.isArray(f))for(var $=0;$<f.length;$++)L(u,f[$],g,E,F);else E=l(E)?!!E.capture:!!E,g=Ue(g),u&&u[ce]?(u=u.i,$=String(f).toString(),$ in u.g&&(f=u.g[$],g=U(f,g,E,F),g>-1&&(Y(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete u.g[$],u.h--)))):u&&(u=ke(u))&&(f=u.g[f.toString()],u=-1,f&&(u=U(f,g,E,F)),(g=u>-1?f[u]:null)&&q(g))}function q(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[ce])B(f.i,u);else{var g=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(g,E,u.capture):f.detachEvent?f.detachEvent(H(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=ke(f))?(B(g,u),g.h==0&&(g.src=null,f[W]=null)):Y(u)}}}function H(u){return u in S?S[u]:S[u]="on"+u}function J(u,f){if(u.da)u=!0;else{f=new xe(f,this);const g=u.listener,E=u.ha||u.src;u.fa&&q(u),u=g.call(E,f)}return u}function ke(u){return u=u[W],u instanceof P?u:null}var je="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ue(u){return typeof u=="function"?u:(u[je]||(u[je]=function(f){return u.handleEvent(f)}),u[je])}function $e(){T.call(this),this.i=new P(this),this.M=this,this.G=null}p($e,T),$e.prototype[ce]=!0,$e.prototype.removeEventListener=function(u,f,g,E){L(this,u,f,g,E)};function lt(u,f){var g,E=u.G;if(E)for(g=[];E;E=E.G)g.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new A(f,u);else if(f instanceof A)f.target=f.target||u;else{var F=f;f=new A(E,u),Ee(f,F)}F=!0;let $,Z;if(g)for(Z=g.length-1;Z>=0;Z--)$=f.g=g[Z],F=Xt($,E,!0,f)&&F;if($=f.g=u,F=Xt($,E,!0,f)&&F,F=Xt($,E,!1,f)&&F,g)for(Z=0;Z<g.length;Z++)$=f.g=g[Z],F=Xt($,E,!1,f)&&F}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var u=this.i;for(const f in u.g){const g=u.g[f];for(let E=0;E<g.length;E++)Y(g[E]);delete u.g[f],u.h--}}this.G=null},$e.prototype.J=function(u,f,g,E){return this.i.add(String(u),f,!1,g,E)},$e.prototype.K=function(u,f,g,E){return this.i.add(String(u),f,!0,g,E)};function Xt(u,f,g,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let F=!0;for(let $=0;$<f.length;++$){const Z=f[$];if(Z&&!Z.da&&Z.capture==g){const ye=Z.listener,ct=Z.ha||Z.src;Z.fa&&B(u.i,Z),F=ye.call(ct,E)!==!1&&F}}return F&&!E.defaultPrevented}function ON(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(u,f||0)}function k0(u){u.g=ON(()=>{u.g=null,u.i&&(u.i=!1,k0(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class FN extends T{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:k0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(u){T.call(this),this.h=u,this.g={}}p(ro,T);var _0=[];function N0(u){ie(u.g,function(f,g){this.g.hasOwnProperty(g)&&q(f)},u),u.g={}}ro.prototype.N=function(){ro.Z.N.call(this),N0(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bu=o.JSON.stringify,BN=o.JSON.parse,UN=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function E0(){}function T0(){}var io={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Uu(){A.call(this,"d")}p(Uu,A);function $u(){A.call(this,"c")}p($u,A);var li={},C0=null;function Ja(){return C0=C0||new $e}li.Ia="serverreachability";function S0(u){A.call(this,li.Ia,u)}p(S0,A);function so(u){const f=Ja();lt(f,new S0(f))}li.STAT_EVENT="statevent";function j0(u,f){A.call(this,li.STAT_EVENT,u),this.stat=f}p(j0,A);function Dt(u){const f=Ja();lt(f,new j0(f,u))}li.Ja="timingevent";function I0(u,f){A.call(this,li.Ja,u),this.size=f}p(I0,A);function oo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},f)}function ao(){this.g=!0}ao.prototype.ua=function(){this.g=!1};function $N(u,f,g,E,F,$){u.info(function(){if(u.g)if($){var Z="",ye=$.split("&");for(let ze=0;ze<ye.length;ze++){var ct=ye[ze].split("=");if(ct.length>1){const mt=ct[0];ct=ct[1];const An=mt.split("_");Z=An.length>=2&&An[1]=="type"?Z+(mt+"="+ct+"&"):Z+(mt+"=redacted&")}}}else Z=null;else Z=$;return"XMLHTTP REQ ("+E+") [attempt "+F+"]: "+f+`
`+g+`
`+Z})}function WN(u,f,g,E,F,$,Z){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+F+"]: "+f+`
`+g+`
`+$+" "+Z})}function Ki(u,f,g,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+HN(u,g)+(E?" "+E:"")})}function qN(u,f){u.info(function(){return"TIMEOUT: "+f})}ao.prototype.info=function(){};function HN(u,f){if(!u.g)return f;if(!f)return null;try{const $=JSON.parse(f);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var g=$[u];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var F=E[0];if(F!="noop"&&F!="stop"&&F!="close")for(let Z=1;Z<E.length;Z++)E[Z]=""}}}}return Bu($)}catch{return f}}var Za={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},z0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},A0;function Wu(){}p(Wu,E0),Wu.prototype.g=function(){return new XMLHttpRequest},A0=new Wu;function lo(u){return encodeURIComponent(String(u))}function GN(u){var f=1;u=u.split(":");const g=[];for(;f>0&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function xr(u,f,g,E){this.j=u,this.i=f,this.l=g,this.S=E||1,this.V=new ro(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new P0}function P0(){this.i=null,this.g="",this.h=!1}var R0={},qu={};function Hu(u,f,g){u.M=1,u.A=tl(zn(f)),u.u=g,u.R=!0,D0(u,null)}function D0(u,f){u.F=Date.now(),el(u),u.B=zn(u.A);var g=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),K0(g.i,"t",E),u.C=0,g=u.j.L,u.h=new P0,u.g=hg(u.j,g?f:null,!u.u),u.P>0&&(u.O=new FN(d(u.Y,u,u.g),u.P)),f=u.V,g=u.g,E=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(_0[0]=F.toString()),F=_0);for(let $=0;$<F.length;$++){const Z=O(g,F[$],E||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=u.J?ue(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),so(),$N(u.i,u.v,u.B,u.l,u.S,u.u)}xr.prototype.ba=function(u){u=u.target;const f=this.O;f&&wr(u)==3?f.j():this.Y(u)},xr.prototype.Y=function(u){try{if(u==this.g)e:{const ye=wr(this.g),ct=this.g.ya(),ze=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||tg(this.g)))){this.K||ye!=4||ct==7||(ct==8||ze<=0?so(3):so(2)),Gu(this);var f=this.g.ca();this.X=f;var g=KN(this);if(this.o=f==200,WN(this.i,this.v,this.B,this.l,this.S,ye,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,F=this.g;if((E=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(E)){var $=E;break t}}$=null}if(u=$)Ki(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ku(this,u);else{this.o=!1,this.m=3,Dt(12),ci(this),co(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<g.length;)if(mt=QN(this,g),mt==qu){ye==4&&(this.m=4,Dt(14),u=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==R0){this.m=4,Dt(15),Ki(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Ki(this.i,this.l,mt,null),Ku(this,mt);if(V0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||g.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)Ki(this.i,this.l,g,"[Invalid Chunked Response]"),ci(this),co(this);else if(g.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),nd(Z),Z.P=!0,Dt(11))}}else Ki(this.i,this.l,g,null),Ku(this,g);ye==4&&ci(this),this.o&&!this.K&&(ye==4?lg(this.j,this):(this.o=!1,el(this)))}else cE(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),ci(this),co(this)}}}catch{}finally{}};function KN(u){if(!V0(u))return u.g.la();const f=tg(u.g);if(f==="")return"";let g="";const E=f.length,F=wr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ci(u),co(u),"";u.h.i=new o.TextDecoder}for(let $=0;$<E;$++)u.h.h=!0,g+=u.h.i.decode(f[$],{stream:!(F&&$==E-1)});return f.length=0,u.h.g+=g,u.C=0,u.h.g}function V0(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function QN(u,f){var g=u.C,E=f.indexOf(`
`,g);return E==-1?qu:(g=Number(f.substring(g,E)),isNaN(g)?R0:(E+=1,E+g>f.length?qu:(f=f.slice(E,E+g),u.C=E+g,f)))}xr.prototype.cancel=function(){this.K=!0,ci(this)};function el(u){u.T=Date.now()+u.H,M0(u,u.H)}function M0(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=oo(d(u.aa,u),f)}function Gu(u){u.D&&(o.clearTimeout(u.D),u.D=null)}xr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(qN(this.i,this.B),this.M!=2&&(so(),Dt(17)),ci(this),this.m=2,co(this)):M0(this,this.T-u)};function co(u){u.j.I==0||u.K||lg(u.j,u)}function ci(u){Gu(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,N0(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function Ku(u,f){try{var g=u.j;if(g.I!=0&&(g.g==u||Qu(g.h,u))){if(!u.L&&Qu(g.h,u)&&g.I==3){try{var E=g.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var F=E;if(F[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)ol(g),il(g);else break e;td(g),Dt(18)}}else g.xa=F[1],0<g.xa-g.K&&F[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=oo(d(g.Va,g),6e3));F0(g.h)<=1&&g.ta&&(g.ta=void 0)}else di(g,11)}else if((u.L||g.g==u)&&ol(g),!I(f))for(F=g.Ba.g.parse(f),f=0;f<F.length;f++){let ze=F[f];const mt=ze[0];if(!(mt<=g.K))if(g.K=mt,ze=ze[1],g.I==2)if(ze[0]=="c"){g.M=ze[1],g.ba=ze[2];const An=ze[3];An!=null&&(g.ka=An,g.j.info("VER="+g.ka));const hi=ze[4];hi!=null&&(g.za=hi,g.j.info("SVER="+g.za));const br=ze[5];br!=null&&typeof br=="number"&&br>0&&(E=1.5*br,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const kr=u.g;if(kr){const ll=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var $=E.h;$.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Yu($,$.h),$.h=null))}if(E.G){const rd=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;rd&&(E.wa=rd,Ve(E.J,E.G,rd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var Z=u;if(E.na=dg(E,E.L?E.ba:null,E.W),Z.L){B0(E.h,Z);var ye=Z,ct=E.O;ct&&(ye.H=ct),ye.D&&(Gu(ye),el(ye)),E.g=Z}else og(E);g.i.length>0&&sl(g)}else ze[0]!="stop"&&ze[0]!="close"||di(g,7);else g.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?di(g,7):ed(g):ze[0]!="noop"&&g.l&&g.l.qa(ze),g.A=0)}}so(4)}catch{}}var YN=class{constructor(u,f){this.g=u,this.map=f}};function L0(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function O0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function F0(u){return u.h?1:u.g?u.g.size:0}function Qu(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Yu(u,f){u.g?u.g.add(f):u.h=f}function B0(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}L0.prototype.cancel=function(){if(this.i=U0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function U0(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.G);return f}return y(u.i)}var $0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XN(u,f){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const E=u[g].indexOf("=");let F,$=null;E>=0?(F=u[g].substring(0,E),$=u[g].substring(E+1)):F=u[g],f(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function yr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof yr?(this.l=u.l,uo(this,u.j),this.o=u.o,this.g=u.g,ho(this,u.u),this.h=u.h,Xu(this,Q0(u.i)),this.m=u.m):u&&(f=String(u).match($0))?(this.l=!1,uo(this,f[1]||"",!0),this.o=fo(f[2]||""),this.g=fo(f[3]||"",!0),ho(this,f[4]),this.h=fo(f[5]||"",!0),Xu(this,f[6]||"",!0),this.m=fo(f[7]||"")):(this.l=!1,this.i=new mo(null,this.l))}yr.prototype.toString=function(){const u=[];var f=this.j;f&&u.push(po(f,W0,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(po(f,W0,!0),"@"),u.push(lo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(po(g,g.charAt(0)=="/"?eE:ZN,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",po(g,nE)),u.join("")},yr.prototype.resolve=function(u){const f=zn(this);let g=!!u.j;g?uo(f,u.j):g=!!u.o,g?f.o=u.o:g=!!u.g,g?f.g=u.g:g=u.u!=null;var E=u.h;if(g)ho(f,u.u);else if(g=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var F=f.h.lastIndexOf("/");F!=-1&&(E=f.h.slice(0,F+1)+E)}if(F=E,F==".."||F==".")E="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){E=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let Z=0;Z<F.length;){const ye=F[Z++];ye=="."?E&&Z==F.length&&$.push(""):ye==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),E&&Z==F.length&&$.push("")):($.push(ye),E=!0)}E=$.join("/")}else E=F}return g?f.h=E:g=u.i.toString()!=="",g?Xu(f,Q0(u.i)):g=!!u.m,g&&(f.m=u.m),f};function zn(u){return new yr(u)}function uo(u,f,g){u.j=g?fo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function ho(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function Xu(u,f,g){f instanceof mo?(u.i=f,rE(u.i,u.l)):(g||(f=po(f,tE)),u.i=new mo(f,u.l))}function Ve(u,f,g){u.i.set(f,g)}function tl(u){return Ve(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function fo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function po(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,JN),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function JN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var W0=/[#\/\?@]/g,ZN=/[#\?:]/g,eE=/[#\?]/g,tE=/[#\?@]/g,nE=/#/g;function mo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function ui(u){u.g||(u.g=new Map,u.h=0,u.i&&XN(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=mo.prototype,t.add=function(u,f){ui(this),this.i=null,u=Qi(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function q0(u,f){ui(u),f=Qi(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function H0(u,f){return ui(u),f=Qi(u,f),u.g.has(f)}t.forEach=function(u,f){ui(this),this.g.forEach(function(g,E){g.forEach(function(F){u.call(f,F,E,this)},this)},this)};function G0(u,f){ui(u);let g=[];if(typeof f=="string")H0(u,f)&&(g=g.concat(u.g.get(Qi(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)g=g.concat(u[f]);return g}t.set=function(u,f){return ui(this),this.i=null,u=Qi(this,u),H0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=G0(this,u),u.length>0?String(u[0]):f):f};function K0(u,f,g){q0(u,f),g.length>0&&(u.i=null,u.g.set(Qi(u,f),y(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var g=f[E];const F=lo(g);g=G0(this,g);for(let $=0;$<g.length;$++){let Z=F;g[$]!==""&&(Z+="="+lo(g[$])),u.push(Z)}}return this.i=u.join("&")};function Q0(u){const f=new mo;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function Qi(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function rE(u,f){f&&!u.j&&(ui(u),u.i=null,u.g.forEach(function(g,E){const F=E.toLowerCase();E!=F&&(q0(this,E),K0(this,F,g))},u)),u.j=f}function iE(u,f){const g=new ao;if(o.Image){const E=new Image;E.onload=h(vr,g,"TestLoadImage: loaded",!0,f,E),E.onerror=h(vr,g,"TestLoadImage: error",!1,f,E),E.onabort=h(vr,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=h(vr,g,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function sE(u,f){const g=new ao,E=new AbortController,F=setTimeout(()=>{E.abort(),vr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then($=>{clearTimeout(F),$.ok?vr(g,"TestPingServer: ok",!0,f):vr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),vr(g,"TestPingServer: error",!1,f)})}function vr(u,f,g,E,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),E(g)}catch{}}function oE(){this.g=new UN}function Ju(u){this.i=u.Sb||null,this.h=u.ab||!1}p(Ju,E0),Ju.prototype.g=function(){return new nl(this.i,this.h)};function nl(u,f){$e.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(nl,$e),t=nl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,xo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Y0(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Y0(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?go(this):xo(this),this.readyState==3&&Y0(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,go(this))},t.Na=function(u){this.g&&(this.response=u,go(this))},t.ga=function(){this.g&&go(this)};function go(u){u.readyState=4,u.l=null,u.j=null,u.B=null,xo(u)}t.setRequestHeader=function(u,f){this.A.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function xo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function X0(u){let f="";return ie(u,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Zu(u,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=X0(g),typeof u=="string"?g!=null&&lo(g):Ve(u,f,g))}function Ye(u){$e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ye,$e);var aE=/^https?$/i,lE=["POST","PUT"];t=Ye.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():A0.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch($){J0(this,$);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var F in E)g.set(F,E[F]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const $ of E.keys())g.set($,E.get($));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(lE,f,void 0)>=0)||E||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Z]of g)this.g.setRequestHeader($,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){J0(this,$)}};function J0(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,Z0(u),rl(u)}function Z0(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),rl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Ye.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?eg(this):this.Xa())},t.Xa=function(){eg(this)};function eg(u){if(u.h&&typeof s<"u"){if(u.v&&wr(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),wr(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=$===0){let Z=String(u.D).match($0)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),E=!aE.test(Z?Z.toLowerCase():"")}g=E}if(g)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var F=wr(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",Z0(u)}}finally{rl(u)}}}}function rl(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,f||lt(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function wr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return wr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),BN(f)}};function tg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cE(u){const f={};u=(u.g&&wr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(I(u[E]))continue;var g=GN(u[E]);const F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=f[F]||[];f[F]=$,$.push(g)}te(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yo(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function ng(u){this.za=0,this.i=[],this.j=new ao,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yo("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yo("baseRetryDelayMs",5e3,u),this.Za=yo("retryDelaySeedMs",1e4,u),this.Ta=yo("forwardChannelMaxRetries",2,u),this.va=yo("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new L0(u&&u.concurrentRequestLimit),this.Ba=new oE,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ng.prototype,t.ka=8,t.I=1,t.connect=function(u,f,g,E){Dt(0),this.W=u,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=dg(this,null,this.W),sl(this)};function ed(u){if(rg(u),u.I==3){var f=u.V++,g=zn(u.J);if(Ve(g,"SID",u.M),Ve(g,"RID",f),Ve(g,"TYPE","terminate"),vo(u,g),f=new xr(u,u.j,f),f.M=2,f.A=tl(zn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=hg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),el(f)}ug(u)}function il(u){u.g&&(nd(u),u.g.cancel(),u.g=null)}function rg(u){il(u),u.v&&(o.clearTimeout(u.v),u.v=null),ol(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function sl(u){if(!O0(u.h)&&!u.m){u.m=!0;var f=u.Ea;V||v(),M||(V(),M=!0),k.add(f,u),u.D=0}}function uE(u,f){return F0(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=oo(d(u.Ea,u,f),cg(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new xr(this,this.j,u);let $=this.o;if(this.U&&($?($=ue($),Ee($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=sg(this,F,f),g=zn(this.J),Ve(g,"RID",u),Ve(g,"CVER",22),this.G&&Ve(g,"X-HTTP-Session-Id",this.G),vo(this,g),$&&(this.R?f="headers="+lo(X0($))+"&"+f:this.u&&Zu(g,this.u,$)),Yu(this.h,F),this.Ra&&Ve(g,"TYPE","init"),this.S?(Ve(g,"$req",f),Ve(g,"SID","null"),F.U=!0,Hu(F,g,null)):Hu(F,g,f),this.I=2}}else this.I==3&&(u?ig(this,u):this.i.length==0||O0(this.h)||ig(this))};function ig(u,f){var g;f?g=f.l:g=u.V++;const E=zn(u.J);Ve(E,"SID",u.M),Ve(E,"RID",g),Ve(E,"AID",u.K),vo(u,E),u.u&&u.o&&Zu(E,u.u,u.o),g=new xr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),f&&(u.i=f.G.concat(u.i)),f=sg(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Yu(u.h,g),Hu(g,E,f)}function vo(u,f){u.H&&ie(u.H,function(g,E){Ve(f,E,g)}),u.l&&ie({},function(g,E){Ve(f,E,g)})}function sg(u,f,g){g=Math.min(u.i.length,g);const E=u.l?d(u.l.Ka,u.l,u):null;e:{var F=u.i;let ye=-1;for(;;){const ct=["count="+g];ye==-1?g>0?(ye=F[0].g,ct.push("ofs="+ye)):ye=0:ct.push("ofs="+ye);let ze=!0;for(let mt=0;mt<g;mt++){var $=F[mt].g;const An=F[mt].map;if($-=ye,$<0)ye=Math.max(0,F[mt].g-100),ze=!1;else try{$="req"+$+"_"||"";try{var Z=An instanceof Map?An:Object.entries(An);for(const[hi,br]of Z){let kr=br;l(br)&&(kr=Bu(br)),ct.push($+hi+"="+encodeURIComponent(kr))}}catch(hi){throw ct.push($+"type="+encodeURIComponent("_badmap")),hi}}catch{E&&E(An)}}if(ze){Z=ct.join("&");break e}}Z=void 0}return u=u.i.splice(0,g),f.G=u,Z}function og(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;V||v(),M||(V(),M=!0),k.add(f,u),u.A=0}}function td(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=oo(d(u.Da,u),cg(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,ag(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=oo(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),il(this),ag(this))};function nd(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function ag(u){u.g=new xr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=zn(u.na);Ve(f,"RID","rpc"),Ve(f,"SID",u.M),Ve(f,"AID",u.K),Ve(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ve(f,"TO",u.ia),Ve(f,"TYPE","xmlhttp"),vo(u,f),u.u&&u.o&&Zu(f,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=tl(zn(f)),g.u=null,g.R=!0,D0(g,u)}t.Va=function(){this.C!=null&&(this.C=null,il(this),td(this),Dt(19))};function ol(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function lg(u,f){var g=null;if(u.g==f){ol(u),nd(u),u.g=null;var E=2}else if(Qu(u.h,f))g=f.G,B0(u.h,f),E=1;else return;if(u.I!=0){if(f.o)if(E==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var F=u.D;E=Ja(),lt(E,new I0(E,g)),sl(u)}else og(u);else if(F=f.m,F==3||F==0&&f.X>0||!(E==1&&uE(u,f)||E==2&&td(u)))switch(g&&g.length>0&&(f=u.h,f.i=f.i.concat(g)),F){case 1:di(u,5);break;case 4:di(u,10);break;case 3:di(u,6);break;default:di(u,2)}}}function cg(u,f){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*f}function di(u,f){if(u.j.info("Error code "+f),f==2){var g=d(u.bb,u),E=u.Ua;const F=!E;E=new yr(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||uo(E,"https"),tl(E),F?iE(E.toString(),g):sE(E.toString(),g)}else Dt(2);u.I=0,u.l&&u.l.pa(f),ug(u),rg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function ug(u){if(u.I=0,u.ja=[],u.l){const f=U0(u.h);(f.length!=0||u.i.length!=0)&&(N(u.ja,f),N(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function dg(u,f,g){var E=g instanceof yr?zn(g):new yr(g);if(E.g!="")f&&(E.g=f+"."+E.g),ho(E,E.u);else{var F=o.location;E=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;const $=new yr(null);E&&uo($,E),f&&($.g=f),F&&ho($,F),g&&($.h=g),E=$}return g=u.G,f=u.wa,g&&f&&Ve(E,g,f),Ve(E,"VER",u.ka),vo(u,E),E}function hg(u,f,g){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new Ye(new Ju({ab:g})):new Ye(u.ma),f.Fa(u.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fg(){}t=fg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function al(){}al.prototype.g=function(u,f){return new Jt(u,f)};function Jt(u,f){$e.call(this),this.g=new ng(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!I(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!I(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Yi(this)}p(Jt,$e),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){ed(this.g)},Jt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Bu(u),u=g);f.i.push(new YN(f.Ya++,u)),f.I==3&&sl(f)},Jt.prototype.N=function(){this.g.l=null,delete this.j,ed(this.g),delete this.g,Jt.Z.N.call(this)};function pg(u){Uu.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}p(pg,Uu);function mg(){$u.call(this),this.status=1}p(mg,$u);function Yi(u){this.g=u}p(Yi,fg),Yi.prototype.ra=function(){lt(this.g,"a")},Yi.prototype.qa=function(u){lt(this.g,new pg(u))},Yi.prototype.pa=function(u){lt(this.g,new mg)},Yi.prototype.oa=function(){lt(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,e_=function(){return new al},Z2=function(){return Ja()},J2=li,If={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,Zl=Za,z0.COMPLETE="complete",X2=z0,T0.EventType=io,io.OPEN="a",io.CLOSE="b",io.ERROR="c",io.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Vo=T0,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,Y2=Ye}).apply(typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{});const lv="@firebase/firestore",cv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new zm("@firebase/firestore");function Zi(){return Oi.logLevel}function se(t,...e){if(Oi.logLevel<=Ne.DEBUG){const n=e.map(Om);Oi.debug(`Firestore (${Js}): ${t}`,...n)}}function pr(t,...e){if(Oi.logLevel<=Ne.ERROR){const n=e.map(Om);Oi.error(`Firestore (${Js}): ${t}`,...n)}}function Os(t,...e){if(Oi.logLevel<=Ne.WARN){const n=e.map(Om);Oi.warn(`Firestore (${Js}): ${t}`,...n)}}function Om(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,t_(t,r,n)}function t_(t,e,n){let r=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw pr(r),new Error(r)}function Ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||t_(e,i,r)}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class AP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PP{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new n_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class RP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new RP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kz(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=MP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function zf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Jd(i)===Jd(s)?we(i,s):Jd(i)?1:-1}return we(t.length,e.length)}const LP=55296,OP=57343;function Jd(t){const e=t.charCodeAt(0);return e>=LP&&e<=OP}function Fs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="__name__";class Dn{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Dn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return we(e.length,n.length)}static compareSegments(e,n){const r=Dn.isNumericId(e),i=Dn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Dn.extractNumericId(e).compare(Dn.extractNumericId(n)):zf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $r.fromString(e.substring(4,e.length-2))}}class Pe extends Dn{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const FP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Dn{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return FP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dv}static keyField(){return new _t([dv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Pe.fromString(e))}static fromName(e){return new de(Pe.fromString(e).popFirst(5))}static empty(){return new de(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BP(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hv(t){if(!de.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fv(t){if(de.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function Qr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cu(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ha(t,e){if(!i_(t))throw new ne(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ne(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=-62135596800,mv=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*mv);return new Oe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pv)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mv}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ha(e,Oe._jsonSchema))return new Oe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:ot("string",Oe._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new Oe(0,0))}static max(){return new me(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=-1;function UP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new Yr(i,de.empty(),e)}function $P(t){return new Yr(t.readTime,t.key,ja)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(me.min(),de.empty(),ja)}static max(){return new Yr(me.max(),de.empty(),ja)}}function WP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==qP)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function GP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Su.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function ju(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function KP(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="";function QP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gv(e)),e=YP(t.get(n),e);return gv(e)}function YP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case s_:n+="";break;default:n+=s}}return n}function gv(t){return t+s_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zl(this.root,e,this.comparator,!0)}}class zl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new En([])}unionWith(e){let n=new pt(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new a_("Invalid base64 string: "+s):s}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const XP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=XP.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jr(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="server_timestamp",c_="__type__",u_="__previous_value__",d_="__local_write_time__";function Um(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c_])==null?void 0:r.stringValue)===l_}function Iu(t){const e=t.mapValue.fields[u_];return Um(e)?Iu(e):e}function Ia(t){const e=Xr(t.mapValue.fields[d_].timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r,i,s,o,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const qc="(default)";class za{constructor(e,n){this.projectId=e,this.database=n||qc}static empty(){return new za("","")}get isDefaultDatabase(){return this.database===qc}isEqual(e){return e instanceof za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="__type__",ZP="__max__",Al={mapValue:{}},f_="__vector__",Hc="value";function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Um(t)?4:tR(t)?9007199254740991:eR(t)?10:11:fe(28295,{value:t})}function Gn(t,e){if(t===e)return!0;const n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ia(t).isEqual(Ia(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xr(i.timestampValue),l=Xr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Jr(i.bytesValue).isEqual(Jr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),l=et(s.doubleValue);return o===l?Wc(o)===Wc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Fs(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(xv(o)!==xv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Gn(o[c],l[c])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function Aa(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function Bs(t,e){if(t===e)return 0;const n=Zr(t),r=Zr(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=et(s.integerValue||s.doubleValue),c=et(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return vv(t.timestampValue,e.timestampValue);case 4:return vv(Ia(t),Ia(e));case 5:return zf(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Jr(s),c=Jr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=we(l[d],c[d]);if(h!==0)return h}return we(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=we(et(s.latitude),et(o.latitude));return l!==0?l:we(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,y,N,C;const l=s.fields||{},c=o.fields||{},d=(m=l[Hc])==null?void 0:m.arrayValue,h=(y=c[Hc])==null?void 0:y.arrayValue,p=we(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return p!==0?p:wv(d,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Al.mapValue&&o===Al.mapValue)return 0;if(s===Al.mapValue)return 1;if(o===Al.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=zf(c[p],h[p]);if(m!==0)return m;const y=Bs(l[c[p]],d[h[p]]);if(y!==0)return y}return we(c.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function vv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Xr(t),r=Xr(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function wv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Bs(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function Us(t){return Af(t)}function Af(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Af(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Af(n.fields[o])}`;return i+"}"}(t.mapValue):fe(61005,{value:t})}function ec(t){switch(Zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Iu(t);return e?16+ec(e):16;case 5:return 2*t.stringValue.length;case 6:return Jr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ec(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return $i(r.fields,(s,o)=>{i+=s.length+ec(o)}),i}(t.mapValue);default:throw fe(13486,{value:t})}}function bv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pf(t){return!!t&&"integerValue"in t}function $m(t){return!!t&&"arrayValue"in t}function kv(t){return!!t&&"nullValue"in t}function _v(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tc(t){return!!t&&"mapValue"in t}function eR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[h_])==null?void 0:r.stringValue)===f_}function ta(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ta(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ta(t.arrayValue.values[n]);return e}return{...t}}function tR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ta(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$i(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new un(ta(this.value))}}function p_(t){const e=[];return $i(t.fields,(n,r)=>{const i=new _t([n]);if(tc(r)){const s=p_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Pt(e,0,me.min(),me.min(),me.min(),un.empty(),0)}static newFoundDocument(e,n,r,i){return new Pt(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new Pt(e,2,n,me.min(),me.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,me.min(),me.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.position=e,this.inclusive=n}}function Nv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=Bs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ev(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function nR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{}class st extends m_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iR(e,n,r):n==="array-contains"?new aR(e,r):n==="in"?new lR(e,r):n==="not-in"?new cR(e,r):n==="array-contains-any"?new uR(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sR(e,r):new oR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bs(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends m_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new In(e,n)}matches(e){return g_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function g_(t){return t.op==="and"}function x_(t){return rR(t)&&g_(t)}function rR(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function Rf(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Us(t.value);if(x_(t))return t.filters.map(e=>Rf(e)).join(",");{const e=t.filters.map(n=>Rf(n)).join(",");return`${t.op}(${e})`}}function y_(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Gn(r.value,i.value)}(t,e):t instanceof In?function(r,i){return i instanceof In&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&y_(o,i.filters[l]),!0):!1}(t,e):void fe(19439)}function v_(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Us(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(v_).join(" ,")+"}"}(t):"Filter"}class iR extends st{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class sR extends st{constructor(e,n){super(e,"in",n),this.keys=w_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oR extends st{constructor(e,n){super(e,"not-in",n),this.keys=w_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function w_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class aR extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $m(n)&&Aa(n.arrayValue,this.value)}}class lR extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class cR extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Aa(this.value.arrayValue,n)}}class uR extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Tv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new dR(t,e,n,r,i,s,o)}function Wm(t){const e=ge(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Us(r)).join(",")),e.Te=n}return e.Te}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!y_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ev(t.startAt,e.startAt)&&Ev(t.endAt,e.endAt)}function Df(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hR(t,e,n,r,i,s,o,l){return new to(t,e,n,r,i,s,o,l)}function Hm(t){return new to(t)}function Cv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function b_(t){return t.collectionGroup!==null}function na(t){const e=ge(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pt(_t.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Pa(s,r))}),n.has(_t.keyField().canonicalString())||e.Ie.push(new Pa(_t.keyField(),r))}return e.Ie}function Un(t){const e=ge(t);return e.Ee||(e.Ee=fR(e,na(t))),e.Ee}function fR(t,e){if(t.limitType==="F")return Tv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pa(i.field,s)});const n=t.endAt?new Gc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gc(t.startAt.position,t.startAt.inclusive):null;return Tv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vf(t,e){const n=t.filters.concat([e]);return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mf(t,e,n){return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return qm(Un(t),Un(e))&&t.limitType===e.limitType}function k_(t){return`${Wm(Un(t))}|lt:${t.limitType}`}function es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>v_(i)).join(", ")}]`),ju(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Us(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Us(i)).join(",")),`Target(${r})`}(Un(t))}; limitType=${t.limitType})`}function Au(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of na(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const d=Nv(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,na(r),i)||r.endAt&&!function(o,l,c){const d=Nv(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,na(r),i))}(t,e)}function pR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __(t){return(e,n)=>{let r=!1;for(const i of na(t)){const s=mR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mR(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),d=l.data.field(s);return c!==null&&d!==null?Bs(c,d):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new Qe(de.comparator);function mr(){return gR}const N_=new Qe(de.comparator);function Mo(...t){let e=N_;for(const n of t)e=e.insert(n.key,n);return e}function E_(t){let e=N_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ei(){return ra()}function T_(){return ra()}function ra(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const xR=new Qe(de.comparator),yR=new pt(de.comparator);function be(...t){let e=yR;for(const n of t)e=e.add(n);return e}const vR=new pt(we);function wR(){return vR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function C_(t){return{integerValue:""+t}}function bR(t,e){return KP(e)?C_(e):Gm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this._=void 0}}function kR(t,e,n){return t instanceof Kc?function(i,s){const o={fields:{[c_]:{stringValue:l_},[d_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Um(s)&&(s=Iu(s)),s&&(o.fields[u_]=s),{mapValue:o}}(n,e):t instanceof Ra?j_(t,e):t instanceof Da?I_(t,e):function(i,s){const o=S_(i,s),l=Sv(o)+Sv(i.Ae);return Pf(o)&&Pf(i.Ae)?C_(l):Gm(i.serializer,l)}(t,e)}function _R(t,e,n){return t instanceof Ra?j_(t,e):t instanceof Da?I_(t,e):n}function S_(t,e){return t instanceof Qc?function(r){return Pf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Kc extends Pu{}class Ra extends Pu{constructor(e){super(),this.elements=e}}function j_(t,e){const n=z_(e);for(const r of t.elements)n.some(i=>Gn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Da extends Pu{constructor(e){super(),this.elements=e}}function I_(t,e){let n=z_(e);for(const r of t.elements)n=n.filter(i=>!Gn(i,r));return{arrayValue:{values:n}}}class Qc extends Pu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sv(t){return et(t.integerValue||t.doubleValue)}function z_(t){return $m(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ra&&i instanceof Ra||r instanceof Da&&i instanceof Da?Fs(r.elements,i.elements,Gn):r instanceof Qc&&i instanceof Qc?Gn(r.Ae,i.Ae):r instanceof Kc&&i instanceof Kc}(t.transform,e.transform)}class ER{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ru{}function A_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Km(t.key,$n.none()):new Ga(t.key,t.data,$n.none());{const n=t.data,r=un.empty();let i=new pt(_t.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qi(t.key,r,new En(i.toArray()),$n.none())}}function TR(t,e,n){t instanceof Ga?function(i,s,o){const l=i.value.clone(),c=Iv(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(i,s,o){if(!nc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Iv(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(P_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ia(t,e,n,r){return t instanceof Ga?function(s,o,l,c){if(!nc(s.precondition,o))return l;const d=s.value.clone(),h=zv(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(s,o,l,c){if(!nc(s.precondition,o))return l;const d=zv(s.fieldTransforms,c,o),h=o.data;return h.setAll(P_(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return nc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function CR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=S_(r.transform,i||null);s!=null&&(n===null&&(n=un.empty()),n.set(r.field,s))}return n||null}function jv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fs(r,i,(s,o)=>NR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ga extends Ru{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qi extends Ru{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function P_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Iv(t,e,n){const r=new Map;Ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,_R(o,l,n[i]))}return r}function zv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,kR(s,o,e))}return r}class Km extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SR extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&TR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=T_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=A_(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(n,r)=>jv(n,r))&&Fs(this.baseMutations,e.baseMutations,(n,r)=>jv(n,r))}}class Qm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return xR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Qm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,_e;function AR(t){switch(t){case K.OK:return fe(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function R_(t){if(t===void 0)return pr("GRPC error has no .code"),K.UNKNOWN;switch(t){case nt.OK:return K.OK;case nt.CANCELLED:return K.CANCELLED;case nt.UNKNOWN:return K.UNKNOWN;case nt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case nt.INTERNAL:return K.INTERNAL;case nt.UNAVAILABLE:return K.UNAVAILABLE;case nt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case nt.NOT_FOUND:return K.NOT_FOUND;case nt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case nt.ABORTED:return K.ABORTED;case nt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case nt.DATA_LOSS:return K.DATA_LOSS;default:return fe(39323,{code:t})}}(_e=nt||(nt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new $r([4294967295,4294967295],0);function Av(t){const e=PR().encode(t),n=new Q2;return n.update(e),new Uint8Array(n.digest())}function Pv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $r([n,r],0),new $r([i,s],0)]}class Ym{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lo(`Invalid padding: ${n}`);if(r<0)throw new Lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$r.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply($r.fromNumber(r)));return i.compare(RR)===1&&(i=new $r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Av(e),[r,i]=Pv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ym(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Av(e),[r,i]=Pv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ka.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Du(me.min(),i,new Qe(we),mr(),be())}}class Ka{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ka(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class D_{constructor(e,n){this.targetId=e,this.Ce=n}}class V_{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rv{constructor(){this.ve=0,this.Fe=Dv(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),r=be();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new Ka(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Dv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class DR{constructor(e){this.Ge=e,this.ze=new Map,this.je=mr(),this.Je=Pl(),this.He=Pl(),this.Ye=new Qe(we)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Df(s))if(r===0){const o=new de(s.path);this.et(n,o,Pt.newNoDocument(o,me.min()))}else Ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Jr(r).toUint8Array()}catch(c){if(c instanceof a_)return Os("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ym(o,i,s)}catch(c){return Os(c instanceof Lo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Df(l.target)){const c=new de(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Pt.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=be();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Du(e,n,this.Ye,this.je,r);return this.je=mr(),this.Je=Pl(),this.He=Pl(),this.Ye=new Qe(we),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(we),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(we),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pl(){return new Qe(de.comparator)}function Dv(){return new Qe(de.comparator)}const VR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LR={and:"AND",or:"OR"};class OR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lf(t,e){return t.useProto3Json||ju(e)?e:{value:e}}function Yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FR(t,e){return Yc(t,e.toTimestamp())}function Wn(t){return Ce(!!t,49232),me.fromTimestamp(function(n){const r=Xr(n);return new Oe(r.seconds,r.nanos)}(t))}function Xm(t,e){return Of(t,e).canonicalString()}function Of(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L_(t){const e=Pe.fromString(t);return Ce($_(e),10190,{key:e.toString()}),e}function Ff(t,e){return Xm(t.databaseId,e.path)}function Zd(t,e){const n=L_(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(F_(n))}function O_(t,e){return Xm(t.databaseId,e)}function BR(t){const e=L_(t);return e.length===4?Pe.emptyPath():F_(e)}function Bf(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F_(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Vv(t,e,n){return{name:Ff(t,e),fields:n.value.mapValue.fields}}function UR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:fe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),Ct.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?K.UNKNOWN:R_(d.code);return new ne(h,d.message||"")}(o);n=new V_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zd(t,r.document.name),s=Wn(r.document.updateTime),o=r.document.createTime?Wn(r.document.createTime):me.min(),l=new un({mapValue:{fields:r.document.fields}}),c=Pt.newFoundDocument(i,s,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new rc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Zd(t,r.document),s=r.readTime?Wn(r.readTime):me.min(),o=Pt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new rc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Zd(t,r.document),s=r.removedTargetIds||[];n=new rc([],s,i,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new zR(i,s),l=r.targetId;n=new D_(l,o)}}return n}function $R(t,e){let n;if(e instanceof Ga)n={update:Vv(t,e.key,e.value)};else if(e instanceof Km)n={delete:Ff(t,e.key)};else if(e instanceof qi)n={update:Vv(t,e.key,e.data),updateMask:JR(e.fieldMask)};else{if(!(e instanceof SR))return fe(16599,{Vt:e.type});n={verify:Ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ra)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Da)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:FR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)}(t,e.precondition)),n}function WR(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Wn(i.updateTime):Wn(s);return o.isEqual(me.min())&&(o=Wn(s)),new ER(o,i.transformResults||[])}(n,e))):[]}function qR(t,e){return{documents:[O_(t,e.path)]}}function HR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O_(t,i);const s=function(d){if(d.length!==0)return U_(In.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:ts(m.field),direction:QR(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Lf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function GR(t){let e=BR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=B_(p);return m instanceof In&&x_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(N){return new Pa(ns(N.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,ju(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,y=p.values||[];return new Gc(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,y=p.values||[];return new Gc(y,m)}(n.endAt)),hR(e,i,o,s,l,"F",c,d)}function KR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function B_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ns(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ns(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ns(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ns(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(r=>B_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function QR(t){return VR[t]}function YR(t){return MR[t]}function XR(t){return LR[t]}function ts(t){return{fieldPath:t.canonicalString()}}function ns(t){return _t.fromServerFormat(t.fieldPath)}function U_(t){return t instanceof st?function(n){if(n.op==="=="){if(_v(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NAN"}};if(kv(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_v(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NAN"}};if(kv(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(n.field),op:YR(n.op),value:n.value}}}(t):t instanceof In?function(n){const r=n.getFilters().map(i=>U_(i));return r.length===1?r[0]:{compositeFilter:{op:XR(n.op),filters:r}}}(t):fe(54877,{filter:t})}function JR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r,i,s=me.min(),o=me.min(),l=Ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.yt=e}}function e3(t){const e=GR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.Cn=new n3}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Yr.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class n3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W_=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(W_,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $s(0)}static cr(){return new $s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="LruGarbageCollector",r3=1048576;function Ov([t,e],[n,r]){const i=we(t,n);return i===0?we(e,r):i}class i3{constructor(e){this.Ir=e,this.buffer=new pt(Ov),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ov(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class s3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(Lv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){eo(n)?se(Lv,"Ignoring IndexedDB error during garbage collection: ",n):await Zs(n)}await this.Vr(3e5)})}}class o3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Su.ce);const r=new i3(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Mv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Zi()<=Ne.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function a3(t,e){return new o3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ia(r.mutation,i,En.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const i=Ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mo();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=mr();const o=ra(),l=function(){return ra()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof qi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),ia(h.mutation,d,h.mutation.getFieldMask(),Oe.now())):o.set(d.key,En.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new c3(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ra();let i=new Qe((o,l)=>o-l),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||En.empty();h=l.applyToLocalView(d,h),r.set(c,h);const p=(i.get(l.batchId)||be()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=T_();h.forEach(m=>{if(!s.has(m)){const y=A_(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):b_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(Ei());let l=ja,c=s;return o.next(d=>Q.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,be())).next(h=>({batchId:l,changes:E_(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=Mo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Mo();return this.indexManager.getCollectionParents(e,s).next(l=>Q.forEach(l,c=>{const d=function(p,m){return new to(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Pt.newInvalidDocument(h)))});let l=Mo();return o.forEach((c,d)=>{const h=s.get(c);h!==void 0&&ia(h.mutation,d,En.empty(),Oe.now()),Au(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Wn(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:e3(i.bundledQuery),readTime:Wn(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.overlays=new Qe(de.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ei();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=Ei(),s=n.length+1,o=new de(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Qe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Ei(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ei(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return Q.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IR(n,r));let s=this.qr.get(n);s===void 0&&(s=be(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Qr=new pt(xt.$r),this.Ur=new pt(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new xt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new de(new Pe([])),r=new xt(n,e),i=new xt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new Pe([])),r=new xt(n,e),i=new xt(n,e+1);let s=be();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||we(e.Yr,n.Yr)}static Kr(e,n){return we(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(xt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jR(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new xt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Bm:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(we);return n.forEach(i=>{const s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const o=new xt(new de(s),0);let l=new pt(we);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},o),Q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(n.mutations,i=>{const s=new xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new xt(n,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.ri=e,this.docs=function(){return new Qe(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=mr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pt.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=mr();const o=n.path,l=new de(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||WP($P(h),r)<=0||(i.has(h.key)||Au(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe(9500)}ii(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new g3(this)}getSize(e){return Q.resolve(this.size)}}class g3 extends l3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.persistence=e,this.si=new Wi(n=>Wm(n),qm),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new Jm,this.targetCount=0,this.ai=$s.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $s(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Su(0),this.li=!1,this.li=!0,this.hi=new f3,this.referenceDelegate=e(this),this.Pi=new x3(this),this.indexManager=new t3,this.remoteDocumentCache=function(i){return new m3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new ZR(n),this.Ii=new d3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new p3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new y3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class y3 extends HP{constructor(e){super(),this.currentSequenceNumber=e}}class Zm{constructor(e){this.persistence=e,this.Ri=new Jm,this.Vi=null}static mi(e){return new Zm(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{const i=de.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Xc{constructor(e,n){this.persistence=e,this.pi=new Wi(r=>QP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=a3(this,n)}static mi(e,n){return new Xc(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?Q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ec(e.data.value)),n}br(e,n,r){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=be(),i=be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new e0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return WI()?8:GP(BI())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new v3;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Zi()<=Ne.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Zi()<=Ne.DEBUG&&se("QueryEngine","Query:",es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Zi()<=Ne.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(n))):Q.resolve())}ys(e,n){if(Cv(n))return Q.resolve(null);let r=Un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mf(n,null,"F"),r=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=be(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,Mf(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,i){return Cv(n)||i.isEqual(me.min())?Q.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?Q.resolve(null):(Zi()<=Ne.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(n)),this.vs(e,o,n,UP(i,ja)).next(l=>l))})}Ds(e,n){let r=new pt(__(e));return n.forEach((i,s)=>{Au(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Zi()<=Ne.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",es(n)),this.ps.getDocumentsMatchingQuery(e,n,Yr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="LocalStore",b3=3e8;class k3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Qe(we),this.xs=new Wi(s=>Wm(s),qm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function _3(t,e,n,r){return new k3(t,e,n,r)}async function H_(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=be();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of s){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function N3(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const p=d.batch,m=p.keys();let y=Q.resolve();return m.forEach(N=>{y=y.next(()=>h.getEntry(c,N)).next(C=>{const z=d.docVersions.get(N);Ce(z!==null,48541),C.version.compareTo(z)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),h.addEntry(C)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=be();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function G_(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function E3(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ct.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(C,z,b){return C.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=b3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(s,y))});let c=mr(),d=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(T3(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return Q.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Ms=i,s))}function T3(t,e,n){let r=be(),i=be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=mr();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(me.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):se(t0,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function C3(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Bm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function S3(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Uf(t,e,n){const r=ge(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!eo(o))throw o;se(t0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Fv(t,e,n){const r=ge(t);let i=me.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const p=ge(c),m=p.xs.get(h);return m!==void 0?Q.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)}(r,o,Un(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?s:be())).next(l=>(j3(r,pR(e),l),{documents:l,Qs:s})))}function j3(t,e,n){let r=t.Os.get(e)||me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Bv{constructor(){this.activeTargetIds=wR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I3{constructor(){this.Mo=new Bv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="ConnectivityMonitor";class $v{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(Uv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(Uv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=null;function $f(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="RestConnection",A3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===qc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=$f(),l=this.zo(e,n.toUriEncodedString());se(eh,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:d}=new URL(l),h=Im(d);return this.Jo(e,l,c,r,h).then(p=>(se(eh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Os(eh,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=A3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class D3 extends P3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=$f();return new Promise((l,c)=>{const d=new Y2;d.setWithCredentials(!0),d.listenOnce(X2.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Zl.NO_ERROR:const p=d.getResponseJson();se(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Zl.TIMEOUT:se(It,`RPC '${e}' ${o} timed out`),c(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case Zl.HTTP_ERROR:const m=d.getStatus();if(se(It,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const N=y==null?void 0:y.error;if(N&&N.status&&N.message){const C=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(N.status);c(new ne(C,N.message))}else c(new ne(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(K.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{se(It,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);se(It,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=$f(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=e_(),l=Z2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=s.join("");se(It,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=o.createWebChannel(h,c);this.I_(p);let m=!1,y=!1;const N=new R3({Yo:z=>{y?se(It,`Not sending because RPC '${e}' stream ${i} is closed:`,z):(m||(se(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),se(It,`RPC '${e}' stream ${i} sending:`,z),p.send(z))},Zo:()=>p.close()}),C=(z,b,x)=>{z.listen(b,w=>{try{x(w)}catch(R){setTimeout(()=>{throw R},0)}})};return C(p,Vo.EventType.OPEN,()=>{y||(se(It,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),C(p,Vo.EventType.CLOSE,()=>{y||(y=!0,se(It,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(p))}),C(p,Vo.EventType.ERROR,z=>{y||(y=!0,Os(It,`RPC '${e}' stream ${i} transport errored. Name:`,z.name,"Message:",z.message),N.a_(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),C(p,Vo.EventType.MESSAGE,z=>{var b;if(!y){const x=z.data[0];Ce(!!x,16349);const w=x,R=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(R){se(It,`RPC '${e}' stream ${i} received error:`,R);const V=R.status;let M=function(_){const T=nt[_];if(T!==void 0)return R_(T)}(V),k=R.message;M===void 0&&(M=K.INTERNAL,k="Unknown error status: "+V+" with message "+R.message),y=!0,N.a_(new ne(M,k)),p.close()}else se(It,`RPC '${e}' stream ${i} received:`,x),N.u_(x)}}),C(l,J2.STAT_EVENT,z=>{z.stat===If.PROXY?se(It,`RPC '${e}' stream ${i} detected buffering proxy`):z.stat===If.NOPROXY&&se(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return new OR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="PersistentStream";class Q_{constructor(e,n,r,i,s,o,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new K_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(Wv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(Wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V3 extends Q_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=UR(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Wn(o.readTime):me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bf(this.serializer),n.addTarget=function(s,o){let l;const c=o.target;if(l=Df(c)?{documents:qR(s,c)}:{query:HR(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=M_(s,o.resumeToken);const d=Lf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(me.min())>0){l.readTime=Yc(s,o.snapshotVersion.toTimestamp());const d=Lf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=KR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bf(this.serializer),n.removeTarget=e,this.q_(n)}}class M3 extends Q_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=WR(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$R(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{}class O3 extends L3{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Of(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(K.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Of(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class F3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pr(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="RemoteStore";class B3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Hi(this)&&(se(Fi,"Restarting streams for network reachability change."),await async function(c){const d=ge(c);d.Ea.add(4),await Qa(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Mu(d)}(this))})}),this.Ra=new F3(r,i)}}async function Mu(t){if(Hi(t))for(const e of t.da)await e(!0)}async function Qa(t){for(const e of t.da)await e(!1)}function Y_(t,e){const n=ge(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),s0(n)?i0(n):no(n).O_()&&r0(n,e))}function n0(t,e){const n=ge(t),r=no(n);n.Ia.delete(e),r.O_()&&X_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Hi(n)&&n.Ra.set("Unknown"))}function r0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}no(t).Y_(e)}function X_(t,e){t.Va.Ue(e),no(t).Z_(e)}function i0(t){t.Va=new DR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),no(t).start(),t.Ra.ua()}function s0(t){return Hi(t)&&!no(t).x_()&&t.Ia.size>0}function Hi(t){return ge(t).Ea.size===0}function J_(t){t.Va=void 0}async function U3(t){t.Ra.set("Online")}async function $3(t){t.Ia.forEach((e,n)=>{r0(t,e)})}async function W3(t,e){J_(t),s0(t)?(t.Ra.ha(e),i0(t)):t.Ra.set("Unknown")}async function q3(t,e,n){if(t.Ra.set("Online"),e instanceof V_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){se(Fi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jc(t,r)}else if(e instanceof rc?t.Va.Ze(e):e instanceof D_?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const r=await G_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),X_(s,c);const p=new Ar(h.target,c,d,h.sequenceNumber);r0(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se(Fi,"Failed to raise snapshot:",r),await Jc(t,r)}}async function Jc(t,e,n){if(!eo(e))throw e;t.Ea.add(1),await Qa(t),t.Ra.set("Offline"),n||(n=()=>G_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(Fi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Mu(t)})}function Z_(t,e){return e().catch(n=>Jc(t,n,e))}async function Lu(t){const e=ge(t),n=ei(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bm;for(;H3(e);)try{const i=await C3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,G3(e,i)}catch(i){await Jc(e,i)}eN(e)&&tN(e)}function H3(t){return Hi(t)&&t.Ta.length<10}function G3(t,e){t.Ta.push(e);const n=ei(t);n.O_()&&n.X_&&n.ea(e.mutations)}function eN(t){return Hi(t)&&!ei(t).x_()&&t.Ta.length>0}function tN(t){ei(t).start()}async function K3(t){ei(t).ra()}async function Q3(t){const e=ei(t);for(const n of t.Ta)e.ea(n.mutations)}async function Y3(t,e,n){const r=t.Ta.shift(),i=Qm.from(r,e,n);await Z_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Lu(t)}async function X3(t,e){e&&ei(t).X_&&await async function(r,i){if(function(o){return AR(o)&&o!==K.ABORTED}(i.code)){const s=r.Ta.shift();ei(r).B_(),await Z_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Lu(r)}}(t,e),eN(t)&&tN(t)}async function qv(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),se(Fi,"RemoteStore received new credentials");const r=Hi(n);n.Ea.add(3),await Qa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Mu(n)}async function J3(t,e){const n=ge(t);e?(n.Ea.delete(2),await Mu(n)):e||(n.Ea.add(2),await Qa(n),n.Ra.set("Unknown"))}function no(t){return t.ma||(t.ma=function(n,r,i){const s=ge(n);return s.sa(),new V3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:U3.bind(null,t),t_:$3.bind(null,t),r_:W3.bind(null,t),H_:q3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),s0(t)?i0(t):t.Ra.set("Unknown")):(await t.ma.stop(),J_(t))})),t.ma}function ei(t){return t.fa||(t.fa=function(n,r,i){const s=ge(n);return s.sa(),new M3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:K3.bind(null,t),r_:X3.bind(null,t),ta:Q3.bind(null,t),na:Y3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Lu(t)):(await t.fa.stop(),t.Ta.length>0&&(se(Fi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new o0(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a0(t,e){if(pr("AsyncQueue",`${e}: ${t}`),eo(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{static emptySet(e){return new Ss(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=Mo(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ga=new Qe(de.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ws{constructor(e,n,r,i,s,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ws(e,n,Ss.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class eD{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ge(n),s=i.queries;i.queries=Gv(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function Gv(){return new Wi(t=>k_(t),zu)}async function nN(t,e){const n=ge(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Z3,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=a0(o,`Initialization of query '${es(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&l0(n)}async function rN(t,e){const n=ge(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tD(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&l0(n)}function nD(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function l0(t){t.Ca.forEach(e=>{e.next()})}var Wf,Kv;(Kv=Wf||(Wf={})).Ma="default",Kv.Cache="cache";class iN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.key=e}}class oN{constructor(e){this.key=e}}class rD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=__(e),this.tu=new Ss(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Hv,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),y=Au(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let z=!1;m&&y?m.data.isEqual(y.data)?N!==C&&(r.track({type:3,doc:y}),z=!0):this.su(m,y)||(r.track({type:2,doc:y}),z=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),z=!0):m&&!y&&(r.track({type:1,doc:m}),z=!0,(c||d)&&(l=!0)),z&&(y?(o=o.add(y),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(y,N){const C=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:z})}};return C(y)-C(N)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Ws(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new oN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new sN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ws.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const c0="SyncEngine";class iD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sD{constructor(e){this.key=e,this.hu=!1}}class oD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Wi(l=>k_(l),zu),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(de.comparator),this.Au=new Map,this.Ru=new Jm,this.Vu={},this.mu=new Map,this.fu=$s.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aD(t,e,n=!0){const r=hN(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await aN(r,e,n,!0),i}async function lD(t,e){const n=hN(t);await aN(n,e,!0,!1)}async function aN(t,e,n,r){const i=await S3(t.localStore,Un(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await cD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Y_(t.remoteStore,i),l}async function cD(t,e,n,r,i){t.pu=(p,m,y)=>async function(C,z,b,x){let w=z.view.ru(b);w.Cs&&(w=await Fv(C.localStore,z.query,!1).then(({documents:k})=>z.view.ru(k,w)));const R=x&&x.targetChanges.get(z.targetId),V=x&&x.targetMismatches.get(z.targetId)!=null,M=z.view.applyChanges(w,C.isPrimaryClient,R,V);return Yv(C,z.targetId,M.au),M.snapshot}(t,p,m,y);const s=await Fv(t.localStore,e,!0),o=new rD(e,s.Qs),l=o.ru(s.documents),c=Ka.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);Yv(t,n,d.au);const h=new iD(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function uD(t,e,n){const r=ge(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!zu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Uf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&n0(r.remoteStore,i.targetId),qf(r,i.targetId)}).catch(Zs)):(qf(r,i.targetId),await Uf(r.localStore,i.targetId,!0))}async function dD(t,e){const n=ge(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),n0(n.remoteStore,r.targetId))}async function hD(t,e,n){const r=vD(t);try{const i=await function(o,l){const c=ge(o),d=Oe.now(),h=l.reduce((y,N)=>y.add(N.key),be());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let N=mr(),C=be();return c.Ns.getEntries(y,h).next(z=>{N=z,N.forEach((b,x)=>{x.isValidDocument()||(C=C.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,N)).next(z=>{p=z;const b=[];for(const x of l){const w=CR(x,p.get(x.key).overlayedDocument);w!=null&&b.push(new qi(x.key,w,p_(w.value.mapValue),$n.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,b,l)}).next(z=>{m=z;const b=z.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(y,z.batchId,b)})}).then(()=>({batchId:m.batchId,changes:E_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Qe(we)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await Ya(r,i.changes),await Lu(r.remoteStore)}catch(i){const s=a0(i,"Failed to persist write");n.reject(s)}}async function lN(t,e){const n=ge(t);try{const r=await E3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ce(o.hu,14607):i.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))}),await Ya(n,r,e)}catch(r){await Zs(r)}}function Qv(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ge(o);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(d=!0)}),d&&l0(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fD(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Qe(de.comparator);o=o.insert(s,Pt.newNoDocument(s,me.min()));const l=be().add(s),c=new Du(me.min(),new Map,new Qe(we),o,l);await lN(r,c),r.du=r.du.remove(s),r.Au.delete(e),u0(r)}else await Uf(r.localStore,e,!1).then(()=>qf(r,e,n)).catch(Zs)}async function pD(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await N3(n.localStore,e);uN(n,r,null),cN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ya(n,i)}catch(i){await Zs(i)}}async function mD(t,e,n){const r=ge(t);try{const i=await function(o,l){const c=ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(Ce(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);uN(r,e,n),cN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ya(r,i)}catch(i){await Zs(i)}}function cN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uN(t,e,n){const r=ge(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||dN(t,r)})}function dN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(n0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),u0(t))}function Yv(t,e,n){for(const r of n)r instanceof sN?(t.Ru.addReference(r.key,e),gD(t,r)):r instanceof oN?(se(c0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||dN(t,r.key)):fe(19791,{wu:r})}function gD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(se(c0,"New document in limbo: "+n),t.Eu.add(r),u0(t))}function u0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(Pe.fromString(e)),r=t.fu.next();t.Au.set(r,new sD(n)),t.du=t.du.insert(n,r),Y_(t.remoteStore,new Ar(Un(Hm(n.path)),r,"TargetPurposeLimboResolution",Su.ce))}}async function Ya(t,e,n){const r=ge(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=e0.As(c.targetId,d);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,d){const h=ge(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(d,m=>Q.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>Q.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!eo(p))throw p;se(t0,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const y=h.Ms.get(m),N=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(m,C)}}}(r.localStore,s))}async function xD(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){se(c0,"User change. New user:",e.toKey());const r=await H_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new ne(K.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ya(n,r.Ls)}}function yD(t,e){const n=ge(t),r=n.Au.get(e);if(r&&r.hu)return be().add(r.key);{let i=be();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function hN(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fD.bind(null,e),e.Pu.H_=tD.bind(null,e.eventManager),e.Pu.yu=nD.bind(null,e.eventManager),e}function vD(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mD.bind(null,e),e}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _3(this.persistence,new w3,e.initialUser,this.serializer)}Cu(e){return new q_(Zm.mi,this.serializer)}Du(e){return new I3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class wD extends Zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ce(this.persistence.referenceDelegate instanceof Xc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new s3(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new q_(r=>Xc.mi(r,n),this.serializer)}}class Hf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xD.bind(null,this.syncEngine),await J3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eD}()}createDatastore(e){const n=Vu(e.databaseInfo.databaseId),r=function(s){return new D3(s)}(e.databaseInfo);return function(s,o,l,c){return new O3(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new B3(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Qv(this.syncEngine,n,0),function(){return $v.v()?new $v:new z3}())}createSyncEngine(e,n){return function(i,s,o,l,c,d,h){const p=new oD(i,s,o,l,c,d);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ge(i);se(Fi,"RemoteStore shutting down."),s.Ea.add(5),await Qa(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hf.provider={build:()=>new Hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="FirestoreClient";class bD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zt.UNAUTHENTICATED,this.clientId=Fm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se(ti,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(ti,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=a0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nh(t,e){t.asyncQueue.verifyOperationInProgress(),se(ti,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await H_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kD(t);se(ti,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qv(e.remoteStore,i)),t._onlineComponents=e}async function kD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(ti,"Using user provided OfflineComponentProvider");try{await nh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),await nh(t,new Zc)}}else se(ti,"Using default OfflineComponentProvider"),await nh(t,new wD(void 0));return t._offlineComponents}async function pN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(ti,"Using user provided OnlineComponentProvider"),await Xv(t,t._uninitializedComponentsProvider._online)):(se(ti,"Using default OnlineComponentProvider"),await Xv(t,new Hf))),t._onlineComponents}function _D(t){return pN(t).then(e=>e.syncEngine)}async function mN(t){const e=await pN(t),n=e.eventManager;return n.onListen=aD.bind(null,e.syncEngine),n.onUnlisten=uD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dD.bind(null,e.syncEngine),n}function ND(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const h=new fN({next:m=>{h.Nu(),o.enqueueAndForget(()=>rN(s,p));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new iN(Hm(l.path),h,{includeMetadataChanges:!0,qa:!0});return nN(s,p)}(await mN(t),t.asyncQueue,e,n,r)),r.promise}function ED(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const h=new fN({next:m=>{h.Nu(),o.enqueueAndForget(()=>rN(s,p)),m.fromCache&&c.source==="server"?d.reject(new ne(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new iN(l,h,{includeMetadataChanges:!0,qa:!0});return nN(s,p)}(await mN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="firestore.googleapis.com",Zv=!0;class e1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xN,this.ssl=Zv}else this.host=e.host,this.ssl=e.ssl??Zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r3)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zP;switch(r.type){case"firstParty":return new DP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jv.get(n);r&&(se("ComponentProvider","Removing Datastore"),Jv.delete(n),r.terminate())}(this),Promise.resolve()}}function TD(t,e,n,r={}){var d;t=Qr(t,Ou);const i=Im(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(VI(`https://${l}`),FI("Firestore",!0)),s.host!==xN&&s.host!==l&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!Ca(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=zt.MOCK_USER;else{h=MI(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ne(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(m)}t._authCredentials=new AP(new n_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ha(n,at._jsonSchema))return new at(e,r||null,new de(Pe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:ot("string",at._jsonSchemaVersion),referencePath:ot("string")};class Wr extends Gi{constructor(e,n,r){super(e,n,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new de(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function rh(t,e,...n){if(t=dr(t),r_("collection","path",e),t instanceof Ou){const r=Pe.fromString(e,...n);return fv(r),new Wr(t,null,r)}{if(!(t instanceof at||t instanceof Wr))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return fv(r),new Wr(t.firestore,null,r)}}function ut(t,e,...n){if(t=dr(t),arguments.length===1&&(e=Fm.newId()),r_("doc","path",e),t instanceof Ou){const r=Pe.fromString(e,...n);return hv(r),new at(t,null,new de(r))}{if(!(t instanceof at||t instanceof Wr))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return hv(r),new at(t.firestore,t instanceof Wr?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="AsyncQueue";class n1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K_(this,"async_queue_retry"),this._c=()=>{const r=th();r&&se(t1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=th();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!eo(e))throw e;se(t1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,pr("INTERNAL UNHANDLED ERROR: ",r1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=o0.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&fe(47125,{Pc:r1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function r1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xa extends Ou{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new n1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n1(e),this._firestoreClient=void 0,await e}}}function CD(t,e){const n=typeof t=="object"?t:E2(),r=typeof t=="string"?t:qc,i=qa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=RI("firestore");s&&TD(i,...s)}return i}function d0(t){if(t._terminated)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SD(t),t._firestoreClient}function SD(t){var r,i,s;const e=t._freezeSettings(),n=function(l,c,d,h){return new JP(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,gN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new bD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dn(Ct.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ha(e,dn._jsonSchema))return dn.fromBase64String(e.bytes)}}dn._jsonSchemaVersion="firestore/bytes/1.0",dn._jsonSchema={type:ot("string",dn._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(e){if(Ha(e,qn._jsonSchema))return new qn(e.latitude,e.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:ot("string",qn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ha(e,Hn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hn(e.vectorValues);throw new ne(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hn._jsonSchemaVersion="firestore/vectorValue/1.0",Hn._jsonSchema={type:ot("string",Hn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=/^__.*__$/;class ID{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ga(e,this.data,n,this.fieldTransforms)}}function vN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class f0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new f0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return eu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vN(this.Ac)&&jD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vu(e)}Cc(e,n,r,i=!1){return new f0({Ac:e,methodName:n,Dc:r,path:_t.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wN(t){const e=t._freezeSettings(),n=Vu(t._databaseId);return new zD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AD(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);_N("Data must be an object, but it was:",o,r);const l=bN(r,o);let c,d;if(s.merge)c=new En(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=RD(e,p,n);if(!o.contains(m))throw new ne(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);VD(h,m)||h.push(m)}c=new En(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new ID(new un(l),c,d)}function PD(t,e,n,r=!1){return p0(n,t.Cc(r?4:3,e))}function p0(t,e){if(kN(t=dr(t)))return _N("Unsupported field value:",e,t),bN(t,e);if(t instanceof yN)return function(r,i){if(!vN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=p0(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=dr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Oe.fromDate(r);return{timestampValue:Yc(i.serializer,s)}}if(r instanceof Oe){const s=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yc(i.serializer,s)}}if(r instanceof qn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dn)return{bytesValue:M_(i.serializer,r._byteString)};if(r instanceof at){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hn)return function(o,l){return{mapValue:{fields:{[h_]:{stringValue:f_},[Hc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Gm(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Cu(r)}`)}(t,e)}function bN(t,e){const n={};return o_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(t,(r,i)=>{const s=p0(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function kN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof qn||t instanceof dn||t instanceof at||t instanceof yN||t instanceof Hn)}function _N(t,e,n){if(!kN(n)||!i_(n)){const r=Cu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function RD(t,e,n){if((e=dr(e))instanceof h0)return e._internalPath;if(typeof e=="string")return NN(t,e);throw eu("Field path arguments must be of type string or ",t,!1,void 0,n)}const DD=new RegExp("[~\\*/\\[\\]]");function NN(t,e,n){if(e.search(DD)>=0)throw eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new h0(...e.split("."))._internalPath}catch{throw eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ne(K.INVALID_ARGUMENT,l+t+c)}function VD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(m0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MD extends EN{data(){return super.data()}}function m0(t,e){return typeof e=="string"?NN(t,e):e instanceof h0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g0{}class TN extends g0{}function i1(t,e,...n){let r=[];e instanceof g0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof y0).length,l=s.filter(c=>c instanceof x0).length;if(o>1||o>0&&l>0)throw new ne(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class x0 extends TN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new x0(e,n,r)}_apply(e){const n=this._parse(e);return CN(e._query,n),new Gi(e.firestore,e.converter,Vf(e._query,n))}_parse(e){const n=wN(e.firestore);return function(s,o,l,c,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){a1(p,h);const N=[];for(const C of p)N.push(o1(c,s,C));m={arrayValue:{values:N}}}else m=o1(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||a1(p,h),m=PD(l,o,p,h==="in"||h==="not-in");return st.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class y0 extends g0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new y0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const c of l)CN(o,c),o=Vf(o,c)}(e._query,n),new Gi(e.firestore,e.converter,Vf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class v0 extends TN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new v0(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pa(s,o)}(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new to(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function s1(t,e="asc"){const n=e,r=m0("orderBy",t);return v0._create(r,n)}function o1(t,e,n){if(typeof(n=dr(n))=="string"){if(n==="")throw new ne(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b_(e)&&n.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!de.isDocumentKey(r))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bv(t,new de(r))}if(n instanceof at)return bv(t,n._key);throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cu(n)}.`)}function a1(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CN(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class OD{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $i(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Hc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>et(o.doubleValue));return new Hn(n)}convertGeoPoint(e){return new qn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Iu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ia(e));default:return null}}convertTimestamp(e){const n=Xr(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);Ce($_(r),9688,{name:e});const i=new za(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(n)||pr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ii extends EN{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(m0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ii._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ii._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ii._jsonSchema={type:ot("string",Ii._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class ic extends Ii{data(e={}){return super.data(e)}}class js{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Oo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ic(this._firestore,this._userDataWriter,r.key,r,new Oo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new ic(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Oo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new ic(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Oo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:BD(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=js._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t){t=Qr(t,at);const e=Qr(t.firestore,Xa);return ND(d0(e),t._key).then(n=>UD(e,t,n))}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:ot("string",js._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class SN extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function ih(t){t=Qr(t,Gi);const e=Qr(t.firestore,Xa),n=d0(e),r=new SN(e);return LD(t._query),ED(n,t._query).then(i=>new js(e,r,t,i))}function Kn(t,e,n){t=Qr(t,at);const r=Qr(t.firestore,Xa),i=FD(t.converter,e,n);return jN(r,[AD(wN(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$n.none())])}function l1(t){return jN(Qr(t.firestore,Xa),[new Km(t._key,$n.none())])}function jN(t,e){return function(r,i){const s=new rr;return r.asyncQueue.enqueueAndForget(async()=>hD(await _D(r),i,s)),s.promise}(d0(t),e)}function UD(t,e,n){const r=n.docs.get(e._key),i=new SN(t);return new Ii(t,i,e._key,r,new Oo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Js=i})(Xz),Kr(new hr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Xa(new PP(r.getProvider("auth-internal")),new VP(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new za(d.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Bn(lv,cv,e),Bn(lv,cv,"esm2020")})();const $D={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},IN=N2($D);TP(IN);const Xe=CD(IN),Ae={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},Qn=t=>JSON.parse(JSON.stringify(t)),Re={async saveRecipe(t,e){try{return await Kn(ut(Xe,Ae.RECIPES,t),Qn({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=i1(rh(Xe,Ae.RECIPES),s1("updatedAt","desc")),e=await ih(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await l1(ut(Xe,Ae.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Kn(ut(Xe,Ae.SETTINGS,"inventory_v2"),Qn({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await Nr(ut(Xe,Ae.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await Nr(ut(Xe,Ae.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Kn(ut(Xe,Ae.SETTINGS,"costs_data"),Qn({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await Nr(ut(Xe,Ae.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Kn(ut(Xe,Ae.SETTINGS,"ficha_tecnica"),Qn({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await Nr(ut(Xe,Ae.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Kn(ut(Xe,Ae.SETTINGS,"global_config"),Qn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await Nr(ut(Xe,Ae.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Kn(ut(Xe,Ae.SETTINGS,Ae.RECIPES_V2),Qn({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await Nr(ut(Xe,Ae.SETTINGS,Ae.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Kn(ut(Xe,Ae.RECIPES_V3,String(t)),Qn({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=i1(rh(Xe,Ae.RECIPES_V3),s1("updatedAt","desc"));t=await ih(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await ih(rh(Xe,Ae.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await l1(ut(Xe,Ae.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Kn(ut(Xe,Ae.SETTINGS,Ae.KANBAN),Qn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await Nr(ut(Xe,Ae.SETTINGS,Ae.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Kn(ut(Xe,Ae.SETTINGS,"recipe_categories"),Qn({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await Nr(ut(Xe,Ae.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}}};function WD(){const[t,e]=j.useState([]),[n,r]=j.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,s]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(null),[h,p]=j.useState(!1),[m,y]=j.useState(""),[N,C]=j.useState("Global Investment Matrix"),[z,b]=j.useState(!1),[x,w]=j.useState(.13),[R,V]=j.useState(!1),[M,k]=j.useState(null),v=j.useRef(null),_=j.useCallback((S,O="success")=>{v.current&&clearTimeout(v.current),k({message:S,type:O}),v.current=setTimeout(()=>k(null),3500)},[]),[T,A]=j.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),D=j.useRef(null);j.useEffect(()=>{try{const S=localStorage.getItem("padoca_costs_v1"),O=localStorage.getItem("padoca_costs_categories"),G=localStorage.getItem("padoca_costs_title"),ee=localStorage.getItem("padoca_global_tax");let L=S?JSON.parse(S):[],q=O?JSON.parse(O):null;G&&C(G),ee&&w(Number(ee)),q&&(q=q.map(H=>H==="Pessoal"?"Maquinrio":H),r(q)),L&&(L=L.map(H=>({...H,category:H.category==="Pessoal"?"Maquinrio":H.category})),e(L))}catch(S){console.error("Load failed",S)}},[]);const[I,xe]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const O=await Re.getCosts();O&&(O.costs&&e(O.costs),O.categories&&r(O.categories));const G=await Re.getGlobalSettings();G&&G.taxRate!==void 0&&(w(G.taxRate),localStorage.setItem("padoca_global_tax",G.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{xe(!0)}})()},[]),j.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),I&&Re.syncCosts(t,n)},[t,n,I]),j.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),j.useEffect(()=>{localStorage.setItem("padoca_costs_title",N)},[N]),j.useEffect(()=>{localStorage.setItem("padoca_global_tax",x.toString()),I&&Re.syncGlobalSettings({taxRate:x}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:x}}))},[x,I]);const ce=S=>(Number(S)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),re=j.useMemo(()=>{const S=t.reduce((G,ee)=>{const L=Number(ee.quantity)||1,q=(Number(ee.amount)||0)*L;return G.total+=q,ee.type==="Fixo"?G.fixed+=q:G.variable+=q,G},{total:0,fixed:0,variable:0}),O=S.total*x;return{...S,hst:O,grandTotal:S.total+O}},[t]),le=j.useMemo(()=>n.reduce((S,O)=>{const G=t.filter(ee=>ee.category===O);return G.length>0&&(S[O]=G),S},{}),[t,n]),Y=S=>{if(S.preventDefault(),!T.description||!T.amount)return;const O=n.includes(T.category)?T.category:n[0],G={...T,category:O,amount:Number(T.amount),quantity:Number(T.quantity)||1};e(o?ee=>ee.map(L=>L.id===o?{...G,id:o}:L):ee=>[...ee,{...G,id:Date.now().toString()}]),te()},ie=S=>{d({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(O=>O.filter(G=>G.id!==S)),_("Despesa removida com sucesso."),d(null)},onCancel:()=>d(null)})},te=()=>{s(!1),l(null),A({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},ue=S=>{A({description:S.description||"",amount:S.amount||"",quantity:S.quantity||1,category:S.category||n[0],type:S.type||"Varivel",link:S.link||"",date:S.date||new Date().toISOString().split("T")[0]}),l(S.id),s(!0)},he=()=>{m&&(n.includes(m)||(r(S=>[...S,m]),_("Categoria adicionada.")),y(""))},Ee=S=>{d({title:"Remover Categoria",message:`A categoria "${S}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(O=>O.filter(G=>G!==S)),_("Categoria removida."),d(null)},onCancel:()=>d(null)})},P=()=>{try{const S=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],O=t.map(H=>{const J=Number(H.quantity)||1,ke=Number(H.amount)||0,je=J*ke;return[H.id,H.date||"-",`"${H.description.replace(/"/g,'""')}"`,J,ke.toFixed(2).replace(".",","),je.toFixed(2).replace(".",","),`"${H.category}"`,H.type,`"${H.link||""}"`]}),G="\uFEFF"+[S.join(";"),...O.map(H=>H.join(";"))].join(`
`),ee=new Blob([G],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(ee),q=document.createElement("a");q.href=L,q.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,q.click(),_("Relatrio Excel exportado!")}catch{_("Erro ao exportar CSV")}},B=()=>{try{const S=JSON.stringify({version:"1",costs:t,categories:n},null,2),O=new Blob([S],{type:"application/json"}),G=URL.createObjectURL(O),ee=document.createElement("a");ee.href=G,ee.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,ee.click(),_("Backup realizado com sucesso!")}catch{_("Erro ao realizar backup")}},U=S=>{var ee;const O=(ee=S.target.files)==null?void 0:ee[0];if(!O)return;const G=new FileReader;G.onload=L=>{try{const q=JSON.parse(String(L.target.result||"{}"));if(q.costs&&Array.isArray(q.costs))e(q.costs),q.categories&&r(q.categories),_("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{_("Arquivo de backup invlido")}},G.readAsText(O),S.target.value=""},W=()=>{d({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),_("Banco de dados limpo."),d(null)},onCancel:()=>d(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[z?a.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:N,onChange:S=>C(S.target.value),onBlur:()=>b(!1),onKeyDown:S=>S.key==="Enter"&&b(!1),autoFocus:!0}):a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>b(!0),children:N}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ce(re.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ce(re.total)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[R?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:x*100,onChange:S=>w(Number(S.target.value)/100),onBlur:()=>V(!1),onKeyDown:S=>S.key==="Enter"&&V(!1),autoFocus:!0}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):a.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>V(!0),children:["Tax Impact (",(x*100).toFixed(0),"%)"]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ce(re.hst)})]})]})]})}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ce(re.fixed)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(re.fixed/re.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${re.fixed/re.total*100||0}%`}})})]})]}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ce(re.variable)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),a.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(re.variable/re.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${re.variable/re.total*100||0}%`}})})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),a.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[a.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[a.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),a.jsx("div",{className:"col-span-2"})]}),a.jsx("div",{className:"space-y-6",children:t.length===0?a.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),a.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(le).map(([S,O])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:S}),a.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),a.jsx("div",{className:"space-y-3 md:space-y-1",children:O.map(G=>a.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[a.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[a.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${G.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),a.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[a.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:G.description}),a.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:G.date}),G.link&&a.jsx("a",{href:G.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),a.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:a.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[G.quantity," unit  ",G.type.slice(0,1)]})}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:ce((Number(G.amount)||0)*(Number(G.quantity)||1))}),a.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[ce(G.amount)," / item"]})]}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ce((Number(G.amount)||0)*(Number(G.quantity)||1)*(1+x))}),a.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[a.jsxs("button",{onClick:()=>ue(G),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),a.jsxs("button",{onClick:()=>ie(G.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},G.id))})]},S))})]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[a.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),a.jsx("button",{onClick:P,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:W,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx("button",{onClick:B,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var S;return(S=D.current)==null?void 0:S.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:D,type:"file",accept:"application/json",className:"hidden",onChange:U})]})]})]}),a.jsx(Ie,{children:i&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:te}),a.jsxs(oe.div,{initial:{y:"100%",opacity:.5},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-t-[2.5rem] md:rounded-[2rem] shadow-[0_10px_40px_rgba(0,0,0,0.2)] border-t border-white/20 dark:border-white/5 flex flex-col overflow-hidden max-h-[85vh] md:max-h-[80vh]",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:a.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:o?"Editar Despesa":"Nova Despesa"}),a.jsx("button",{onClick:te,className:"w-8 h-8 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?a.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[a.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((S,O)=>a.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${O!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[a.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:S}),a.jsx("button",{onClick:()=>Ee(S),className:"text-red-400 p-1",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},S))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:m,onChange:S=>y(S.target.value)}),a.jsx("button",{className:"w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold",onClick:he,children:"+"})]}),a.jsx("button",{onClick:()=>p(!1),className:"w-full py-3 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all",children:"Pronto"})]}):a.jsxs("form",{onSubmit:Y,className:"space-y-6 px-4 animate-fade-in",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:T.description,onChange:S=>A({...T,description:S.target.value}),placeholder:"Mixer, Aluguel..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:T.link,onChange:S=>A({...T,link:S.target.value}),placeholder:"Opcional..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:T.quantity,onChange:S=>A({...T,quantity:S.target.value})})]}),a.jsxs("div",{className:"flex items-center px-4 py-3",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),a.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:T.amount,onChange:S=>A({...T,amount:S.target.value})})]})]})]}),a.jsx("div",{className:"px-1",children:a.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(S=>a.jsx("button",{type:"button",onClick:()=>A({...T,type:S}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${T.type===S?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:S},S))})}),a.jsxs("div",{className:"space-y-3 px-1",children:[a.jsxs("div",{className:"flex justify-between items-center px-1",children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),a.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(S=>a.jsx("button",{type:"button",onClick:()=>A({...T,category:S}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${T.category===S?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:S},S))})]}),a.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[a.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),a.jsx("button",{type:"button",onClick:te,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),a.jsx(Ie,{children:M&&jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${M.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":M.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${M.type==="error"?"bg-white animate-pulse":M.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:M.message})]}),document.body)}),a.jsx(Ie,{children:c&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:c.onCancel}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${c.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:c.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:c.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:c.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:c.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${c.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}const Jn="padoca_inventory_v2",sh=["Ingredientes","Embalagens","Utenslios","Outros"],oh=["Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function qD(){const[t,e]=j.useState(()=>{try{const L=localStorage.getItem(Jn);if(L)return JSON.parse(L);const q=localStorage.getItem("padoca_inventory");return q?JSON.parse(q).map(J=>({...J,packageQuantity:J.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=j.useState(()=>{try{const L=localStorage.getItem(Jn+"_categories");return L?JSON.parse(L):sh}catch{return sh}}),[i,s]=j.useState(!1),[o,l]=j.useState("synced");j.useEffect(()=>{(async()=>{try{const q=await Re.getInventory();q&&(Array.isArray(q.items)&&e(q.items),Array.isArray(q.categories)&&r(q.categories));const H=await Re.getGlobalSettings();H&&H.taxRate!==void 0&&d(H.taxRate)}catch(q){console.warn("Inventory cloud load failed",q)}finally{s(!0)}})()},[]);const[c,d]=j.useState(()=>{const L=localStorage.getItem("padoca_global_tax");return L?Number(L):.13});j.useEffect(()=>{const L=q=>{q.detail&&q.detail.taxRate!==void 0&&d(q.detail.taxRate)};return window.addEventListener("global-settings-updated",L),()=>window.removeEventListener("global-settings-updated",L)},[]);const[h,p]=j.useState(!1),[m,y]=j.useState(null),[N,C]=j.useState(""),[z,b]=j.useState(null),[x,w]=j.useState(null),[R,V]=j.useState(null),M=j.useRef(null),k=j.useCallback((L,q="success")=>{M.current&&clearTimeout(M.current),V({message:L,type:q}),M.current=setTimeout(()=>V(null),3500)},[]),[v,_]=j.useState(()=>{try{const L=localStorage.getItem(Jn+"_subcategories");return L?JSON.parse(L):oh}catch{return oh}}),[T,A]=j.useState(!1),[D,I]=j.useState(""),[xe,ce]=j.useState(""),[re,le]=j.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]});j.useEffect(()=>{if(localStorage.setItem(Jn,JSON.stringify(t)),localStorage.setItem(Jn+"_categories",JSON.stringify(n)),localStorage.setItem(Jn+"_subcategories",JSON.stringify(v)),i){l("syncing");const L=setTimeout(async()=>{try{const q=await Re.syncInventory(t,n);l(q?"synced":"error")}catch{l("error")}},1500);return()=>clearTimeout(L)}window.dispatchEvent(new Event("inventory-updated"))},[t,n,v,i]);const Y=L=>(Number(L.packageQuantity)||0)*(Number(L.packageCount)||1),ie=L=>(Number(L.packageCount)||1)*(Number(L.pricePerUnit)||0),te=j.useMemo(()=>{const L=t.reduce((J,ke)=>J+ie(ke),0),q=t.length,H=t.reduce((J,ke)=>{const je=ie(ke);return J[ke.category]=(J[ke.category]||0)+je,J},{});return{totalValue:L,itemCount:q,byCategory:H,taxImpact:L*c,grandTotal:L*(1+c)}},[t,c]),ue=L=>(Number(L)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),he=()=>{if(!re.name.trim())return;const L={id:Date.now(),name:re.name.trim(),packageQuantity:Number(re.packageQuantity)||0,packageCount:Number(re.packageCount)||1,unit:re.unit,pricePerUnit:Number(re.pricePerUnit)||0,category:re.category,subcategory:re.category==="Ingredientes"?re.subcategory:null,purchaseDate:re.purchaseDate,createdAt:new Date().toISOString()};e(q=>[...q,L]),le({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]}),p(!1)},Ee=(L,q,H)=>{e(J=>J.map(ke=>ke.id!==L?ke:{...ke,[q]:["name","unit","category","subcategory","purchaseDate"].includes(q)?H:Number(H)||0}))},P=L=>{w({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(q=>q.filter(H=>H.id!==L)),y(null),w(null)},onCancel:()=>w(null)})},B=j.useMemo(()=>{let L=t;if(N.trim()){const q=N.toLowerCase().trim();L=L.filter(H=>H.name.toLowerCase().includes(q)||H.subcategory&&H.subcategory.toLowerCase().includes(q))}return z&&(L=L.filter(q=>q.subcategory===z)),L},[t,N,z]),U=j.useMemo(()=>n.reduce((L,q)=>{const H=B.filter(J=>J.category===q);return H.length>0&&(L[q]=H),L},{}),[B,n]),W=gn.useRef(null),S=()=>{try{const L=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],q=t.map(Ue=>{const $e=(Number(Ue.packageQuantity)||0)*(Number(Ue.packageCount)||1),lt=(Number(Ue.packageCount)||1)*(Number(Ue.pricePerUnit)||0);return[Ue.id,`"${Ue.name.replace(/"/g,'""')}"`,`"${Ue.category}"`,Ue.packageQuantity,Ue.unit,Ue.packageCount,$e,Number(Ue.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),lt.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),H="\uFEFF"+[L.join(";"),...q.map(Ue=>Ue.join(";"))].join(`
`),J=new Blob([H],{type:"text/csv;charset=utf-8;"}),ke=URL.createObjectURL(J),je=document.createElement("a");je.href=ke,je.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,je.click(),k("Relatrio de Estoque exportado!","success")}catch(L){console.error(L),k("Erro ao exportar CSV","error")}},O=()=>{try{const L=JSON.stringify({version:"2",items:t,categories:n},null,2),q=new Blob([L],{type:"application/json"}),H=URL.createObjectURL(q),J=document.createElement("a");J.href=H,J.download=`padoca_estoque_backup_${new Date().toISOString().split("T")[0]}.json`,J.click(),k("Backup de Estoque realizado!","success")}catch{k("Erro ao realizar backup","error")}},G=L=>{var J;const q=(J=L.target.files)==null?void 0:J[0];if(!q)return;const H=new FileReader;H.onload=ke=>{try{const je=JSON.parse(String(ke.target.result||"{}"));if(je.items&&Array.isArray(je.items))e(je.items),je.categories&&r(je.categories),k("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{k("Arquivo de backup invlido","error")}},H.readAsText(q),L.target.value=""},ee=()=>{w({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(Jn,"[]"),w(null)},onCancel:()=>w(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${o==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":o==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${o==="syncing"?"bg-amber-500":o==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:o==="syncing"?"Cloud Syncing":o==="error"?"Sync Error":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),a.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ue(te.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ue(te.totalValue)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(c*100).toFixed(0),"%)"]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:ue(te.taxImpact)})]})]})]})}),a.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((L,q)=>{const H={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},J=H[L]||H.Outros,ke=te.byCategory[L]||0,je=ke*(1+c),Ue=(ke/te.totalValue*100||0).toFixed(0);return a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J.pulse} ${J.shadow}`}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:L})]}),a.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ue(je)}),a.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",ue(ke)," + ",(c*100).toFixed(0),"% tax)"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:`text-[8px] font-bold ${J.text}`,children:[Ue,"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${J.bg} transition-all duration-1000`,style:{width:`${Ue}%`}})})]})]},L)})})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>p(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[90vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Item"}),a.jsx("button",{onClick:()=>p(!1),className:"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-5",children:[a.jsxs("div",{className:"sm:col-span-2 lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Item"}),a.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"Ex: Farinha de Trigo",value:re.name,onChange:L=>le(q=>({...q,name:L.target.value})),autoFocus:!0})]}),a.jsxs("div",{className:"lg:col-span-12 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Qtd/Pacote"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"25",value:re.packageQuantity,onChange:L=>le(q=>({...q,packageQuantity:L.target.value}))}),a.jsxs("select",{className:"w-24 px-2 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all text-center appearance-none",value:re.unit,onChange:L=>le(q=>({...q,unit:L.target.value})),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"N Pacotes"}),a.jsx("input",{type:"number",min:"1",inputMode:"numeric",pattern:"[0-9]*",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"1",value:re.packageCount,onChange:L=>le(q=>({...q,packageCount:L.target.value}))})]})]}),a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Pacote"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500 font-medium",children:"$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0.00",value:re.pricePerUnit,onChange:L=>le(q=>({...q,pricePerUnit:L.target.value}))})]})]}),a.jsxs("div",{className:re.category==="Ingredientes"?"lg:col-span-6":"lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Categoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:re.category,onChange:L=>le(q=>({...q,category:L.target.value,subcategory:L.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(L=>a.jsx("option",{value:L,children:L},L))})]}),re.category==="Ingredientes"&&a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:re.subcategory,onChange:L=>le(q=>({...q,subcategory:L.target.value})),children:v.map(L=>a.jsx("option",{value:L,children:L},L))})]})]}),re.packageQuantity&&re.packageCount&&a.jsx("div",{className:"mt-6 p-5 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 shadow-inner",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Resumo"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-300",children:[Number(re.packageQuantity)*Number(re.packageCount)," ",re.unit," Total"]}),re.pricePerUnit&&a.jsx("div",{className:"text-2xl font-bold text-zinc-900 dark:text-white mt-1 tracking-tight tabular-nums",children:ue(Number(re.packageCount)*Number(re.pricePerUnit))})]})]})}),a.jsxs("div",{className:"flex gap-3 mt-8 safe-area-bottom",children:[a.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:he,disabled:!re.name.trim(),className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/10 hover:shadow-xl hover:shadow-zinc-900/20 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar ao Estoque"})]})]})]}),a.jsx("section",{className:"relative z-10 mb-6",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:N,onChange:L=>C(L.target.value)}),N&&a.jsx("button",{onClick:()=>C(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[a.jsx("button",{onClick:()=>b(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${z===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),v.map(L=>a.jsx("button",{onClick:()=>b(z===L?null:L),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${z===L?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:L},L))]}),(N||z)&&a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[a.jsxs("span",{className:"text-xs text-zinc-500",children:[B.length," ",B.length===1?"resultado":"resultados"]}),a.jsx("button",{onClick:()=>{C(""),b(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(U).length>0?a.jsx("div",{className:"space-y-8",children:Object.entries(U).map(([L,q])=>a.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:L}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:ue((te.byCategory[L]||0)*(1+c))}),a.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[q.length," ",q.length===1?"item":"itens"]})})]})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[a.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:q.map(H=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:m===H.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:H.name,onChange:J=>Ee(H.id,"name",J.target.value)})}),a.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[a.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.packageQuantity,onChange:J=>Ee(H.id,"packageQuantity",J.target.value)}),a.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:H.unit,onChange:J=>Ee(H.id,"unit",J.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]}),a.jsx("div",{className:"col-span-1",children:a.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:H.packageCount,onChange:J=>Ee(H.id,"packageCount",J.target.value)})}),H.category==="Ingredientes"&&a.jsx("div",{className:"col-span-2",children:a.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:H.subcategory||"",onChange:J=>Ee(H.id,"subcategory",J.target.value),children:v.map(J=>a.jsx("option",{value:J,children:J},J))})}),H.category!=="Ingredientes"&&a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[Y(H)," ",H.unit]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.pricePerUnit,onChange:J=>Ee(H.id,"pricePerUnit",J.target.value)})}),a.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),a.jsx("button",{onClick:()=>P(H.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-3",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:H.name})}),a.jsx("div",{className:"col-span-2 text-center",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[H.packageQuantity," ",H.unit]})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[H.packageCount,""]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[Y(H)," ",H.unit]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:ue(H.pricePerUnit)})}),a.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:ue(ie(H)*(1+c))}),a.jsx("button",{onClick:()=>y(H.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},H.id))})]}),a.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:q.map(H=>a.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${m===H.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:m===H.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>P(H.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:H.name,onChange:J=>Ee(H.id,"name",J.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageQuantity,onChange:J=>Ee(H.id,"packageQuantity",J.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.unit,onChange:J=>Ee(H.id,"unit",J.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageCount,onChange:J=>Ee(H.id,"packageCount",J.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),a.jsxs("div",{className:"relative group",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.pricePerUnit,onChange:J=>Ee(H.id,"pricePerUnit",J.target.value)})]})]})]}),H.category==="Ingredientes"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:H.subcategory||"",onChange:J=>Ee(H.id,"subcategory",J.target.value),children:v.map(J=>a.jsx("option",{value:J,children:J},J))})]})]}):a.jsxs("div",{onClick:()=>y(H.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:H.name}),a.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[Y(H)," ",H.unit," em estoque"]})]}),a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[H.packageCount," pcts"]})]}),a.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),a.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:ue(H.pricePerUnit)})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:ue(ie(H)*(1+c))})})]})]})]})},H.id))}),a.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",L]}),a.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:ue((te.byCategory[L]||0)*(1+c))})]})]},L))}):a.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),a.jsx("button",{onClick:()=>p(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),a.jsx("section",{className:"relative z-10 mt-8",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:ee,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[a.jsx("button",{onClick:S,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export CSV"}),a.jsx("button",{onClick:O,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var L;return(L=W.current)==null?void 0:L.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:W,type:"file",accept:"application/json",className:"hidden",onChange:G})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[a.jsx("h3",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest mb-4",children:"Category Management"}),a.jsxs("button",{onClick:()=>A(!0),className:"w-full py-4 md:py-3 bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20 text-indigo-600 dark:text-indigo-400 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-indigo-100 dark:hover:bg-indigo-500/20 transition-all flex items-center justify-center gap-2",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Gerenciar Categorias e Subcategorias"]})]})]})}),T&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>A(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[90vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),a.jsx("button",{onClick:()=>A(!1),className:"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),a.jsx("div",{className:"space-y-2",children:n.map((L,q)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:L}),a.jsx("button",{onClick:()=>{w({title:"Excluir Categoria",message:`Excluir categoria "${L}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(H=>H.filter(J=>J!==L)),e(H=>H.map(J=>J.category===L?{...J,category:"Outros"}:J)),w(null),k("Categoria removida","success")},onCancel:()=>w(null)})},className:"p-1.5 rounded-lg text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),a.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:D,onChange:L=>I(L.target.value),onKeyDown:L=>{L.key==="Enter"&&D.trim()&&(n.includes(D.trim())||(r(q=>[...q,D.trim()]),I("")))}}),a.jsx("button",{onClick:()=>{D.trim()&&!n.includes(D.trim())&&(r(L=>[...L,D.trim()]),I(""))},disabled:!D.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("button",{onClick:()=>{w({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(sh),w(null),k("Categorias restauradas","success")},onCancel:()=>w(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),a.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),a.jsx("div",{className:"space-y-2",children:v.map((L,q)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[a.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:L}),a.jsx("button",{onClick:()=>{w({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${L}"?`,type:"danger",onConfirm:()=>{_(H=>H.filter(J=>J!==L)),w(null),k("Subcategoria removida","success")},onCancel:()=>w(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:xe,onChange:L=>ce(L.target.value),onKeyDown:L=>{L.key==="Enter"&&xe.trim()&&(v.includes(xe.trim())||(_(q=>[...q,xe.trim()]),ce("")))}}),a.jsx("button",{onClick:()=>{xe.trim()&&!v.includes(xe.trim())&&(_(L=>[...L,xe.trim()]),ce(""))},disabled:!xe.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:()=>{w({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{_(oh),w(null),k("Subcategorias restauradas","success")},onCancel:()=>w(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),a.jsx(Ie,{children:x&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:x.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:x.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(Ie,{children:R&&jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:R.message})]}),document.body)})]})}function HD(){const[t,e]=j.useState([]),n=()=>{try{const r=localStorage.getItem(Jn);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return j.useEffect(()=>{n();const r=s=>{s.key===Jn&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}const c1="fichaTecnica_pizzas",sc={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},ah=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,s=n*r;if(i<=0)return 0;const o=s/i,l=sc[t.unit]||1;return o/l},u1={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function GD(){const[t,e]=j.useState(()=>{try{const P=localStorage.getItem(c1);return P?JSON.parse(P):[u1]}catch{return[u1]}}),[n,r]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const B=await Re.getPizzas();B&&B.length>0&&e(B.map(U=>({...U,ingredients:Array.isArray(U.ingredients)?U.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,s]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState(!1),[h,p]=j.useState(!1),[m,y]=j.useState(""),[N,C]=j.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[z,b]=j.useState(null),[x,w]=j.useState(null),[R,V]=j.useState(null),[M,k]=j.useState(null),v=j.useRef(null);j.useCallback((P,B="success")=>{v.current&&clearTimeout(v.current),k({message:P,type:B}),v.current=setTimeout(()=>k(null),3500)},[]);const _=HD();j.useEffect(()=>{localStorage.setItem(c1,JSON.stringify(t)),n&&Re.syncPizzas(t)},[t,n]);const T=j.useMemo(()=>t.find(P=>P.id===i)||null,[t,i]),A=(P=[])=>{if(!Array.isArray(P))return{totalCost:0,costPerPizza:0};const B=P.reduce((U,W)=>U+he(W),0);return{totalCost:B,costPerPizza:B}},D=P=>(Number(P)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),I=P=>{const B=Number(P)||0;return B<.01&&B>0?B.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):B.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},xe=()=>{if(!m.trim())return;const P={id:Date.now(),name:m.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(B=>[...B,P]),y(""),p(!1),s(P.id)},ce=P=>{const B=t.find(U=>U.id===P);w({title:"Excluir Pizza",message:`A pizza "${(B==null?void 0:B.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e(U=>U.filter(W=>W.id!==P)),i===P&&s(null),w(null)},onCancel:()=>w(null)})},re=P=>{const B=t.find(U=>U.id===P);B&&V({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:B.name,onConfirm:U=>{U&&U!==B.name&&e(W=>W.map(S=>S.id===P?{...S,name:U.trim()}:S)),V(null)},onCancel:()=>V(null)})},le=P=>{if(C(B=>({...B,name:P})),b(null),!!Array.isArray(_)&&P&&P.trim().length>0){const B=P.toLowerCase().trim(),U=_.find(W=>!W||!W.name?!1:W.name.toLowerCase()===B);if(U){b(U);const W=ah(U),S=sc[N.unit]||1,O=W*S;C(G=>({...G,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:U.id}))}}},Y=P=>{C(B=>{const U={...B,unit:P};if(z){const W=ah(z),S=sc[P]||1,O=W*S;U.pricePerUnit=O.toFixed(6),U.isSyncedFromInventory=!0}return U})},ie=(P=!1)=>{if(!T||!N.name.trim()||!N.quantity)return;const B={id:Date.now(),name:N.name.trim(),quantity:Number(N.quantity)||0,unit:N.unit,pricePerUnit:Number(N.pricePerUnit)||0,inventoryItemId:N.inventoryItemId};e(U=>U.map(W=>W.id===i?{...W,ingredients:[...W.ingredients||[],B]}:W)),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null),P?setTimeout(()=>{var U;(U=document.getElementById("cat-ing-name-input"))==null||U.focus()},50):d(!1)},te=(P,B,U)=>{T&&e(W=>W.map(S=>S.id!==i?S:{...S,ingredients:(S.ingredients||[]).map(O=>O.id!==P?O:{...O,[B]:B==="name"||B==="unit"?U:Number(U)||0})}))},ue=P=>{T&&(e(B=>B.map(U=>U.id!==i?U:{...U,ingredients:(U.ingredients||[]).filter(W=>W.id!==P)})),l(null))},he=P=>(Number(P.quantity)||0)*(Number(P.pricePerUnit)||0),Ee=T?A(T.ingredients):{totalCost:0,costPerPizza:0};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),a.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center sm:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>p(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 rounded-t-[2.5rem] md:rounded-[2.5rem] p-8 pb-12 md:pb-8 shadow-2xl animate-slide-up ring-1 ring-zinc-900/5 dark:ring-white/10",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-8",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-800"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-zinc-900 dark:text-white tracking-tight mb-2",children:"Nova Pizza"}),a.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"text",className:"w-full px-5 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800/50 border-2 border-transparent focus:border-zinc-900 dark:focus:border-white text-zinc-900 dark:text-white text-lg font-medium text-center focus:outline-none transition-all placeholder:text-zinc-400",placeholder:"Ex: Margherita",value:m,onChange:P=>y(P.target.value),autoFocus:!0,onKeyDown:P=>P.key==="Enter"&&xe()})}),a.jsxs("div",{className:"flex gap-3 pt-4 safe-area-bottom",children:[a.jsx("button",{onClick:()=>{p(!1),y("")},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:xe,disabled:!m.trim(),className:"flex-[2] px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none shadow-xl shadow-zinc-900/10",children:"Criar"})]})]})]})]}),!i&&a.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(P=>{const B=A(P.ingredients);return a.jsxs("div",{onClick:()=>s(P.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:P.name}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[P.ingredients.length," ingrediente",P.ingredients.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:U=>{U.stopPropagation(),re(P.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),a.jsx("button",{onClick:U=>{U.stopPropagation(),ce(P.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),a.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:D(B.totalCost)})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),a.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[P.ingredients.length," itens"]})})]})]})]},P.id)}),t.length===0&&a.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),a.jsx("button",{onClick:()=>p(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),T&&a.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>s(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:T.name}),a.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[T.ingredients.length," ingrediente",T.ingredients.length!==1?"s":""," cadastrado",T.ingredients.length!==1?"s":""]})]})]}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:D(Ee.totalCost)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:T.ingredients.length}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:D(Ee.costPerPizza)}),a.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!c&&a.jsxs("button",{onClick:()=>d(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),c&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)}}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:a.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),a.jsx("button",{onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"relative mb-5",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:P=>{var B;P.key==="Enter"&&(P.preventDefault(),(B=document.getElementById("cat-ing-qty-input"))==null||B.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${z?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:N.name,onChange:P=>{const B=P.target.value;C(U=>({...U,name:B})),z&&B!==z.name&&(b(null),C(U=>({...U,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),le(B)},autoFocus:!0}),z&&a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),N.name.length>0&&!z&&a.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const P=_.filter(B=>B.name.toLowerCase().includes(N.name.toLowerCase())).slice(0,6);return P.length===0&&N.name.length>1?a.jsxs("div",{className:"p-5 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',N.name,'" ao Estoque primeiro']})]}):P.map((B,U)=>a.jsxs("button",{onClick:()=>{b(B);const W=ah(B),S=sc[N.unit]||1,O=W*S;C(G=>({...G,name:B.name,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:B.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${U!==P.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:B.name}),a.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[B.packageQuantity*B.packageCount," ",B.unit]})]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},B.id))})()})]}),z&&a.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:z.name}),a.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",z.packageQuantity*z.packageCount," ",z.unit,"  ",D(z.packageCount*z.pricePerUnit)]})]})]})}),!z&&a.jsx("div",{className:"space-y-4 mb-5",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 text-sm font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full pl-10 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0,00",value:N.pricePerUnit,onChange:P=>C(B=>({...B,pricePerUnit:P.target.value}))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:N.unit,onChange:P=>Y(P.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),a.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:P=>{P.key==="Enter"&&(P.preventDefault(),ie(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:N.quantity,onChange:P=>C(B=>({...B,quantity:P.target.value}))})]}),z&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:N.unit})]})]}),z&&N.quantity&&a.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[N.quantity," ",N.unit,"  ",I(N.pricePerUnit),"/",N.unit]}),a.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:D(Number(N.quantity)*Number(N.pricePerUnit))})]})]}),a.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[a.jsx("button",{onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:ie,disabled:!N.name||!N.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),T.ingredients.length>0&&a.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[a.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),a.jsx("div",{className:"col-span-1"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:T.ingredients.map(P=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:o===P.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("input",{id:`edit-ing-name-${P.id}`,autoFocus:!0,onKeyDown:B=>{var U;B.key==="Enter"&&(B.preventDefault(),(U=document.getElementById(`edit-ing-qty-${P.id}`))==null||U.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:P.name,onChange:B=>te(P.id,"name",B.target.value),onBlur:()=>{!P.name.trim()&&(!P.quantity||P.quantity===0)&&ue(P.id)}})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-qty-${P.id}`,onKeyDown:B=>{var U;B.key==="Enter"&&(B.preventDefault(),(U=document.getElementById(`edit-ing-price-${P.id}`))==null||U.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:P.quantity,onChange:B=>te(P.id,"quantity",B.target.value),onBlur:()=>{!P.name.trim()&&(!P.quantity||P.quantity===0)&&ue(P.id)}})}),a.jsx("div",{className:"col-span-1",children:a.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:P.unit,onChange:B=>te(P.id,"unit",B.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-price-${P.id}`,onKeyDown:B=>{B.key==="Enter"&&(B.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:P.pricePerUnit,onChange:B=>te(P.id,"pricePerUnit",B.target.value)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:D(he(P))})}),a.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>ue(P.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:P.name})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:P.quantity})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:P.unit})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(P.pricePerUnit)||0)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:D(he(P))})}),a.jsx("div",{className:"col-span-1 flex justify-end",children:a.jsx("button",{onClick:()=>l(P.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},P.id))}),a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:D(Ee.totalCost)})}),a.jsx("div",{className:"col-span-1"})]})]}),T.ingredients.length>0&&a.jsxs("div",{className:"md:hidden space-y-4",children:[T.ingredients.map(P=>a.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${o===P.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:o===P.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>ue(P.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:P.name,onChange:B=>te(P.id,"name",B.target.value),onBlur:()=>{!P.name.trim()&&(!P.quantity||P.quantity===0)&&ue(P.id)}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:P.quantity,onChange:B=>te(P.id,"quantity",B.target.value),onBlur:()=>{!P.name.trim()&&(!P.quantity||P.quantity===0)&&ue(P.id)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:P.unit,onChange:B=>te(P.id,"unit",B.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:P.pricePerUnit,onChange:B=>te(P.id,"pricePerUnit",B.target.value)})})]})]}):a.jsxs("div",{onClick:()=>l(P.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:P.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[P.quantity," ",P.unit]}),a.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(P.pricePerUnit)||0),"/",P.unit]})]})]}),a.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:B=>{B.stopPropagation(),l(P.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:D(he(P))})]})]})},P.id)),a.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),a.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:D(Ee.totalCost)})]})})]}),T.ingredients.length===0&&!c&&a.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),a.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),a.jsx(Ie,{children:x&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:x.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:x.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(Ie,{children:R&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:R.onCancel}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:R.title}),a.jsx("input",{autoFocus:!0,defaultValue:R.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:R.placeholder,onKeyDown:P=>{P.key==="Enter"&&R.onConfirm(P.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:R.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:P=>{const B=P.target.closest(".relative").querySelector("input");R.onConfirm(B.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),a.jsx(Ie,{children:M&&jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${M.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":M.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${M.type==="error"?"bg-white animate-pulse":M.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:M.message})]}),document.body)})]})}function Yn({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:s="0",pattern:o,inputMode:l}){const c=Number(e)||0,d=r==="g"&&Math.abs(c)>=1e3,h=d?"kg":r,p=()=>d?Math.round(c/1e3).toString():Math.round(c).toString(),[m,y]=j.useState(""),[N,C]=j.useState(!1);j.useEffect(()=>{N||y(e==null?"":p())},[e,N,d]);const z=w=>{const R=w.target.value;y(R);const V=parseFloat(R)||0;n==null||n(V)},b=()=>C(!0),x=()=>{C(!1),e!=null&&y(p())};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:o,value:m,onChange:z,onFocus:b,onBlur:x,placeholder:s}),h&&a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function Is({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:s,step:o=.1,decimals:l=1,maxPct:c=null}){const d=Math.max(i||0,1),h=k=>d*(Number(k)||0)/100,p=k=>(Number(k)||0)/d*100,m=h(e),y=r==="grams"&&Math.abs(m)>=1e3,N=r==="grams"?y?"kg":"g":"%",C=()=>{const k=Number(e)||0;if(r==="grams"){const v=h(k);return y?v/1e3:v<10?v:Math.round(v)}return k},[z,b]=j.useState(()=>{if(e===""||e===null||e===void 0)return"";const k=C();return y?k.toFixed(2):k.toString()}),[x,w]=j.useState(!1);j.useEffect(()=>{if(!x)if(e===""||e===null||e===void 0)b("");else{const k=C();if(r==="grams"){const v=h(Number(e)||0);b(y?k.toFixed(2):v<10?v.toFixed(2):Math.round(v).toString())}else b(Number(k).toFixed(l))}},[e,r,i,x,y]);const R=k=>{const v=k.target.value;if(b(v),v===""){n==null||n("");return}let _=parseFloat(v);if(!Number.isNaN(_)){_=Math.max(0,_),r==="pct"&&c!==null&&_>c&&(_=c,b(_.toString()));let T=_;r==="grams"&&y&&(T=_*1e3);const A=r==="grams"?p(T):_;n==null||n(A)}},V=()=>{w(!0)},M=()=>{if(w(!1),z===""||z===null){b("");return}const k=parseFloat(z);if(!Number.isNaN(k))if(r==="grams"){const v=h(Number(e)||0);b(y||v<10?k.toFixed(2):Math.round(k).toString())}else b(k.toFixed(l))};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:s,step:r==="grams"?1:o,value:z,onChange:R,onFocus:V,onBlur:M,placeholder:"0"}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:N})]})]})}function KD({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","ADY","IDY","CY"];function l(c,d,h){r==null||r({...n,[c]:{...n[c],[d]:h}})}return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipos de Fermentos"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>a.jsxs("label",{className:"button "+(t===c?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:c,checked:t===c,onChange:()=>e==null?void 0:e(c)}),c]},c))}),t==="ADY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(Is,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:c=>l("ADY","yeastPct",c),mode:i,flourWeight:s,name:"ADY-yeast",decimals:3})}),t==="IDY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(Is,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:c=>l("IDY","yeastPct",c),mode:i,flourWeight:s,name:"IDY-yeast",decimals:3})}),t==="CY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(Is,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:c=>l("CY","yeastPct",c),mode:i,flourWeight:s,name:"CY-yeast",decimals:3})}),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function QD({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","Poolish","Biga","Levain"];function l(m,y,N){r==null||r({...n,[m]:{...n[m],[y]:Number.isNaN(N)?"":N}})}const c=i==="grams"?"g":"%",d=m=>s*(Number(m==null?void 0:m.pct)||0)/100,h=(m,y=0,N="")=>{let C=Number(m);if(!Number.isFinite(C))return"";let z=N,b=y;N==="g"&&Math.abs(C)>=1e3&&(C=C/1e3,z="kg",b=2);const x=C.toLocaleString("pt-BR",{minimumFractionDigits:b,maximumFractionDigits:b});return z?`${x} ${z}`:x},p=m=>{const y=n[m];if(!y)return null;const N=d(y),C=N*(Number(y.hydration)||0)/100;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[a.jsx(Is,{label:`Farinha Pref. (${c})`,value:y.pct,onChange:z=>l(m,"pct",z),mode:i,flourWeight:s,name:`${m}-pct`}),a.jsx(Is,{label:`gua (${c})`,value:y.hydration,onChange:z=>l(m,"hydration",Math.min(200,Math.max(0,z))),mode:i,flourWeight:N>0?N:s,name:`${m}-hydration`}),typeof y.yeastPct<"u"&&a.jsx(Is,{label:`Fermento (${c})`,value:y.yeastPct,onChange:z=>l(m,"yeastPct",z),mode:i,flourWeight:N>0?N:s,name:`${m}-yeast`,decimals:2}),typeof y.inoculationPct<"u"&&a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:y.inoculationPct,onChange:z=>l(m,"inoculationPct",parseFloat(z.target.value)),step:1}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Tempo"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.time_h,onChange:z=>l(m,"time_h",parseFloat(z.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Temp."}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.temp_C,onChange:z=>l(m,"temp_C",parseFloat(z.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&a.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(N,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(C,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(N+C,0,"g")})]})]})]})]})};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipo de Fermentao"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(m=>a.jsxs("label",{className:"button "+(t===m?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:m,checked:t===m,onChange:()=>e==null?void 0:e(m)}),m]},m))}),t==="Poolish"&&p("poolish"),t==="Biga"&&p("biga"),t==="Levain"&&p("levain"),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function YD(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function jo(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function XD({inputMode:t,setInputMode:e}){const[n,r]=j.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,s]=j.useState({}),o=j.useRef(null),[l,c]=j.useState("synced"),[d,h]=j.useState(null),[p,m]=j.useState(null),[y,N]=j.useState(null),C=j.useRef(null),z=j.useCallback((S,O="success")=>{C.current&&clearTimeout(C.current),N({message:S,type:O}),C.current=setTimeout(()=>N(null),3500)},[]),[b,x]=j.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});j.useEffect(()=>{(async()=>{const O=YD();s(O);try{const G=await Re.getAllRecipes();if(Object.keys(G).length>0){const ee={...O,...G};s(ee),jo(ee)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function w(S,O){r(G=>({...G,[S]:typeof O=="number"&&Number.isNaN(O)?"":O}))}function R(S){r(O=>({...O,preferment:S}))}function V(S){r(O=>({...O,yeastType:S}))}function M(S,O){t==="grams"?x(G=>({...G,[S]:Number(O)||0})):w(S,O)}function k(S){x(O=>({...O,flour:Number(S)||0}))}const v=j.useMemo(()=>{var ee;const S=L=>Number(L)||0,O=((ee=n.yeastType)==null?void 0:ee[n.yeastSelection])||{},G=S(O.yeastPct);return 100+S(n.water)+S(n.sugar)+S(n.salt)+S(n.oliveOil)+S(n.oil)+S(n.milk)+S(n.butter)+S(n.diastatic)+G},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),_=j.useMemo(()=>{const S=Number(n.doughBalls)||0,O=Number(n.ballWeight)||0;return S*O},[n.doughBalls,n.ballWeight]),T=j.useMemo(()=>{const S=Number(_)||0,O=Number(v)||100;return O<=0?0:S*100/O},[_,v]),A=j.useMemo(()=>{var L;const S=T,O=q=>S*(Number(q)||0)/100,G=((L=n.yeastType)==null?void 0:L[n.yeastSelection])||{},ee=Number(G.yeastPct)||0;return{flour:S,water:O(n.water),sugar:O(n.sugar),salt:O(n.salt),oliveOil:O(n.oliveOil),oil:O(n.oil),milk:O(n.milk),butter:O(n.butter),diastatic:O(n.diastatic),yeast:S*ee/100,total:S+O(n.water)+O(n.sugar)+O(n.salt)+O(n.oliveOil)+O(n.oil)+O(n.milk)+O(n.butter)+O(n.diastatic)+S*ee/100}},[T,n]),D=j.useMemo(()=>{if(t==="grams"){const S=(Number(b.flour)||0)+(Number(b.water)||0)+(Number(b.sugar)||0)+(Number(b.salt)||0)+(Number(b.oliveOil)||0)+(Number(b.oil)||0)+(Number(b.milk)||0)+(Number(b.butter)||0)+(Number(b.diastatic)||0)+(Number(b.yeast)||0);return{flour:b.flour,water:b.water,sugar:b.sugar,salt:b.salt,oliveOil:b.oliveOil,oil:b.oil,milk:b.milk,butter:b.butter,diastatic:b.diastatic,yeast:b.yeast,total:S}}return A},[t,b,A]),I=j.useMemo(()=>{const S=Number(D.flour)||0;if(S<=0)return 0;const O=Number(D.water)||0,G=Number(D.milk)||0;return(O+G)/S*100},[D.flour,D.water,D.milk]),xe=String(n.prefermentType||"").toLowerCase(),ce=n.preferment&&n.preferment[xe]?n.preferment[xe]:null,re=ce?T*(Number(ce.pct)||0)/100:0,le=re*(Number(ce==null?void 0:ce.hydration)||0)/100,Y=re+le;function ie(){m({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:S=>{if(!S)return;const O={...i,[S]:n};s(O),jo(O),Re.saveRecipe(S,n).then(G=>{G&&c("synced")}),m(null)},onCancel:()=>m(null)})}function te(S){const O=i[S];O&&r(O)}function ue(S){h({title:"Excluir Receita",message:`A receita "${S}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const O={...i};delete O[S],s(O),jo(O),Re.deleteRecipe(S),h(null)},onCancel:()=>h(null)})}function he(S){m({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:S,onConfirm:O=>{if(!O||O===S)return;const G={...i};G[O]=G[S];const ee=G[S];delete G[S],s(G),jo(G),Re.deleteRecipe(S),Re.saveRecipe(O,ee),m(null)},onCancel:()=>m(null)})}function Ee(){const S=JSON.stringify({inputs:n,recipes:i},null,2),O=new Blob([S],{type:"application/json"}),G=URL.createObjectURL(O),ee=document.createElement("a");ee.href=G,ee.download="padoca_pizza_recipes.json",ee.click(),URL.revokeObjectURL(G)}function P(S){var ee;const O=(ee=S.target.files)==null?void 0:ee[0];if(!O)return;const G=new FileReader;G.onload=L=>{try{const q=JSON.parse(String(L.target.result||"{}"));q.inputs&&r(q.inputs),q.recipes&&(s(q.recipes),jo(q.recipes)),z("Importao concluda!","success")}catch{z("Arquivo invlido.","error")}},G.readAsText(O),S.target.value=""}function B(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function U(S,O=0,G=""){let ee=Number(S);if(!Number.isFinite(ee))return"";let L=G,q=O;G==="g"&&Math.abs(ee)>=1e3&&(ee=ee/1e3,L="kg",q=2);const H=ee.toLocaleString("pt-BR",{minimumFractionDigits:q,maximumFractionDigits:q});return L?`${H} ${L}`:H}function W(S){return(Number(S)||0)>.001}return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:U(D.total,0,"g")})]})]}),a.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:U(_,0,"g")})})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(D.total)||0)-(Number(_)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:U((Number(D.total)||0)-(Number(_)||0),1,"g")})})]})]})]})}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:S=>{const O=parseFloat(S.target.value);w("doughBalls",Math.round(O))}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:S=>{const O=parseFloat(S.target.value);if(t==="grams"){const ee=T*v/100;let L=O>0?Math.round(ee/O):1;L<1&&(L=1);const q=Math.round(ee/L);r(H=>({...H,ballWeight:q,doughBalls:L}))}else w("ballWeight",Math.round(O))}})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),a.jsx(QD,{value:n.prefermentType,onChange:S=>w("prefermentType",S),data:n.preferment,onDataChange:R,inputMode:t,flourWeight:T})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&a.jsx(Yn,{label:"Farinha Total",value:b.flour,onChange:k,unit:"g"}),a.jsx(Yn,{label:"gua",value:t==="grams"?b.water:n.water,onChange:S=>M("water",S),unit:t==="grams"?"g":"%"}),a.jsx(Yn,{label:"Sal",value:t==="grams"?b.salt:n.salt,onChange:S=>M("salt",S),unit:t==="grams"?"g":"%"}),a.jsx(Yn,{label:"Azeite",value:t==="grams"?b.oliveOil:n.oliveOil,onChange:S=>M("oliveOil",S),unit:t==="grams"?"g":"%"}),a.jsx(Yn,{label:"Acar",value:t==="grams"?b.sugar:n.sugar,onChange:S=>M("sugar",S),unit:t==="grams"?"g":"%"}),a.jsx(Yn,{label:"leo",value:t==="grams"?b.oil:n.oil,onChange:S=>M("oil",S),unit:t==="grams"?"g":"%"}),a.jsx(Yn,{label:"Leite",value:t==="grams"?b.milk:n.milk,onChange:S=>M("milk",S),unit:t==="grams"?"g":"%"}),a.jsx(Yn,{label:"Manteiga",value:t==="grams"?b.butter:n.butter,onChange:S=>M("butter",S),unit:t==="grams"?"g":"%"}),a.jsx(Yn,{label:"Malte",value:t==="grams"?b.diastatic:n.diastatic,onChange:S=>M("diastatic",S),unit:t==="grams"?"g":"%"})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),a.jsx(KD,{value:n.yeastSelection,onChange:S=>w("yeastSelection",S),data:n.yeastType,onDataChange:V,inputMode:t,flourWeight:T})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:S=>w("RT_h",parseFloat(S.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:S=>w("RT_C",parseFloat(S.target.value))})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:S=>w("CT_h",parseFloat(S.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:S=>w("CT_C",parseFloat(S.target.value))})]})]})]}),n.prefermentType!=="None"&&ce&&a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:U(ce.pct,1,"%")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(re,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(le,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(Y,0,"g")})]})]}),(typeof ce.yeastPct<"u"||typeof ce.inoculationPct<"u"||typeof ce.time_h<"u"||typeof ce.temp_C<"u")&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof ce.yeastPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(re*(Number(ce.yeastPct)||0)/100,2,"g")})]}),typeof ce.inoculationPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(ce.inoculationPct,1,"%")})]}),typeof ce.time_h<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(ce.time_h,0,"h")})]}),typeof ce.temp_C<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(ce.temp_C,0,"C")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[W(D.flour)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.flour-re,0,"g")})]}),W(D.water)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.water-le,0,"g")})]}),n.prefermentType!=="None"&&ce&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(Y,0,"g")})]}),W(D.salt)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.salt,1,"g")})]}),W(D.sugar)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.sugar,1,"g")})]}),W(D.oliveOil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.oliveOil,1,"g")})]}),W(D.oil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.oil,1,"g")})]}),W(D.milk)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.milk,1,"g")})]}),W(D.butter)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.butter,1,"g")})]}),W(D.diastatic)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.diastatic,1,"g")})]}),W(D.yeast)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.yeast,2,"g")})]})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(D.total,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(I,1,"%")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx("button",{onClick:ie,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),a.jsx("button",{onClick:()=>{var S;return(S=o.current)==null?void 0:S.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),a.jsx("button",{onClick:Ee,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),a.jsx("button",{onClick:B,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),a.jsx("input",{ref:o,type:"file",accept:"application/json",className:"hidden",onChange:P})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?a.jsxs("div",{className:"text-center py-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):a.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([S])=>a.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[a.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:S}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>te(S),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),a.jsx("button",{onClick:()=>he(S),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),a.jsx("button",{onClick:()=>ue(S),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},S))})]}),a.jsx(Ie,{children:d&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:d.onCancel}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${d.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:d.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:d.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:d.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:d.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${d.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(Ie,{children:p&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:p.onCancel}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:p.title}),a.jsx("input",{autoFocus:!0,defaultValue:p.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:p.placeholder,onKeyDown:S=>{S.key==="Enter"&&p.onConfirm(S.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:p.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:S=>{const O=S.target.closest(".relative").querySelector("input");p.onConfirm(O.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),a.jsx(Ie,{children:y&&jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${y.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":y.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${y.type==="error"?"bg-white animate-pulse":y.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:y.message})]}),document.body)})]})}const JD=10*1024*1024,ZD=15e3,e9=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>JD){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const o=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},ZD),l=new Image;l.onload=()=>{clearTimeout(o);try{const c=document.createElement("canvas");let d=l.width,h=l.height;d>e&&(h=e/d*h,d=e),c.width=d,c.height=h;const p=c.getContext("2d");if(!p){i(new Error("Falha ao criar contexto de imagem."));return}p.drawImage(l,0,0,d,h);const m=c.toDataURL("image/jpeg",n);if(!m||m==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(m)}catch(c){i(new Error("Erro ao processar imagem: "+c.message))}},l.onerror=()=>{clearTimeout(o),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t});var Gf=function(t,e){return Gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Gf(t,e)};function t9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var gt=function(){return gt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gt.apply(this,arguments)};var d1=!1,yi,Kf,Qf,oc,ac,zN,lc,Yf,Xf,Jf,AN,Zf,ep,PN,RN;function $t(){if(!d1){d1=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(Zf=/\b(iPhone|iP[ao]d)/.exec(t),ep=/\b(iP[ao]d)/.exec(t),Jf=/Android/i.exec(t),PN=/FBAN\/\w+;/i.exec(t),RN=/Mobile/i.exec(t),AN=!!/Win64/.exec(t),e){yi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,yi&&document&&document.documentMode&&(yi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);zN=r?parseFloat(r[1])+4:yi,Kf=e[2]?parseFloat(e[2]):NaN,Qf=e[3]?parseFloat(e[3]):NaN,oc=e[4]?parseFloat(e[4]):NaN,oc?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),ac=e&&e[1]?parseFloat(e[1]):NaN):ac=NaN}else yi=Kf=Qf=ac=oc=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);lc=i?parseFloat(i[1].replace("_",".")):!0}else lc=!1;Yf=!!n[2],Xf=!!n[3]}else lc=Yf=Xf=!1}}var tp={ie:function(){return $t()||yi},ieCompatibilityMode:function(){return $t()||zN>yi},ie64:function(){return tp.ie()&&AN},firefox:function(){return $t()||Kf},opera:function(){return $t()||Qf},webkit:function(){return $t()||oc},safari:function(){return tp.webkit()},chrome:function(){return $t()||ac},windows:function(){return $t()||Yf},osx:function(){return $t()||lc},linux:function(){return $t()||Xf},iphone:function(){return $t()||Zf},mobile:function(){return $t()||Zf||ep||Jf||RN},nativeApp:function(){return $t()||PN},android:function(){return $t()||Jf},ipad:function(){return $t()||ep}},n9=tp,r9=!!(typeof window<"u"&&window.document&&window.document.createElement),i9={canUseDOM:r9},s9=i9,DN=s9,VN;DN.canUseDOM&&(VN=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function o9(t,e){if(!DN.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&VN&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var a9=o9,l9=n9,c9=a9,h1=10,f1=40,p1=800;function MN(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*h1,i=n*h1,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=f1,i*=f1):(r*=p1,i*=p1)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}MN.getEventType=function(){return l9.firefox()?"DOMMouseScroll":c9("wheel")?"wheel":"mousewheel"};var u9=MN,d9=u9;const h9=k1(d9);function f9(t,e,n,r,i,s){s===void 0&&(s=0);var o=qs(t,e,s),l=o.width,c=o.height,d=Math.min(l,n),h=Math.min(c,r);return d>h*i?{width:h*i,height:h}:{width:d,height:d/i}}function p9(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Io(t,e,n,r,i){i===void 0&&(i=0);var s=qs(e.width,e.height,i),o=s.width,l=s.height;return{x:m1(t.x,o,n.width,r),y:m1(t.y,l,n.height,r)}}function m1(t,e,n,r){var i=e*r/2-n/2;return Fu(t,-i,i)}function g1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function x1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function m9(t,e,n,r,i,s,o){s===void 0&&(s=0),o===void 0&&(o=!0);var l=o?g9:x9,c=qs(e.width,e.height,s),d=qs(e.naturalWidth,e.naturalHeight,s),h={x:l(100,((c.width-n.width/i)/2-t.x/i)/c.width*100),y:l(100,((c.height-n.height/i)/2-t.y/i)/c.height*100),width:l(100,n.width/c.width*100/i),height:l(100,n.height/c.height*100/i)},p=Math.round(l(d.width,h.width*d.width/100)),m=Math.round(l(d.height,h.height*d.height/100)),y=d.width>=d.height*r,N=y?{width:Math.round(m*r),height:m}:{width:p,height:Math.round(p/r)},C=gt(gt({},N),{x:Math.round(l(d.width-N.width,h.x*d.width/100)),y:Math.round(l(d.height-N.height,h.y*d.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:C}}function g9(t,e){return Math.min(t,Math.max(0,e))}function x9(t,e){return e}function y9(t,e,n,r,i,s){var o=qs(e.width,e.height,n),l=Fu(r.width/o.width*(100/t.width),i,s),c={x:l*o.width/2-r.width/2-o.width*l*(t.x/100),y:l*o.height/2-r.height/2-o.height*l*(t.y/100)};return{crop:c,zoom:l}}function v9(t,e,n){var r=p9(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function w9(t,e,n,r,i,s){n===void 0&&(n=0);var o=qs(e.naturalWidth,e.naturalHeight,n),l=Fu(v9(t,e,r),i,s),c=r.height>r.width?r.height/t.height:r.width/t.width,d={x:((o.width-t.width)/2-t.x)*c,y:((o.height-t.height)/2-t.y)*c};return{crop:d,zoom:l}}function y1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function b9(t){return t*Math.PI/180}function qs(t,e,n){var r=b9(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function Fu(t,e,n){return Math.min(Math.max(t,e),n)}function Dl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var k9=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,_9=1,N9=3,E9=1,T9=function(t){t9(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=j.createRef(),n.imageRef=j.createRef(),n.videoRef=j.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=y9(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=i.crop,o=i.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var l=w9(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=l.crop,o=l.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var r,i,s,o,l,c,d=n.imageRef.current||n.videoRef.current;if(d&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,p=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,m=((s=n.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,y=d.offsetWidth<p||d.offsetHeight<m,N=p/m,C=void 0;if(y)switch(n.state.mediaObjectFit){default:case"contain":C=h>N?{width:n.containerRect.height*N,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/N};break;case"horizontal-cover":C={width:n.containerRect.width,height:n.containerRect.width/N};break;case"vertical-cover":C={width:n.containerRect.height*N,height:n.containerRect.height};break}else C={width:d.offsetWidth,height:d.offsetHeight};n.mediaSize=gt(gt({},C),{naturalWidth:p,naturalHeight:m}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var z=n.props.cropSize?n.props.cropSize:f9(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((l=n.state.cropSize)===null||l===void 0?void 0:l.height)!==z.height||((c=n.state.cropSize)===null||c===void 0?void 0:c.width)!==z.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(z),n.setState({cropSize:z},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(z),z}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),s=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(s,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+r.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,s,o=r.x,l=r.y;n.dragStartPosition={x:o,y:l},n.dragStartCrop=gt({},n.props.crop),(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i)},n.onDrag=function(r){var i=r.x,s=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||s===void 0)){var o=i-n.dragStartPosition.x,l=s-n.dragStartPosition.y,c={x:n.dragStartCrop.x+o,y:n.dragStartCrop.y+l},d=n.props.restrictPosition?Io(c,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):c;n.props.onCropChange(d)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),s=h9(r).pixelY,o=n.props.zoom-s*n.props.zoomSpeed/200;n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=n.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=n.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},n.getPointOnContainer=function(r,i){var s=r.x,o=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(s-i.x),y:n.containerRect.height/2-(o-i.y)}},n.getPointOnMedia=function(r){var i=r.x,s=r.y,o=n.props,l=o.crop,c=o.zoom;return{x:(i+l.x)/c,y:(s+l.y)/c}},n.setNewZoom=function(r,i,s){var o=s===void 0?{}:s,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!n.state.cropSize||!n.props.onZoomChange)){var d=Fu(r,n.props.minZoom,n.props.maxZoom);if(c){var h=n.getPointOnContainer(i,n.containerPosition),p=n.getPointOnMedia(h),m={x:p.x*d-h.x,y:p.y*d-h.y},y=n.props.restrictPosition?Io(m,n.mediaSize,n.state.cropSize,d,n.props.rotation):m;n.props.onCropChange(y)}n.props.onZoomChange(d)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?Io(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return m9(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,s),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.recomputeCropPosition=function(){var r,i;if(n.state.cropSize){var s=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((i=n.previousCropSize)===null||i===void 0)&&i.height)){var o=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(o){var l=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;s={x:n.props.crop.x*l,y:n.props.crop.y*c}}}var d=n.props.restrictPosition?Io(s,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):s;n.previousCropSize=n.state.cropSize,n.props.onCropChange(d),n.emitCropData()}},n.onKeyDown=function(r){var i,s,o=n.props,l=o.crop,c=o.onCropChange,d=o.keyboardStep,h=o.zoom,p=o.rotation,m=d;if(n.state.cropSize){r.shiftKey&&(m*=.2);var y=gt({},l);switch(r.key){case"ArrowUp":y.y-=m,r.preventDefault();break;case"ArrowDown":y.y+=m,r.preventDefault();break;case"ArrowLeft":y.x-=m,r.preventDefault();break;case"ArrowRight":y.x+=m,r.preventDefault();break;default:return}n.props.restrictPosition&&(y=Io(y,n.mediaSize,n.state.cropSize,h,p)),r.repeat||(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i),c(y)}},n.onKeyUp=function(r){var i,s;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(s=(i=n.props).onInteractionEnd)===null||s===void 0||s.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=k9,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,s,o,l,c,d,h,p;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((s=n.cropSize)===null||s===void 0?void 0:s.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=n.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=n.crop)===null||d===void 0?void 0:d.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((p=this.videoRef.current)===null||p===void 0||p.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,s;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,d=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,h=c/d;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=g1(r,i),this.lastPinchRotation=x1(r,i),this.onDragStart(y1(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]),o=y1(i,s);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=g1(i,s),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var d=x1(i,s),h=r.props.rotation+(d-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=d})}},e.prototype.render=function(){var n=this,r,i=this.props,s=i.image,o=i.video,l=i.mediaProps,c=i.cropperProps,d=i.transform,h=i.crop,p=h.x,m=h.y,y=i.rotation,N=i.zoom,C=i.cropShape,z=i.showGrid,b=i.roundCropAreaPixels,x=i.style,w=x.containerStyle,R=x.cropAreaStyle,V=x.mediaStyle,M=i.classes,k=M.containerClassName,v=M.cropAreaClassName,_=M.mediaClassName,T=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return j.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(D){return n.containerRef=D},"data-testid":"container",style:w,className:Dl("reactEasyCrop_Container",k)},s?j.createElement("img",gt({alt:"",className:Dl("reactEasyCrop_Image",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{src:s,ref:this.imageRef,style:gt(gt({},V),{transform:d||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(y,"deg) scale(").concat(N,")")}),onLoad:this.onMediaLoad})):o&&j.createElement("video",gt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Dl("reactEasyCrop_Video",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:gt(gt({},V),{transform:d||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(y,"deg) scale(").concat(N,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(A){return j.createElement("source",gt({key:A.src},A))})),this.state.cropSize&&j.createElement("div",gt({ref:this.cropperRef,style:gt(gt({},R),{width:b?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:b?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Dl("reactEasyCrop_CropArea",C==="round"&&"reactEasyCrop_CropAreaRound",z&&"reactEasyCrop_CropAreaGrid",v)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:N9,minZoom:_9,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:E9},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(j.Component);const C9=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",i=>n(i)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function LN(t){return t*Math.PI/180}function S9(t,e,n){const r=LN(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function j9(t,e,n=0,r={horizontal:!1,vertical:!1}){const i=await C9(t),s=document.createElement("canvas"),o=s.getContext("2d");if(!o)return null;const l=LN(n),{width:c,height:d}=S9(i.width,i.height,n);s.width=c,s.height=d,o.translate(c/2,d/2),o.rotate(l),o.scale(r.horizontal?-1:1,r.vertical?-1:1),o.translate(-i.width/2,-i.height/2),o.drawImage(i,0,0);const h=o.getImageData(e.x,e.y,e.width,e.height);return s.width=e.width,s.height=e.height,o.putImageData(h,0,0),s.toDataURL("image/jpeg",.9)}const w0=t=>{j.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth,n=window.getComputedStyle(document.body).overflow,r=window.getComputedStyle(document.body).paddingRight;return document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${parseInt(r||0)+e}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=r}},[t])},I9=()=>{const[t,e]=j.useState(null),n=j.useRef(null),r=j.useCallback((o,l="error")=>{n.current&&clearTimeout(n.current),e({message:o,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),i=j.useMemo(()=>({error:o=>r(o,"error"),success:o=>r(o,"success"),info:o=>r(o,"info")}),[r]),s=t?jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:i,ToastUI:s}},Le={Camera:()=>a.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:t=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},z9=({src:t,onClose:e})=>(w0(!0),jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[a.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:a.jsx(Le.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),a.jsx(oe.img,{src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:n=>n.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body)),A9=({imageSrc:t,onCancel:e,onCropComplete:n})=>{const[r,i]=j.useState({x:0,y:0}),[s,o]=j.useState(1),[l,c]=j.useState(null),[d,h]=j.useState(!1);w0(!0);const p=(y,N)=>{c(N)},m=async()=>{try{const y=await j9(t,l);n(y)}catch(y){console.error(y)}};return jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black flex flex-col",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[20001] px-6 py-12 flex justify-between items-center bg-gradient-to-b from-black/80 via-black/40 to-transparent pointer-events-none",children:[a.jsx("button",{onClick:e,className:"pointer-events-auto px-5 py-2.5 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/10 text-white text-sm font-semibold transition-all active:scale-95",children:"Cancelar"}),a.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest opacity-80 mt-1",children:"Redimensionar"}),a.jsx("button",{onClick:m,className:"pointer-events-auto px-6 py-2.5 rounded-full bg-white text-black text-sm font-bold transition-all hover:bg-zinc-100 active:scale-95 shadow-[0_4px_24px_rgba(255,255,255,0.2)]",children:"OK"})]}),a.jsx("div",{className:"relative flex-1 bg-black",children:a.jsx(T9,{image:t,crop:r,zoom:s,aspect:4/5,onCropChange:i,onZoomChange:o,onCropComplete:p,showGrid:d,onInteractionStart:()=>h(!0),onInteractionEnd:()=>h(!1),classes:{containerClassName:"bg-black",mediaClassName:"object-contain",cropAreaClassName:"border border-white/40 shadow-[0_0_0_1000px_rgba(0,0,0,0.7)]"}})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[20001] px-8 py-16 flex flex-col items-center bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none",children:[a.jsxs("div",{className:"w-full max-w-xs flex items-center gap-6 pointer-events-auto",children:[a.jsx("button",{onClick:()=>o(Math.max(1,s-.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:a.jsx(Le.Camera,{className:"w-4 h-4"})}),a.jsx("input",{type:"range",value:s,min:1,max:3,step:.01,onChange:y=>o(parseFloat(y.target.value)),className:"range-slider accent-white"}),a.jsx("button",{onClick:()=>o(Math.min(3,s+.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:a.jsx(Le.Plus,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"mt-8 flex gap-1 items-center opacity-30 select-none",children:[1,1.5,2,2.5,3].map(y=>a.jsx("div",{className:`w-1 h-3 rounded-full transition-all duration-300 ${s>=y?"bg-white h-5 opacity-100":"bg-white/40"}`},y))})]}),a.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/20 rounded-full z-[20002]"})]}),document.body)},P9=({id:t,children:e})=>{const n=Sm();return a.jsx(_u,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},R9=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,s]=j.useState(""),[o,l]=j.useState(null),[c,d]=j.useState(""),[h,p]=j.useState(null),[m,y]=j.useState(null),N=["#E63946","#F4A261","#E9C46A","#2A9D8F","#457B9D","#264653","#6D597A","#B5838D","#7F9183","#3D405B"],C=R=>typeof R=="string"?{name:R,color:"#007AFF"}:{name:R.name||"Sem nome",color:R.color||"#007AFF"},z=()=>{const R=i.trim();!R||t.some(M=>Mt(M)===R)||(n([...t,{name:R,color:"#007AFF"}]),s(""))},b=R=>{const V=c.trim(),M=Mt(R);if(!V||V===M){l(null);return}if(t.some(v=>Mt(v)===V)){l(null);return}r(M,V),n(t.map(v=>{const _=C(v);return _.name===M?{..._,name:V}:_})),l(null)},x=(R,V)=>{const M=Mt(R);n(t.map(k=>{const v=C(k);return v.name===M?{...v,color:V}:v})),y(null)},w=R=>{const V=Mt(R);n(t.filter(M=>Mt(M)!==V)),r(V,"Outros"),p(null)};return a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white/5 dark:bg-white/5 backdrop-blur-lg",onClick:e}),a.jsxs(oe.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:400,damping:35},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl overflow-hidden max-h-[90vh] md:max-h-[85vh] flex flex-col safe-area-bottom",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),a.jsx("p",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mt-1",children:"Organize sua biblioteca de receitas"})]}),a.jsx("button",{onClick:e,className:"p-3 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation z-[60] relative shrink-0",children:a.jsx(Le.Close,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-8 shrink-0",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:R=>s(R.target.value),onKeyDown:R=>R.key==="Enter"&&z(),className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-bold focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400/50",placeholder:"Nome da categoria"}),a.jsx("button",{onClick:z,disabled:!i.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-500/20",children:a.jsx(Le.Plus,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-3",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2 sticky top-0 bg-white dark:bg-zinc-900 py-2 z-10",children:"Suas Categorias"}),t.map((R,V)=>{const{name:M,color:k}=C(R),v=M+V;return a.jsxs("div",{className:"group flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-800/20 hover:border-indigo-200 dark:hover:border-indigo-700 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("button",{onClick:()=>y(m===v?null:v),className:"w-4 h-4 rounded-full shrink-0 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-zinc-900 ring-transparent hover:ring-indigo-300 transition-all shadow-sm",style:{backgroundColor:k}}),a.jsx(Ie,{children:m===v&&a.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed inset-x-4 bottom-4 md:absolute md:inset-auto md:left-0 md:top-full md:mt-2 z-[70] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:[a.jsx("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 text-center md:text-left",children:"Escolha uma cor"}),a.jsx("div",{className:"grid grid-cols-5 gap-3",children:N.map(_=>a.jsx("button",{onClick:()=>x(R,_),className:`w-10 h-10 md:w-7 md:h-7 rounded-full transition-transform hover:scale-110 active:scale-95 ${k===_?"ring-2 ring-offset-2 ring-zinc-400 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:_}},_))}),a.jsx("button",{onClick:()=>y(null),className:"mt-4 w-full py-3 bg-zinc-100 dark:bg-zinc-700 rounded-xl text-xs font-bold text-zinc-600 dark:text-zinc-300 uppercase tracking-wider md:hidden",children:"Fechar"})]})}),a.jsx("div",{className:"flex-1 min-w-0",children:o===v?a.jsx("input",{autoFocus:!0,value:c,onChange:_=>d(_.target.value),onBlur:()=>b(R),onKeyDown:_=>{_.key==="Enter"&&b(R),_.key==="Escape"&&l(null)},className:"w-full bg-transparent outline-none text-sm font-bold text-zinc-900 dark:text-white"}):a.jsx("span",{onClick:()=>{l(v),d(M)},className:"text-sm font-medium text-indigo-900 dark:text-indigo-200 cursor-text truncate block select-none",children:M})})]}),a.jsx("button",{onClick:()=>p(R),className:"p-3 rounded-lg text-indigo-300 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:a.jsx(Le.Trash,{className:"w-4 h-4"})})]},v)})]}),a.jsx(Ie,{children:h&&a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white/90 dark:bg-zinc-900/95 backdrop-blur-md z-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"text-center w-full",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4 shadow-sm",children:a.jsx(Le.Trash,{className:"w-8 h-8"})}),a.jsx("h4",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),a.jsxs("p",{className:"text-sm text-zinc-500 mb-8 leading-relaxed",children:["A categoria ",a.jsxs("span",{className:"font-bold text-zinc-800 dark:text-zinc-200",children:['"',Mt(h),'"']})," ser removida.",a.jsx("br",{}),'As receitas sero movidas para "Outros".']}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>p(null),className:"py-3 text-xs font-bold uppercase tracking-wider text-zinc-500 bg-zinc-100 dark:bg-zinc-800 rounded-xl hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>w(h),className:"py-3 text-xs font-bold uppercase tracking-wider text-white bg-rose-500 rounded-xl hover:bg-rose-600 shadow-lg shadow-rose-500/20 transition-all active:scale-95",children:"Excluir"})]})]})})})]})]})},D9=gn.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:i})=>{const s=Sm(),[o,l]=j.useState(!1);return a.jsx(_u,{value:t,dragListener:i,dragControls:s,className:`group relative mb-2 transition-all duration-300 ease-out ${i?"":"cursor-pointer"}`,onClick:()=>!i&&l(!o),children:a.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${i?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":o?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[i&&a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:c=>s.start(c),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!i&&a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${o?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:o&&a.jsx(Le.Check,{className:"w-3 h-3 text-white"})}),i?a.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:c=>e({...t,name:c.target.value}),onKeyDown:c=>{if(c.key==="Enter"){c.preventDefault();const d=document.getElementById(`ing-qty-${t.id}`);d&&d.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):a.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${o?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),a.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:a.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:c=>{const d=c.target.value;(d===""||/^[0-9.,]*$/.test(d))&&e({...t,quantity:d})},onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),a.jsx("select",{value:t.unit,onChange:c=>e({...t,unit:c.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(c=>a.jsx("option",{value:c,children:c},c))})]}):a.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${o?"opacity-50":""}`,children:[a.jsx("span",{children:t.quantity}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),i&&a.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),V9=gn.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i,isEditing:s})=>{const o=Sm(),[l,c]=j.useState(!1);return a.jsx(_u,{value:t,dragListener:s,dragControls:o,className:`group relative mb-2 transition-all duration-300 ease-out ${s?"":"cursor-pointer"}`,onClick:()=>!s&&c(!l),children:a.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${s?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[s&&a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:d=>o.start(d),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),a.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!s&&l?a.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:a.jsx(Le.Check,{className:"w-3 h-3 text-white"})}):a.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),s?a.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:d=>n({...t,text:d.target.value}),onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:d=>{d.target.style.height="auto",d.target.style.height=d.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):a.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),s&&a.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),Mt=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",v1=(t,e)=>{const n=t.find(r=>Mt(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function M9(){const{toast:t,ToastUI:e}=I9(),[n,r]=j.useState([]),[i,s]=j.useState(["Tradicionais","Especiais","Veganas","Doces"]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[h,p]=j.useState("Todas"),[m,y]=j.useState(!0),[N,C]=j.useState(null),[z,b]=j.useState(null),[x,w]=j.useState(null),[R,V]=j.useState(!1),[M,k]=j.useState(!1),[v,_]=j.useState(!1),[T,A]=j.useState(!1),[D,I]=j.useState(null),xe=j.useRef(null);j.useRef(null);const ce=j.useRef({}),re=j.useRef({});j.useEffect(()=>{let P=!0;return(async()=>{try{const U=await Re.getRecipesV3();if(!P)return;Array.isArray(U)&&U.length>0?r(U.map(W=>{let S=Array.isArray(W.sections)?W.sections:[];return S.length===0&&(Array.isArray(W.ingredientSections)||Array.isArray(W.instructionSections))&&(S=[...Array.isArray(W.ingredientSections)?W.ingredientSections.map(O=>({...O,type:"ingredients"})):[],...Array.isArray(W.instructionSections)?W.instructionSections.map(O=>({...O,type:"instructions"})):[]]),S.length>0&&(S=S.map(O=>({...O,items:Array.isArray(O.items)?O.items.filter(G=>{var ee,L,q;return O.type==="ingredients"?((ee=G.name)==null?void 0:ee.trim())||((L=G.quantity)==null?void 0:L.trim()):(q=G.text)==null?void 0:q.trim()}):[]}))),{id:String(W.id),name:W.name||"Sem nome",category:W.category||"Outros",prepTime:W.prepTime??0,cookTime:W.cookTime??0,temperature:W.temperature??180,image:W.image||null,sections:S,createdAt:W.createdAt||new Date().toISOString(),updatedAt:W.updatedAt||new Date().toISOString()}})):r([])}catch{P&&r([])}try{const U=await Re.getRecipeCategories();P&&U&&Array.isArray(U)&&s(U)}catch{}P&&(y(!1),C(null))})(),()=>{P=!1}},[]),j.useEffect(()=>{if(m)return;const P=setTimeout(()=>{Re.syncRecipeCategories(i)},1e3);return()=>clearTimeout(P)},[i,m]);const le=(P,B)=>{const U=String(P);k(!0),_(!1),r(W=>W.map(S=>String(S.id)===U?{...S,...B,updatedAt:new Date().toISOString()}:S)),ce.current[U]={...ce.current[U]||{},...B,updatedAt:new Date().toISOString()},re.current[U]&&clearTimeout(re.current[U]),re.current[U]=setTimeout(async()=>{const W=ce.current[U];if(!W){k(!1);return}delete ce.current[U],delete re.current[U];try{await Re.syncRecipeV3(U,W,!0)||_(!0)}catch{_(!0)}finally{Object.keys(ce.current).length===0&&k(!1)}},1200)},Y=P=>{const B=P.target.files[0];if(!B)return;if(!o){t.error("Nenhuma receita selecionada.");return}const U=new FileReader;U.onload=()=>{I(U.result)},U.readAsDataURL(B),P.target.value=null},ie=async P=>{try{A(!0),I(null);const B=await e9(P);le(o,{image:B}),t.success("Imagem atualizada!")}catch(B){console.error(B),t.error("Erro ao processar imagem.")}finally{A(!1)}},te=async P=>{const B=String(P);w(null),r(U=>U.filter(W=>String(W.id)!==B)),String(o)===B&&l(null);try{if(!await Re.deleteRecipeV3(B))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},ue=j.useMemo(()=>n.filter(P=>h==="Todas"||P.category===h),[n,h]),he=j.useMemo(()=>n.find(P=>String(P.id)===String(o)),[n,o]),Ee=j.useCallback(()=>{if(he&&he.sections){const P=he.sections.map(B=>B.type==="ingredients"?{...B,items:(B.items||[]).filter(U=>U.name.trim()||U.quantity.trim())}:B.type==="instructions"?{...B,items:(B.items||[]).filter(U=>U.text.trim())}:B);le(o,{sections:P})}d(!1)},[he,o,le]);return m?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):N?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:a.jsxs("div",{className:"text-center max-w-sm",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:N}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx(Ie,{children:!o&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${v?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":M?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${v?"bg-rose-500":M?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:v?"Erro de Sync":M?"Sincronizando":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),a.jsxs("button",{onClick:()=>{const P=String(Date.now()),B={id:P,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([B,...n]),l(P),d(!0),Re.syncRecipeV3(P,B)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx(Le.Plus,{}),"Criar Nova Receita"]})]}),a.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:a.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...i].map(P=>a.jsx("button",{onClick:()=>p(Mt(P)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===Mt(P)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:Mt(P)},Mt(P))),a.jsx("button",{onClick:()=>V(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[ue.map(P=>a.jsxs(oe.div,{onClick:()=>{l(P.id),d(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[a.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[P.image?a.jsx(oe.img,{src:P.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):a.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),a.jsx("div",{className:"absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/5 via-transparent to-transparent animate-[spin_20s_linear_infinite] opacity-60"}),a.jsx("div",{className:"absolute bottom-[-50%] right-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/5 via-transparent to-transparent animate-[spin_25s_linear_infinite_reverse] opacity-60"}),a.jsx(oe.div,{animate:{opacity:[.2,.5,.2]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent"}),a.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:a.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:a.jsx(Le.Camera,{})})})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),a.jsx("button",{onClick:B=>{B.stopPropagation(),w({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${P.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{te(P.id)},onCancel:()=>w(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:a.jsx(Le.Trash,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"px-2 pb-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${v1(i,P.category)}15`,color:v1(i,P.category)},children:P.category}),a.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Le.Clock,{}),P.prepTime+P.cookTime,"m"]}),P.temperature>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),P.temperature,""]})]})]})]}),a.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:P.name}),a.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(P.sections||[]).filter(B=>B.type==="ingredients").reduce((B,U)=>{var W;return B+(((W=U.items)==null?void 0:W.length)||0)},0)," ingredientes"]})]})]},P.id)),ue.length===0&&a.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),a.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:a.jsx(Le.Book,{})})]}),a.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),a.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",a.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&jn.createPortal(a.jsx(Ie,{children:o&&he&&a.jsx(oe.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:xe,children:he?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[a.jsx("div",{className:"flex-1 flex justify-start",children:a.jsx("button",{onClick:()=>{const P=(he.sections||[]).map(B=>({...B,items:B.items.filter(U=>{var W,S,O;return B.type==="ingredients"?((W=U.name)==null?void 0:W.trim())||((S=U.quantity)==null?void 0:S.trim()):(O=U.text)==null?void 0:O.trim()})}));le(o,{sections:P}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:a.jsx(Le.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),a.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${v?"text-rose-500":M?"text-zinc-400":"text-zinc-300"}`,children:v?"Falha":M?"Sincronizando...":"Salvo"}),a.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>c?Ee():d(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${c?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:c?"Concludo":"Editar"}),a.jsx("button",{onClick:()=>{w({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{te(o)},onCancel:()=>w(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:a.jsx(Le.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[a.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[a.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:he.image?a.jsxs(a.Fragment,{children:[a.jsx(oe.img,{src:he.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>b(he.image)}),a.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y,disabled:T}),T?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(Le.Camera,{className:"w-5 h-5"})]})]}):a.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y}),a.jsx(Le.Camera,{}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),a.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(P=>a.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:P.label}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("input",{value:he[P.val],onChange:B=>le(o,{[P.val]:B.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),P.unit&&a.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:P.unit})]})]},P.label))})]}),a.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[a.jsxs("div",{className:"space-y-4 md:space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("select",{value:he.category,onChange:P=>le(o,{category:P.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:i.map(P=>a.jsx("option",{value:Mt(P),children:Mt(P)},Mt(P)))})}),a.jsx("textarea",{value:he.name,onChange:P=>le(o,{name:P.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:P=>{P.target.style.height="auto",P.target.style.height=P.target.scrollHeight+"px"}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[a.jsxs("button",{disabled:!c,onClick:()=>le(o,{sections:[...he.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),a.jsxs("button",{disabled:!c,onClick:()=>le(o,{sections:[...he.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),a.jsx(ku,{axis:"y",values:he.sections||[],onReorder:P=>le(o,{sections:P}),className:"space-y-6",children:(he.sections||[]).map(P=>a.jsx(P9,{id:P,children:B=>a.jsx(O9,{section:P,onUpdate:U=>le(o,{sections:he.sections.map(W=>W.id===P.id?U:W)}),onDelete:()=>le(o,{sections:he.sections.filter(U=>U.id!==P.id)}),dragControls:B,isEditing:c})},P.id))}),a.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:a.jsx("button",{onClick:()=>w({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{te(o)},onCancel:()=>w(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),R&&a.jsx(R9,{categories:i,onClose:()=>V(!1),onUpdate:s,onRenameCategory:(P,B)=>{n.filter(U=>U.category===P).forEach(U=>{le(U.id,{category:B})})}},"recipe-cat-modal"),a.jsx(Ie,{children:z&&a.jsx(z9,{src:z,onClose:()=>b(null)})}),typeof document<"u"&&jn.createPortal(a.jsx(Ie,{mode:"wait",children:x&&a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx(L9,{}),a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx(Le.Trash,{})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:x.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:x.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),a.jsx(Ie,{children:D&&a.jsx(A9,{imageSrc:D,onCancel:()=>I(null),onCropComplete:ie})}),e]})}function L9(){return w0(!0),null}function O9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){return t.type==="ingredients"?a.jsx(F9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):t.type==="instructions"?a.jsx(B9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):null}function F9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=gn.useRef(null),o=gn.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],c]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const d=document.getElementById(`ing-name-${l}`);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.focus())})})},[t,e]);return a.jsxs("div",{ref:s,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:a.jsx(Le.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),i?a.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):a.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(Le.Trash,{})})]}),a.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:a.jsx(ku,{axis:"y",values:t.items,onReorder:l=>i&&e({...t,items:l}),children:t.items.map(l=>a.jsx(D9,{item:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===l.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==l.id)}),onNext:()=>{l.name.trim()&&o()},isEditing:i},l.id))})}),i&&a.jsxs("button",{type:"button",onClick:o,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[a.jsx(Le.Plus,{})," Adicionar Ingrediente"]})]})}function B9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=gn.useCallback(()=>{const o=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:o,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const c=document.getElementById(`instr-text-${o}`);c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.focus())})})},[t,e]);return a.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:o=>r.start(o),children:a.jsx(Le.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),i?a.jsx("input",{value:t.title,onChange:o=>e({...t,title:o.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):a.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(Le.Trash,{})})]}),a.jsx(ku,{axis:"y",values:t.items,onReorder:o=>i&&e({...t,items:o}),className:"space-y-3",children:t.items.map((o,l)=>a.jsx(V9,{item:o,index:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===o.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==o.id)}),onNext:()=>{o.text.trim()&&s()},isEditing:i},o.id))}),i&&a.jsxs("button",{type:"button",onClick:s,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[a.jsx(Le.Plus,{})," Adicionar Passo"]})]})}const w1="padoca_kanban_pro_max",Vl={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},U9=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],b1={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},b0=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function $9(){const[t,e]=j.useState(()=>{try{const W=localStorage.getItem(w1);return W?JSON.parse(W):b1}catch{return b1}}),[n,r]=j.useState(null),[i,s]=j.useState(!1),[o,l]=j.useState(""),[c,d]=j.useState(0),[h,p]=j.useState(null),[m,y]=j.useState(""),[N,C]=j.useState(null),[z,b]=j.useState(""),[x,w]=j.useState(null),[R,V]=j.useState(!1),[M,k]=j.useState(null),v=j.useRef(null);j.useCallback((W,S="success")=>{v.current&&clearTimeout(v.current),k({message:W,type:S}),v.current=setTimeout(()=>k(null),3500)},[]);const[_,T]=j.useState({active:null,target:null,isDragging:!1}),A=Oc(0),D=Oc(0),I=j.useRef(null),xe=4,ce=j.useRef(null),re=j.useRef(null),le=j.useRef({colId:null,index:null}),Y=j.useCallback((W="light")=>{navigator.vibrate&&navigator.vibrate(W==="light"?8:W==="medium"?15:25)},[]),ie=j.useCallback((W,S,O)=>{const ee=document.elementsFromPoint(W,S).find(J=>J.hasAttribute("data-column-id"));if(!ee)return null;const L=ee.getAttribute("data-column-id"),q=ee.querySelector("[data-cards-container]");if(!q)return{colId:L,index:0};const H=Array.from(q.querySelectorAll("[data-card-id]")).filter(J=>J.getAttribute("data-card-id")!==O);if(H.length===0)return{colId:L,index:0};for(let J=0;J<H.length;J++){const ke=H[J].getBoundingClientRect(),je=ke.top+ke.height/2;if(S<je)return{colId:L,index:J}}return{colId:L,index:H.length}},[]);j.useEffect(()=>{const W=O=>{const G=I.current;if(G&&!_.isDragging){const ee=O.clientX-G.startX,L=O.clientY-G.startY;if(Math.sqrt(ee*ee+L*L)>xe){const{card:H,colId:J,rect:ke,offsetX:je,offsetY:Ue,cardIndex:$e}=G;A.set(ke.left),D.set(ke.top),T({active:{id:H.id,sourceColId:J,sourceIndex:$e,data:H,rect:ke,offsetX:je,offsetY:Ue},target:{colId:J,index:$e},isDragging:!0}),Y("medium")}return}if(_.isDragging&&_.active){O.preventDefault();const ee=O.clientX-_.active.offsetX,L=O.clientY-_.active.offsetY;if(A.set(ee),D.set(L),re.current)return;re.current=requestAnimationFrame(()=>{const q=ie(O.clientX,O.clientY,_.active.id);if(re.current=null,q){const H=le.current;(H.colId!==q.colId||H.index!==q.index)&&(le.current=q,Y("light"),T(J=>({...J,target:q})))}})}},S=O=>{if(re.current&&(cancelAnimationFrame(re.current),re.current=null),_.isDragging&&_.active){const{active:G,target:ee}=_;document.body.style.cursor="";const L=ee==null?void 0:ee.colId,q=ee==null?void 0:ee.index;L&&(G.sourceColId!==L||G.sourceIndex!==q)&&(e(J=>{const ke=J.columns.map(Xt=>({...Xt,cards:[...Xt.cards]})),je=ke.find(Xt=>Xt.id===G.sourceColId),Ue=ke.find(Xt=>Xt.id===L);if(!je||!Ue)return J;const $e=je.cards.findIndex(Xt=>Xt.id===G.id);if($e===-1)return J;const[lt]=je.cards.splice($e,1);return Ue.cards.splice(q,0,lt),{...J,columns:ke}}),Y("medium")),T({active:null,target:null,isDragging:!1}),le.current={colId:null,index:null}}else if(I.current){const{card:G,colId:ee}=I.current;r({...G,columnId:ee})}I.current=null};return window.addEventListener("pointermove",W,{passive:!1}),window.addEventListener("pointerup",S),window.addEventListener("pointercancel",S),()=>{window.removeEventListener("pointermove",W),window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",S),re.current&&cancelAnimationFrame(re.current)}},[_,ie,Y,A,D]);const te=j.useCallback((W,S,O)=>{var L;if(W.target.closest("button, input, textarea, [data-no-drag]")||W.button&&W.button!==0)return;const G=W.currentTarget,ee=G.getBoundingClientRect();I.current={card:S,colId:O,element:G,rect:ee,startX:W.clientX,startY:W.clientY,offsetX:W.clientX-ee.left,offsetY:W.clientY-ee.top,cardIndex:((L=t.columns.find(q=>q.id===O))==null?void 0:L.cards.findIndex(q=>q.id===S.id))??0}},[t.columns]);j.useEffect(()=>{(async()=>{var S;try{const O=await((S=Re.getKanban)==null?void 0:S.call(Re));O!=null&&O.columns&&e(O)}catch{}finally{V(!0)}})()},[]),j.useEffect(()=>{if(localStorage.setItem(w1,JSON.stringify(t)),R){const W=setTimeout(()=>{var S;try{(S=Re.syncKanban)==null||S.call(Re,t)}catch{}},2e3);return()=>clearTimeout(W)}},[t,R]);const ue=j.useCallback(W=>{if(!m.trim())return;const S={id:`card-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:m.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(O=>({...O,columns:O.columns.map(G=>G.id===W?{...G,cards:[...G.cards,S]}:G)})),y(""),p(null),Y("light")},[m,Y]),he=j.useCallback(W=>{e(S=>({...S,columns:S.columns.map(O=>O.id===W.columnId?{...O,cards:O.cards.map(G=>G.id===W.id?W:G)}:O)}))},[]),Ee=j.useCallback((W,S)=>{w({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(O=>({...O,columns:O.columns.map(G=>G.id===W?{...G,cards:G.cards.filter(ee=>ee.id!==S)}:G)})),r(null),w(null),Y("medium")},onCancel:()=>w(null)})},[Y]),P=j.useCallback(()=>{o.trim()&&(e(W=>({...W,columns:[...W.columns,{id:`col-${Date.now()}`,title:o.trim(),cards:[]}]})),l(""),s(!1),Y("light"))},[o,Y]),B=j.useCallback(W=>{if(!z.trim()){C(null);return}e(S=>({...S,columns:S.columns.map(O=>O.id===W?{...O,title:z.trim()}:O)})),C(null)},[z]),U=j.useCallback(W=>{w({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(S=>({...S,columns:S.columns.filter(O=>O.id!==W)})),w(null),Y("medium")},onCancel:()=>w(null)})},[Y]);return a.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[a.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),a.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${R?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:R?"Cloud Active":"Syncing"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[a.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),a.jsxs("div",{ref:ce,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[a.jsx(Ie,{mode:"popLayout",children:t.columns.map(W=>a.jsx(W9,{col:W,dragState:_,spring:Vl,zoomLevel:c,renamingColId:N,setRenamingColId:C,renameTitle:z,setRenameTitle:b,renameColumn:B,deleteColumn:U,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:y,addCard:ue,handleCardPointerDown:te},W.id))}),i?a.jsxs(oe.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:Vl.enter,className:"flex-shrink-0 w-80 p-6 rounded-[2rem] bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-700 shadow-xl h-min",children:[a.jsx("input",{autoFocus:!0,value:o,onChange:W=>l(W.target.value),onKeyDown:W=>{W.key==="Enter"&&P(),W.key==="Escape"&&(s(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-900 px-4 py-4 rounded-xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-4"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:P,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Criar"}),a.jsx("button",{onClick:()=>{s(!1),l("")},className:"flex-1 bg-zinc-100 dark:bg-zinc-800 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"})]})]}):a.jsx(oe.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>s(!0),className:"flex-shrink-0 w-14 h-14 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-lg flex items-center justify-center text-zinc-400 transition-all",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),a.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:a.jsx(oe.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Vl.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:b0.map((W,S)=>a.jsxs("button",{onClick:()=>{d(S),Y("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${c===S?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[c===S&&a.jsx(oe.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),a.jsx("span",{className:"relative z-10",children:W.label})]},S))})}),a.jsx(H9,{dragState:_,ghostX:A,ghostY:D,spring:Vl}),a.jsx(Ie,{children:n&&a.jsx(K9,{card:n,onClose:()=>r(null),onUpdate:he,onDelete:()=>Ee(n.columnId,n.id),setConfirmModal:w})}),a.jsx(Ie,{children:x&&a.jsx(G9,{...x})}),a.jsx(Ie,{children:M&&jn.createPortal(a.jsxs(oe.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${M.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":M.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${M.type==="error"?"bg-white animate-pulse":M.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:M.message})]}),document.body)})]})}const W9=gn.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:s,renameTitle:o,setRenameTitle:l,renameColumn:c,deleteColumn:d,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:y,addCard:N,handleCardPointerDown:C})=>{var b,x;const z=((b=e.target)==null?void 0:b.colId)===t.id;return a.jsxs(oe.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`
                flex-shrink-0 flex flex-col snap-center
                ${b0[r].width}
                max-h-full rounded-[2rem] md:rounded-[2.5rem]
                bg-white dark:bg-zinc-950
                border border-zinc-200/60 dark:border-white/[0.06]
                shadow-xl shadow-black/[0.03] dark:shadow-black/20
                transition-all duration-300
                ${z?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}
            `,children:[a.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[a.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?a.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:o,onChange:w=>l(w.target.value),onBlur:()=>c(t.id),onKeyDown:w=>{w.key==="Enter"&&c(t.id),w.key==="Escape"&&s(null)}}):a.jsx("h3",{onClick:()=>{s(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),a.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[a.jsx(Ie,{mode:"popLayout",children:t.cards.map((w,R)=>a.jsx(q9,{card:w,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:C},w.id))}),a.jsx(Ie,{mode:"sync",children:e.isDragging&&z&&e.active&&(()=>{const w=t.cards.filter(R=>R.id!==e.active.id);return e.target.index>=w.length})()&&a.jsx(oe.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((x=e.active.rect)==null?void 0:x.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),h===t.id?a.jsxs(oe.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:n.enter,className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-lg",children:[a.jsx("textarea",{autoFocus:!0,value:m,onChange:w=>y(w.target.value),onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),N(t.id)),w.key==="Escape"&&p(null)},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-3",rows:2}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 text-xs font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>N(t.id),disabled:!m.trim(),className:"px-5 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 text-xs font-bold uppercase tracking-wider rounded-xl shadow-md disabled:opacity-50 hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Adicionar"})]})]}):a.jsx("button",{onClick:()=>{p(t.id),y("")},className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all",children:"+ Carto"})]})]})}),q9=gn.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:s})=>{var c,d,h,p;const o=((c=n.active)==null?void 0:c.id)===t.id,l=((d=n.target)==null?void 0:d.colId)===e;return n.isDragging&&l&&n.active,a.jsx(gn.Fragment,{children:!o&&a.jsxs(oe.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:m=>s(m,t,e),className:`
                        relative bg-white dark:bg-zinc-900
                        border border-zinc-200/60 dark:border-white/[0.06]
                        rounded-2xl ${b0[i].cardPadding}
                        shadow-sm hover:shadow-xl dark:shadow-black/10
                        cursor-grab active:cursor-grabbing
                        touch-none select-none
                        hover:border-zinc-300 dark:hover:border-white/10
                        group/card
                    `,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&a.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((m,y)=>a.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:m.color}},y))}),a.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((p=t.checklists)==null?void 0:p.length)>0&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),a.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((m,y)=>m+y.items.filter(N=>N.done).length,0),"/",t.checklists.reduce((m,y)=>m+y.items.length,0)]})]})]})})}),H9=gn.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return a.jsx(Ie,{children:t.isDragging&&t.active&&a.jsx(oe.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),a.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&a.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((s,o)=>a.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:s.color}},o))}),a.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function G9({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),a.jsxs(oe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),a.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function K9({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var b;const[s,o]=j.useState(t),[l,c]=j.useState(!1),[d,h]=j.useState("");j.useEffect(()=>{n(s)},[s,n]);const p=x=>{var R;const w=(R=s.labels)==null?void 0:R.find(V=>V.id===x.id);o(V=>({...V,labels:w?V.labels.filter(M=>M.id!==x.id):[...V.labels||[],x]}))},m=()=>{d.trim()&&(o(x=>({...x,checklists:[...x.checklists||[],{id:Date.now(),title:d.trim(),items:[]}]})),h(""),c(!1))},y=x=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{o(w=>({...w,checklists:w.checklists.filter(R=>R.id!==x)})),i(null)},onCancel:()=>i(null)})},N=(x,w)=>{o(R=>({...R,checklists:R.checklists.map(V=>V.id===x?{...V,items:V.items.map(M=>M.id===w?{...M,done:!M.done}:M)}:V)}))},C=(x,w)=>{w.trim()&&o(R=>({...R,checklists:R.checklists.map(V=>V.id===x?{...V,items:[...V.items,{id:Date.now(),text:w.trim(),done:!1}]}:V)}))},z=(x,w)=>{o(R=>({...R,checklists:R.checklists.map(V=>V.id===x?{...V,items:V.items.filter(M=>M.id!==w)}:V)}))};return a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center",onClick:e,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-xl"}),a.jsxs(oe.div,{initial:{opacity:0,y:100,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.98},transition:{type:"spring",stiffness:350,damping:30},className:"relative w-full max-w-2xl bg-white dark:bg-zinc-900 rounded-t-[2.5rem] md:rounded-[2.5rem] shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border border-zinc-200/50 dark:border-white/10",onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"shrink-0 p-6 md:p-8 border-b border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"flex gap-2 flex-wrap",children:U9.map(x=>{var w;return a.jsx("button",{onClick:()=>p(x),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(w=s.labels)!=null&&w.find(R=>R.id===x.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:x.color}},x.id)})}),a.jsx("button",{onClick:e,className:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-zinc-400 hover:text-zinc-600 dark:hover:text-white flex items-center justify-center transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("input",{className:"w-full text-2xl md:text-3xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:s.title,onChange:x=>o(w=>({...w,title:x.target.value})),placeholder:"Ttulo do carto"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),a.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:s.description||"",onChange:x=>o(w=>({...w,description:x.target.value}))})]}),(b=s.checklists)==null?void 0:b.map(x=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:x.title}),a.jsx("button",{onClick:()=>y(x.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),a.jsx(ku,{axis:"y",values:x.items,onReorder:w=>{o(R=>({...R,checklists:R.checklists.map(V=>V.id===x.id?{...V,items:w}:V)}))},className:"space-y-2",children:x.items.map(w=>a.jsxs(_u,{value:w,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[a.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),a.jsx("button",{onClick:()=>N(x.id,w.id),className:`w-5 h-5 rounded-lg border-2 flex items-center justify-center transition-all ${w.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:w.done&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsx("span",{className:`flex-1 text-sm ${w.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:w.text}),a.jsx("button",{onClick:()=>z(x.id,w.id),className:"text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},w.id))}),a.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:w=>{w.key==="Enter"&&w.target.value.trim()&&(C(x.id,w.target.value),w.target.value="")}})]},x.id)),l?a.jsxs(oe.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[a.jsx("input",{autoFocus:!0,value:d,onChange:x=>h(x.target.value),onKeyDown:x=>{x.key==="Enter"&&m(),x.key==="Escape"&&c(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:m,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),a.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):a.jsx("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 transition-colors",children:"+ Nova Checklist"}),a.jsx("div",{className:"pt-6 border-t border-zinc-100 dark:border-white/5",children:a.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20",children:"Excluir Carto"})})]})]})]})}const Q9=[{key:"kanban",label:"Kanban",icon:Y9},{key:"recipes",label:"Receitas",icon:X9},{key:"inventory",label:"Estoque",icon:J9},{key:"costs",label:"Financeiro",icon:Z9},{key:"ficha",label:"Ficha",icon:e6},{key:"calculator",label:"Produo",icon:t6}];function Y9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function X9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function J9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function Z9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function e6({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function t6({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}const Ji={type:"spring",stiffness:500,damping:35,mass:.8},n6={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function r6(){const[t,e]=j.useState("pct"),[n,r]=j.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[i,s]=j.useState(!1);j.useEffect(()=>{s(!0)},[]);const o=l=>{l!==n&&(r(l),localStorage.setItem("padoca_view",l))};return a.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${i?"opacity-100":"opacity-0"}`,children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),a.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),a.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[a.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-4 pb-4 mb-6 md:relative md:pt-8 md:mb-8",children:[a.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),a.jsxs("div",{className:"relative flex flex-col gap-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...Ji},children:[a.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),a.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),a.jsx(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...Ji},className:"hidden md:flex items-center gap-3",children:a.jsx(Ie,{mode:"wait",children:n==="calculator"&&a.jsx(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:Ji,children:a.jsx(Fy,{value:t,onChange:e})})})})]}),a.jsxs("nav",{className:"flex items-center gap-2",children:[a.jsx(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...Ji},className:"flex-1 flex items-center gap-1 p-1.5 bg-zinc-100/90 dark:bg-zinc-900/90 backdrop-blur-xl rounded-2xl overflow-x-auto scrollbar-hidden border border-zinc-200/50 dark:border-white/5 shadow-sm",children:Q9.map(({key:l,label:c,icon:d})=>{const h=n===l;return a.jsxs("button",{onClick:()=>o(l),className:`relative flex-1 md:flex-none flex items-center justify-center gap-2 px-4 md:px-5 py-3 text-[10px] md:text-[11px] font-semibold rounded-xl transition-all duration-200 whitespace-nowrap min-w-[60px] ${h?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}`,children:[h&&a.jsx(oe.div,{layoutId:"nav-active",className:"absolute inset-0 bg-white dark:bg-zinc-800 rounded-xl shadow-lg shadow-zinc-900/5 dark:shadow-black/20",transition:Ji}),a.jsx("span",{className:"relative z-10 hidden md:block",children:a.jsx(d,{active:h})}),a.jsx("span",{className:"relative z-10 uppercase tracking-wider",children:c})]},l)})}),a.jsx(Ie,{mode:"wait",children:n==="calculator"&&a.jsx(oe.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:Ji,className:"md:hidden flex-shrink-0",children:a.jsx(Fy,{value:t,onChange:e})})})]})]})]}),a.jsx(Ie,{mode:"wait",children:a.jsx(oe.main,{initial:"initial",animate:"enter",exit:"exit",variants:n6,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="kanban"?a.jsx($9,{}):n==="recipes"?a.jsx(M9,{}):n==="inventory"?a.jsx(qD,{}):n==="costs"?a.jsx(WD,{}):n==="ficha"?a.jsx(GD,{}):a.jsx(XD,{inputMode:t,setInputMode:e})},n)})]})]})}class i6 extends gn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:a.jsxs("div",{className:"max-w-md text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}lh.createRoot(document.getElementById("root")).render(a.jsx(gn.StrictMode,{children:a.jsx(i6,{children:a.jsx(r6,{})})}));
